(()=>{var et=Math.pow;var it=[9,10,13,32],V=40,S=41,Y=44,I=46,rt=58,H=63,z=91,W=93,at=125,ot=["=","||=","&&=","??=","*=","**=","/=","%=","+=","-="],P={"=":1,"||=":1,"&&=":1,"??=":1,"*=":1,"**=":1,"/=":1,"%=":1,"+=":1,"-=":1,"||":2,"&&":3,"??":4,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,"*":11,"/":11,"%":11,"+":11,"-":11},ft=["-","!","+"],B="--",M="++",ct={true:!0,false:!1,null:null,undefined:void 0},N=t=>t>=48&&t<=57,X=t=>O(t)||N(t),O=t=>t===36||t>=48&&t<=57||t===95||t>=65&&t<=90||t>=97&&t<=122,$=t=>{let e=0,f=()=>(e++,{type:5,elements:p(W)}),p=r=>{let a=[],o=!1,c=0;for(;e<t.length;){u();let s=t.charCodeAt(e);if(s===r){if(o=!0,e++,r===S&&c&&c>=a.length)throw new Error("Unexpected token "+String.fromCharCode(r));break}else if(s===Y){if(e++,c++,c!==a.length){if(r===S)throw new Error("Unexpected token ,");if(r===W)for(let i=a.length;i<c;i++)a.push(null)}}else{if(a.length!==c&&c!==0)throw new Error("Expected comma");{let i=C();if(!i)throw new Error("Expected comma");a.push(i)}}}if(!o)throw new Error("Expected "+String.fromCharCode(r));return a},l=()=>{let r=y();if(!r)return r;let a=h();if(!a)return r;let o={value:a,precedence:P[a]||0},c=y();if(!c)throw new Error("Expected expression after "+a);let s=[r,o,c],i;for(;a=h();){let K=P[a]||0;if(K===0){e-=a.length;break}o={value:a,precedence:K};let ut=a;for(;s.length>2&&s[s.length-2]>K;)c=s.pop(),a=s.pop().value,r=s.pop(),i={type:ot.indexOf(a)>=0?6:7,operator:a,left:r,right:c},s.push(i);if(i=y(),!i)throw new Error("Expected expression after "+ut);s.push(o,i)}let d=s.length-1;for(i=s[d];d>1;)a=s[d-1].value,i={type:ot.indexOf(a)>=0?6:7,operator:a,left:s[d-2],right:i},d-=2;return i},h=()=>{u();let r=t.substring(e,e+3),a=r.length;for(;a>0;){if(Object.prototype.hasOwnProperty.call(P,r)&&(!O(t.charCodeAt(e))||e+r.length<t.length&&!X(t.charCodeAt(e+r.length))))return e+=a,r;r=r.substring(0,--a)}return!1},C=()=>{let r=l();return u(),r=pt(r),r},R=r=>{let a=[];for(;e<t.length;){let o=t.charCodeAt(e);if(o===59||o===Y)e++;else{let c=C();if(c)a.push(c);else if(e<t.length){if(o===r)break;throw new Error('Unexpected "'+t.charAt(e)+'"')}}}return a},b=()=>{let r=t.charCodeAt(e),a=e;if(O(r))e++;else throw new Error("Unexpected "+t.charAt(e));for(;e<t.length&&(r=t.charCodeAt(e),X(r));)e++;return{type:2,name:t.slice(a,e)}},k=()=>{let r="";for(;N(t.charCodeAt(e));)r+=t.charAt(e++);if(t.charCodeAt(e)===I)for(r+=t.charAt(e++);N(t.charCodeAt(e));)r+=t.charAt(e++);let a=t.charAt(e);if(a==="e"||a==="E"){for(r+=t.charAt(e++),a=t.charAt(e),(a==="+"||a==="-")&&(r+=t.charAt(e++));N(t.charCodeAt(e));)r+=t.charAt(e++);if(!N(t.charCodeAt(e-1)))throw new Error("Expected exponent ("+r+t.charAt(e)+")")}let o=t.charCodeAt(e);if(O(o))throw new Error("Variable names cannot start with a number ("+r+t.charAt(e)+")");if(o===I||r.length===1&&r.charCodeAt(0)===I)throw new Error("Unexpected period");return{type:3,value:parseFloat(r)}},m=()=>{if(t.charCodeAt(e)!==123)return;e++;let r=[];for(;!isNaN(t.charCodeAt(e));){if(u(),t.charCodeAt(e)===at)return e++,v({type:11,properties:r});let a=y();if(!a)throw new Error("Missing }");if(u(),a.type===2&&(t.charCodeAt(e)===Y||t.charCodeAt(e)===at))r.push({type:4,computed:!1,key:a,value:a,shorthand:!0});else if(t.charCodeAt(e)===rt){e++,u();let o=C();if(!o)throw new Error("Unexpected object property");let c=a.type===5;r.push({computed:c,key:c?a.elements[0]:a,shorthand:!1,type:4,value:o}),u()}else a&&r.push(a);t.charCodeAt(e)===Y&&e++}throw new Error("Missing }")},T=()=>{e++;let r=R(S);if(t.charCodeAt(e)===S)return e++,r.length===1?r[0]:r.length?{type:12,expressions:r}:!1;throw new Error("Unclosed (")},u=()=>{for(;it.indexOf(t.charCodeAt(e))>=0;)e++},n=()=>{let r="",a=t.charAt(e++),o=!1;for(;e<t.length;){let c=t.charAt(e++);if(c===a){o=!0;break}if(c==="\\")switch(c=t.charAt(e++),c){case"n":r+="\n";break;case"r":r+="\r";break;case"t":r+="	";break;case"b":r+="\b";break;case"f":r+="\f";break;case"v":r+="\v";break;default:r+=c}else r+=c}if(!o)throw new Error('Unclosed quote after "'+r+'"');return{type:3,value:r}},pt=r=>{if(!r||t.charCodeAt(e)!==H)return r;e++;let a=C();if(!a)throw new Error("Expected expression");if(u(),!t.charCodeAt(e)===rt)throw new Error("Expected :");e++;let o=C();if(!o)throw new Error("Expected expression");let c={type:9,condition:r,consequent:a,alternate:o};if(r.operator&&P[r.operator]<=1){let s=r;for(;s.right.operator&&P[s.right.operator]<=1;)s=s.right;c.condition=s.right,s.right=c,c=r}return c},y=()=>{let r=m()||ht();if(r)return q(r);u();let a=t.charCodeAt(e);if(N(a)||a===I)return k();if(a===34||a===39)r=n();else if(a===z)r=f();else{let o=t.substring(e,e+1),c=o.length;for(;c>0;){if(ft.indexOf(o)>=0&&(!O(t.charCodeAt(e))||e+o.length<t.length&&!X(t.charCodeAt(e+o.length)))){e+=c;let s=y();if(!s)throw new Error("Missing unary operation parameter");return q({type:13,operator:o,parameter:s})}o=o.substr(0,--c)}O(a)?(r=b(),Object.prototype.hasOwnProperty.call(ct,r.name)&&(r={type:3,value:ct[r.name]})):a===V&&(r=T())}return q(v(r))},v=r=>{u();let a=t.charCodeAt(e);for(;a===I||a===z||a===V||a===H;){let o;if(a===H){if(t.charCodeAt(e+1)!==I)break;o=!0,e+=2,u(),a=t.charCodeAt(e)}if(e++,a===z){if(r={type:10,computed:!0,object:r,property:C()},u(),a=t.charCodeAt(e),a!==W)throw new Error("Unclosed [");e++}else a===V?r={type:8,parameters:p(S),callee:r}:(a===I||o)&&(o&&e--,u(),r={type:10,computed:!1,object:r,property:b()});o&&(r.optional=!0),u(),a=t.charCodeAt(e)}return r},ht=()=>{if(e+1>=t.length)return;let r=t.substring(e,e+2),a=null;if(r===B)a=B;else if(r===M)a=M;else return;e+=2;let o={type:14,operator:a,parameter:v(b()),prefix:!0};if(!o.parameter||o.parameter.type!==2&&o.parameter.type!==10)throw new Error("Unexpected "+o.operator);return o},q=r=>{if(!r||e+1>=t.length)return r;let a=t.substring(e,e+2),o=null;if(a===B)o=B;else if(a===M)o=M;else return r;return e+=2,r={type:14,operator:o,parameter:r,prefix:!1},r},tt=R();return tt.length===0?void 0:tt};var nt=(t,e,f={})=>{switch(t.type){case 2:return f[t.name]=e,e;case 10:let p=E(t.object,f),l=t.computed||t.property.type!==2?E(t.property,f):t.property.name;return typeof e=="function"?e.bind(p):(p[l]=e,e)}throw new Error("Unsupported assignment method.")},E=(t,e={})=>{if(t){if(Array.isArray(t))return t.map(f=>E(f,e));switch(t.type){case 2:return e[t.name];case 3:return t.value;case 5:let f=[];for(let n of t.elements)f.push(E(n,e));return f;case 6:let p=E(t.right,e);if(t.operator!=="="){let n=E(t.left,e);switch(t.operator){case"||=":if(n)return n;break;case"&&=":if(!n)return n;break;case"??=":if(n!=null)return n;break;case"*=":p=n*p;break;case"**=":p=et(n,p);break;case"/=":p=n/p;break;case"%=":p=n%p;break;case"+=":p=n+p;break;case"-=":p=n-p;break}}return nt(t.left,p,e);case 7:let l=E(t.left,e),h=E(t.right,e);switch(t.operator){case"||":return l||h;case"&&":return l&&h;case"??":return l!=null?l:h;case"==":return l==h;case"!=":return l!=h;case"===":return l===h;case"!==":return l!==h;case"<":return l<h;case">":return l>h;case"<=":return l<=h;case">=":return l>=h;case"-":return l-h;case"+":return l+h;case"*":return l*h;case"/":return l/h;case"%":return l%h}throw new Error("Unsupported operator: "+t.operator);case 8:let C=[];for(let n of t.parameters)C.push(E(n,e));return E(t.callee,e)(...C);case 9:return E(t.condition,e)?E(t.consequent,e):E(t.alternate,e);case 10:let R=E(t.object,e),b=t.computed||t.property.type!==2?E(t.property,e):t.property.name;return typeof R[b]=="function"?R[b].bind(R):R[b];case 11:let k={};for(let n of t.properties)k[n.computed||n.key.type!==2?E(n.key,e):n.key.name]=E(n.value,e);return k;case 12:return t.expressions.map(n=>E(n,e));case 13:let m=E(t.parameter,e);switch(t.operator){case"!":return!m;case"-":return-m;case"+":return+m}throw new Error("Unsupported operator: "+t.operator);case 14:let T=E(t.parameter,e),u=t.operator==="--"?-1:1;return nt(t.parameter,T+u,e),t.prefix?T+u:T}throw new Error('Unexpected node type "'+t.type+'".')}},x=E;var st=(t,e)=>x($(t),e),lt=$,Et=x;window.interpret={interpret:st,parse:lt,run:Et};})();
//# sourceMappingURL=interpret.iife.min.js.map
