var M=5,A=6,N=7,f=8,I=9,K=2,j=3,G=10,P=11,y=4,D=12,_=13,L=14;var qY=[9,10,13,32],i=40,E=41,b=44,S=46,JY=58,o=63,r=91,n=93,QY=125,zY=["=","||=","&&=","??=","*=","**=","/=","%=","+=","-="],g={"=":1,"||=":1,"&&=":1,"??=":1,"*=":1,"**=":1,"/=":1,"%=":1,"+=":1,"-=":1,"||":2,"&&":3,"??":4,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,"*":11,"/":11,"%":11,"+":11,"-":11},UY=["-","!","+"],p="--",c="++",WY={true:!0,false:!1,null:null,undefined:void 0},R=(Y)=>Y>=48&&Y<=57,e=(Y)=>C(Y)||R(Y),C=(Y)=>Y===36||Y>=48&&Y<=57||Y===95||Y>=65&&Y<=90||Y>=97&&Y<=122,x=(Y)=>{let J=0,v=()=>{return J++,{type:M,elements:U(n)}},U=(Q)=>{let z=[],W=!1,X=0;while(J<Y.length){H();let $=Y.charCodeAt(J);if($===Q){if(W=!0,J++,Q===E&&X&&X>=z.length)throw Error("Unexpected token "+String.fromCharCode(Q));break}else if($===b){if(J++,X++,X!==z.length){if(Q===E)throw Error("Unexpected token ,");else if(Q===n)for(let B=z.length;B<X;B++)z.push(null)}}else if(z.length!==X&&X!==0)throw Error("Expected comma");else{let B=V();if(!B)throw Error("Expected comma");z.push(B)}}if(!W)throw Error("Expected "+String.fromCharCode(Q));return z},q=()=>{let Q=O();if(!Q)return Q;let z=w();if(!z)return Q;let W={value:z,precedence:g[z]||0},X=O();if(!X)throw Error("Expected expression after "+z);let $=[Q,W,X],B;while(z=w()){let t=g[z]||0;if(t===0){J-=z.length;break}W={value:z,precedence:t};let FY=z;while($.length>2&&$[$.length-2]>t)X=$.pop(),z=$.pop().value,Q=$.pop(),B={type:zY.indexOf(z)>=0?A:N,operator:z,left:Q,right:X},$.push(B);if(B=O(),!B)throw Error("Expected expression after "+FY);$.push(W,B)}let l=$.length-1;B=$[l];while(l>1)z=$[l-1].value,B={type:zY.indexOf(z)>=0?A:N,operator:z,left:$[l-2],right:B},l-=2;return B},w=()=>{H();let Q=Y.substring(J,J+3),z=Q.length;while(z>0){if(Object.prototype.hasOwnProperty.call(g,Q)&&(!C(Y.charCodeAt(J))||J+Q.length<Y.length&&!e(Y.charCodeAt(J+Q.length))))return J+=z,Q;Q=Q.substring(0,--z)}return!1},V=()=>{let Q=q();return H(),Q=ZY(Q),Q},k=(Q)=>{let z=[];while(J<Y.length){let W=Y.charCodeAt(J);if(W===59||W===b)J++;else{let X=V();if(X)z.push(X);else if(J<Y.length){if(W===Q)break;throw Error('Unexpected "'+Y.charAt(J)+'"')}}}return z},T=()=>{let Q=Y.charCodeAt(J),z=J;if(C(Q))J++;else throw Error("Unexpected "+Y.charAt(J));while(J<Y.length)if(Q=Y.charCodeAt(J),e(Q))J++;else break;return{type:K,name:Y.slice(z,J)}},h=()=>{let Q="";while(R(Y.charCodeAt(J)))Q+=Y.charAt(J++);if(Y.charCodeAt(J)===S){Q+=Y.charAt(J++);while(R(Y.charCodeAt(J)))Q+=Y.charAt(J++)}let z=Y.charAt(J);if(z==="e"||z==="E"){if(Q+=Y.charAt(J++),z=Y.charAt(J),z==="+"||z==="-")Q+=Y.charAt(J++);while(R(Y.charCodeAt(J)))Q+=Y.charAt(J++);if(!R(Y.charCodeAt(J-1)))throw Error("Expected exponent ("+Q+Y.charAt(J)+")")}let W=Y.charCodeAt(J);if(C(W))throw Error("Variable names cannot start with a number ("+Q+Y.charAt(J)+")");else if(W===S||Q.length===1&&Q.charCodeAt(0)===S)throw Error("Unexpected period");return{type:j,value:parseFloat(Q)}},m=()=>{if(Y.charCodeAt(J)!==123)return;J++;let Q=[];while(!isNaN(Y.charCodeAt(J))){if(H(),Y.charCodeAt(J)===QY)return J++,a({type:P,properties:Q});let z=O();if(!z)throw Error("Missing }");if(H(),z.type===K&&(Y.charCodeAt(J)===b||Y.charCodeAt(J)===QY))Q.push({type:y,computed:!1,key:z,value:z,shorthand:!0});else if(Y.charCodeAt(J)===JY){J++,H();let W=V();if(!W)throw Error("Unexpected object property");let X=z.type===M;Q.push({computed:X,key:X?z.elements[0]:z,shorthand:!1,type:y,value:W}),H()}else if(z)Q.push(z);if(Y.charCodeAt(J)===b)J++}throw Error("Missing }")},u=()=>{J++;let Q=k(E);if(Y.charCodeAt(J)===E){if(J++,Q.length===1)return Q[0];if(!Q.length)return!1;return{type:D,expressions:Q}}throw Error("Unclosed (")},H=()=>{while(qY.indexOf(Y.charCodeAt(J))>=0)J++},Z=()=>{let Q="",z=Y.charAt(J++),W=!1;while(J<Y.length){let X=Y.charAt(J++);if(X===z){W=!0;break}if(X==="\\")switch(X=Y.charAt(J++),X){case"n":Q+=`
`;break;case"r":Q+="\r";break;case"t":Q+="\t";break;case"b":Q+="\b";break;case"f":Q+="\f";break;case"v":Q+="\v";break;default:Q+=X}else Q+=X}if(!W)throw Error('Unclosed quote after "'+Q+'"');return{type:j,value:Q}},ZY=(Q)=>{if(!Q||Y.charCodeAt(J)!==o)return Q;J++;let z=V();if(!z)throw Error("Expected expression");if(H(),!Y.charCodeAt(J)===JY)throw Error("Expected :");J++;let W=V();if(!W)throw Error("Expected expression");let X={type:I,condition:Q,consequent:z,alternate:W};if(Q.operator&&g[Q.operator]<=1){let $=Q;while($.right.operator&&g[$.right.operator]<=1)$=$.right;X.condition=$.right,$.right=X,X=Q}return X},O=()=>{let Q=m()||$Y();if(Q)return s(Q);H();let z=Y.charCodeAt(J);if(R(z)||z===S)return h();if(z===34||z===39)Q=Z();else if(z===r)Q=v();else{let W=Y.substring(J,J+1),X=W.length;while(X>0){if(UY.indexOf(W)>=0&&(!C(Y.charCodeAt(J))||J+W.length<Y.length&&!e(Y.charCodeAt(J+W.length)))){J+=X;let $=O();if(!$)throw Error("Missing unary operation parameter");return s({type:_,operator:W,parameter:$})}W=W.substr(0,--X)}if(C(z)){if(Q=T(),Object.prototype.hasOwnProperty.call(WY,Q.name))Q={type:j,value:WY[Q.name]}}else if(z===i)Q=u()}return s(a(Q))},a=(Q)=>{H();let z=Y.charCodeAt(J);while(z===S||z===r||z===i||z===o){let W;if(z===o){if(Y.charCodeAt(J+1)!==S)break;W=!0,J+=2,H(),z=Y.charCodeAt(J)}if(J++,z===r){if(Q={type:G,computed:!0,object:Q,property:V()},H(),z=Y.charCodeAt(J),z!==n)throw Error("Unclosed [");J++}else if(z===i)Q={type:f,parameters:U(E),callee:Q};else if(z===S||W){if(W)J--;H(),Q={type:G,computed:!1,object:Q,property:T()}}if(W)Q.optional=!0;H(),z=Y.charCodeAt(J)}return Q},$Y=()=>{if(J+1>=Y.length)return;let Q=Y.substring(J,J+2),z=null;if(Q===p)z=p;else if(Q===c)z=c;else return;J+=2;let W={type:L,operator:z,parameter:a(T()),prefix:!0};if(!W.parameter||W.parameter.type!==K&&W.parameter.type!==G)throw Error("Unexpected "+W.operator);return W},s=(Q)=>{if(!Q||J+1>=Y.length)return Q;let z=Y.substring(J,J+2),W=null;if(z===p)W=p;else if(z===c)W=c;else return Q;return J+=2,Q={type:L,operator:W,parameter:Q,prefix:!1},Q},YY=k();return YY.length===0?void 0:YY};var XY=(Y,J,v={})=>{switch(Y.type){case K:return v[Y.name]=J,J;case G:let U=F(Y.object,v),q=Y.computed||Y.property.type!==K?F(Y.property,v):Y.property.name;if(typeof J==="function")return J.bind(U);return U[q]=J,J}throw Error("Unsupported assignment method.")},F=(Y,J={})=>{if(!Y)return;if(Array.isArray(Y))return Y.map((v)=>F(v,J));switch(Y.type){case K:return J[Y.name];case j:return Y.value;case M:let v=[];for(let Z of Y.elements)v.push(F(Z,J));return v;case A:let U=F(Y.right,J);if(Y.operator!=="="){let Z=F(Y.left,J);switch(Y.operator){case"||=":if(Z)return Z;break;case"&&=":if(!Z)return Z;break;case"??=":if(Z!==null&&Z!==void 0)return Z;break;case"*=":U=Z*U;break;case"**=":U=Z**U;break;case"/=":U=Z/U;break;case"%=":U=Z%U;break;case"+=":U=Z+U;break;case"-=":U=Z-U;break}}return XY(Y.left,U,J);case N:let q=F(Y.left,J),w=F(Y.right,J);switch(Y.operator){case"||":return q||w;case"&&":return q&&w;case"??":return q??w;case"==":return q==w;case"!=":return q!=w;case"===":return q===w;case"!==":return q!==w;case"<":return q<w;case">":return q>w;case"<=":return q<=w;case">=":return q>=w;case"-":return q-w;case"+":return q+w;case"*":return q*w;case"/":return q/w;case"%":return q%w}throw Error("Unsupported operator: "+Y.operator);case f:let V=[];for(let Z of Y.parameters)V.push(F(Z,J));return F(Y.callee,J)(...V);case I:return F(Y.condition,J)?F(Y.consequent,J):F(Y.alternate,J);case G:let k=F(Y.object,J),T=Y.computed||Y.property.type!==K?F(Y.property,J):Y.property.name;if(typeof k[T]==="function")return k[T].bind(k);return k[T];case P:let h={};for(let Z of Y.properties)h[Z.computed||Z.key.type!==K?F(Z.key,J):Z.key.name]=F(Z.value,J);return h;case D:return Y.expressions.map((Z)=>F(Z,J));case _:let m=F(Y.parameter,J);switch(Y.operator){case"!":return!m;case"-":return-m;case"+":return+m}throw Error("Unsupported operator: "+Y.operator);case L:let u=F(Y.parameter,J),H=Y.operator==="--"?-1:1;return XY(Y.parameter,u+H,J),Y.prefix?u+H:u}throw Error('Unexpected node type "'+Y.type+'".')},d=F;var wY=(Y,J)=>d(x(Y),J),AY=x,NY=d,LY=M,kY=A,TY=N,fY=f,IY=I,PY=K,DY=j,_Y=G,SY=P,yY=y,RY=D,CY=_,mY=L,uY={interpret:wY,parse:x,run:d,ARRAY:M,ASSIGN:A,BINARY:N,CALL:f,CONDITION:I,IDENTIFIER:K,LITERAL:j,MEMBER:G,OBJECT:P,PROPERTY:y,SEQUENCE:D,UNARY:_,UPDATE:L};export{NY as run,AY as parse,wY as interpret,uY as default,mY as UPDATE,CY as UNARY,RY as SEQUENCE,yY as PROPERTY,SY as OBJECT,_Y as MEMBER,DY as LITERAL,PY as IDENTIFIER,IY as CONDITION,fY as CALL,TY as BINARY,kY as ASSIGN,LY as ARRAY};

//# debugId=84FEFED4D69FC09464756E2164756E21
