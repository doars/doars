var DoarsRouter=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)}function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=["apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"],c=Symbol(),p=Symbol(),d=Symbol(),v=function e(t){if(t.parentElement)return(t=t.parentElement)[p]?t[p]:e(t)},y={name:"$router",create:function(e,t){var n=t.getElement(),r=null,o=function(e,t){var n,r=!1,o={},i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=f(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(s);try{var a=function(){var e=n.value;o[e]=function(){if(!r)return e in t?t[e].apply(t,arguments):Reflect[e].apply(Reflect,arguments);console.error("illegal operation attempted on a revoked proxy")}};for(i.s();!(n=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}return{proxy:new Proxy({},o),revoke:function(){r=!0}}}(0,{get:function(e,o,i){if(null===r&&((r=n[p]?n[p]:v(n))||(r=!1)),t.accessed(r.getId(),""),r)return Reflect.get(r,o,i)}});return{value:o.proxy,destroy:function(){o.revoke()}}}};function h(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function m(e){return e&&e.sensitive?"":"i"}function g(e,t,n){return e instanceof RegExp?function(e,t){if(!t)return e;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,o=n.exec(e.source);o;)t.push({name:o[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),o=n.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,n){var r=e.map((function(e){return g(e,t,n).source}));return new RegExp("(?:"+r.join("|")+")",m(n))}(e,t,n):function(e,t,n){return function(e,t,n){void 0===n&&(n={});for(var r=n.strict,o=void 0!==r&&r,i=n.start,a=void 0===i||i,u=n.end,f=void 0===u||u,l=n.encode,s=void 0===l?function(e){return e}:l,c="["+h(n.endsWith||"")+"]|$",p="["+h(n.delimiter||"/#?")+"]",d=a?"^":"",v=0,y=e;v<y.length;v++){var g=y[v];if("string"==typeof g)d+=h(s(g));else{var E=h(s(g.prefix)),b=h(s(g.suffix));if(g.pattern)if(t&&t.push(g),E||b)if("+"===g.modifier||"*"===g.modifier){var w="*"===g.modifier?"?":"";d+="(?:"+E+"((?:"+g.pattern+")(?:"+b+E+"(?:"+g.pattern+"))*)"+b+")"+w}else d+="(?:"+E+"("+g.pattern+")"+b+")"+g.modifier;else d+="("+g.pattern+")"+g.modifier;else d+="(?:"+E+b+")"+g.modifier}}if(f)o||(d+=p+"?"),d+=n.endsWith?"(?="+c+")":"$";else{var x=e[e.length-1],A="string"==typeof x?p.indexOf(x[x.length-1])>-1:void 0===x;o||(d+="(?:"+p+"(?="+c+"))?"),A||(d+="(?="+p+"|"+c+")")}return new RegExp(d,m(n))}(function(e,t){void 0===t&&(t={});for(var n=function(e){for(var t=[],n=0;n<e.length;){var r=e[n];if("*"!==r&&"+"!==r&&"?"!==r)if("\\"!==r)if("{"!==r)if("}"!==r)if(":"!==r)if("("!==r)t.push({type:"CHAR",index:n,value:e[n++]});else{var o=1,i="";if("?"===e[u=n+1])throw new TypeError('Pattern cannot start with "?" at '+u);for(;u<e.length;)if("\\"!==e[u]){if(")"===e[u]){if(0==--o){u++;break}}else if("("===e[u]&&(o++,"?"!==e[u+1]))throw new TypeError("Capturing groups are not allowed at "+u);i+=e[u++]}else i+=e[u++]+e[u++];if(o)throw new TypeError("Unbalanced pattern at "+n);if(!i)throw new TypeError("Missing pattern at "+n);t.push({type:"PATTERN",index:n,value:i}),n=u}else{for(var a="",u=n+1;u<e.length;){var f=e.charCodeAt(u);if(!(f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||95===f))break;a+=e[u++]}if(!a)throw new TypeError("Missing parameter name at "+n);t.push({type:"NAME",index:n,value:a}),n=u}else t.push({type:"CLOSE",index:n,value:e[n++]});else t.push({type:"OPEN",index:n,value:e[n++]});else t.push({type:"ESCAPED_CHAR",index:n++,value:e[n++]});else t.push({type:"MODIFIER",index:n,value:e[n++]})}return t.push({type:"END",index:n,value:""}),t}(e),r=t.prefixes,o=void 0===r?"./":r,i="[^"+h(t.delimiter||"/#?")+"]+?",a=[],u=0,f=0,l="",s=function(e){if(f<n.length&&n[f].type===e)return n[f++].value},c=function(e){var t=s(e);if(void 0!==t)return t;var r=n[f],o=r.type,i=r.index;throw new TypeError("Unexpected "+o+" at "+i+", expected "+e)},p=function(){for(var e,t="";e=s("CHAR")||s("ESCAPED_CHAR");)t+=e;return t};f<n.length;){var d=s("CHAR"),v=s("NAME"),y=s("PATTERN");if(v||y){var m=d||"";-1===o.indexOf(m)&&(l+=m,m=""),l&&(a.push(l),l=""),a.push({name:v||u++,prefix:m,suffix:"",pattern:y||i,modifier:s("MODIFIER")||""})}else{var g=d||s("ESCAPED_CHAR");if(g)l+=g;else if(l&&(a.push(l),l=""),s("OPEN")){m=p();var E=s("NAME")||"",b=s("PATTERN")||"",w=p();c("CLOSE"),a.push({name:E||(b?u++:""),pattern:E&&!b?i:b,prefix:m,suffix:w,modifier:s("MODIFIER")||""})}else c("END")}}return a}(e,n),t,n)}(e,t,n)}var E=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(s,t);var u,f,l=(u=s,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=r(u);if(f){var n=r(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return a(this,e)});function s(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,s),t=l.call(this);var r=Symbol(),o=(n=Object.assign({basePath:"",path:null,pathToRegexp:{},updateHistory:!1},n)).path,a=null,u={},f=function(){t.setPath(window.location.pathname)};n.updateHistory&&window.addEventListener("popstate",f);var c=function(e,r,u){if(o=r,a=u,n.updateHistory){var f=e.includes(n.basePath)?e:n.basePath+e;f!==window.location.pathname&&window.history.pushState(null,window.document.title,f)}t.dispatchEvent("changed",[i(t),a,o])};return t.getId=function(){return r},t.getPath=function(){return o},t.getRoute=function(){return a},t.getRoutes=function(){return Object.keys(u)},t.destroy=function(){n.updateHistory&&window.removeEventListener("popstate",f),n=null,o=null,a=null,u=null,t.dispatchEvent("destroyed",[i(t)]),t.removeAllEventListeners()},t.addRoute=function(e){if(u[e]=g(e,[],n.pathToRegexp),t.dispatchEvent("added",[i(t),e]),o){var r=o.replace(n.basePath,"");u[e].test(r)&&c(o,r,e)}},t.removeRoute=function(e){delete u[e],t.dispatchEvent("removed",[i(t),e]),a===e&&(o=null,a=null,t.dispatchEvent("changed",[i(t),a,o]))},t.setPath=function(e){var t=e.replace(n.basePath,"");if(o!==t){var r=null;for(var i in u)if(u[i].test(t)){r=i;break}c(e,t,r)}},t}return n(s)}(n((function t(){e(this,t);var n={};this.addEventListener=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e in n||(n[e]=[]),n[e].push({callback:t,options:r})},this.removeEventListener=function(e,t){if(Object.keys(n).includes(e)){for(var r=n[e],o=-1,i=0;i<r.length;i++)if(r[i].callback===t){o=i;break}o<0||(r.splice(o,1),0===Object.keys(r).length&&delete n[e])}},this.removeEventListeners=function(e){e&&delete n[e]},this.removeAllEventListeners=function(){n={}},this.dispatchEvent=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n[e])for(var o=n[e],i=0;i<o.length;i++){var a=r&&r.reverse?o[o.length-(i+1)]:o[i];a.options&&a.options.once&&o.splice(i,1),a.callback.apply(a,u(t))}}}))),b=function(e){return{name:"router",update:function(t,n,r){var o=r.executeExpression,i=n.getElement(),a=i[p];if(!a){var u=Object.assign({},e,o(t,n.clone(),n.getValue()));a=i[p]=new E(u)}},destroy:function(e,t){var n=t.getElement(),r=n[p];if(r){delete n[p];var o=r.getId();r.destroy(),e.getLibrary().update([{id:o,path:""}])}}}},w={name:"route",update:function(e,t,n){var r,o=n.transitionIn,i=n.transitionOut,a=t.getElement();!function n(){if(r&&t[d]&&(r.removeEventListener("changed",t[d].handler),r.removeEventListener("destroyed",t[d].setup),delete t[d]),r=v(a)){t[d]={setup:n};var u=t.getValue();r.addRoute(u);var f=function(n,r){if(r!==u)if("TEMPLATE"===a.tagName){if(t[d]&&t[d].element){var f=t[d].element;i(e,f,(function(){f.remove(),t[d].element=void 0}))}}else i(e,a,(function(){a.style.display="none"}));else"TEMPLATE"===a.tagName?(s=document.importNode(a.content,!0),(l=a).nextSibling?l.parentNode.insertBefore(s,l.nextSibling):l.parentNode.appendChild(s),t[d].element=a.nextSibling,o(e,t[d].element)):(a.style.display=null,o(e,a));var l,s};t[d].handler=f,r.addEventListener("changed",f),f(0,r.getRoute()),r.addEventListener("destroyed",n)}}()},destroy:function(e,t,n){var r=n.transitionOut,o=t.getElement();if("TEMPLATE"===o.tagName){if(t[d]&&t[d].element){var i=t[d].element;r(e,i,(function(){i.remove(),t[d].element=void 0}))}}else r(e,o,(function(){o.style.display="none"}));var a=v(o);a&&t[d]&&(a.removeEventListener("destroyed",t[d].setup),t[d].handler&&a.removeEventListener("change",t[d].handler))}},x={name:"route-to",update:function(e,t){var n=t.getElement(),r=t.getModifiers(),o=t.getValue();if(t[c]){if(t[c].value===o)return;t[c].target.removeEventListener("click",t[c].handler)}var i=function(e){if(!r.self||e.target===n){r.prevent&&e.preventDefault(),r.stop&&e.stopPropagation();var t=v(n);t&&t.setPath(o)}};n.addEventListener("click",i),t[c]={handler:i,value:o}},destroy:function(e,t){t[c]&&(t.getElement().removeEventListener("click",t[c].handler),delete t[c])}},A=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(!r.length)return t;var i=r.shift();if(O(t)&&O(i))for(var a in i)O(i[a])?(t[a]||Object.assign(t,{[a]:{}}),e(t[a],i[a])):Array.isArray(i[a])?t[a]=i[a].map((function(t){return O(t)?e({},t):t})):Object.assign(t,{[a]:i[a]});return e.apply(void 0,[t].concat(r))},O=function(e){return e&&"object"==typeof e&&!Array.isArray(e)};return n((function t(n){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e(this,t),o=A({},o),n.addEventListener("enabling",(function(){n.addContexts(0,y),r=b(o),n.addDirectives(-1,r,w,x)})),n.addEventListener("disabling",(function(){n.removeContexts(y),n.removeDirectives(r,w,x),r=null}))}))}();
