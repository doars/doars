(()=>{var G=["apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"],$=(r,e)=>{let t=!1,n={};for(let o of G)n[o]=(...i)=>{if(!t)return o in e?e[o](...i):Reflect[o](...i)};return{proxy:new Proxy(r,n),revoke:()=>{t=!0}}};var g=Symbol("ROUTE_TO"),E=Symbol("ROUTER"),d=Symbol("ROUTE");var V=r=>{if(r.parentElement)return r=r.parentElement,r[E]?r[E]:V(r)},w=V;var I={name:"$router",create:(r,e)=>{let t=e.getElement(),n=null,o=$({},{get:(i,a,s)=>{if(n===null&&(t[E]?n=t[E]:n=w(t),n||(n=!1)),e.accessed(n.getId(),""),!!n)return Reflect.get(n,a,s)}});return{value:o.proxy,destroy:()=>{o.revoke()}}}};function J(r){for(var e=[],t=0;t<r.length;){var n=r[t];if(n==="*"||n==="+"||n==="?"){e.push({type:"MODIFIER",index:t,value:r[t++]});continue}if(n==="\\"){e.push({type:"ESCAPED_CHAR",index:t++,value:r[t++]});continue}if(n==="{"){e.push({type:"OPEN",index:t,value:r[t++]});continue}if(n==="}"){e.push({type:"CLOSE",index:t,value:r[t++]});continue}if(n===":"){for(var o="",i=t+1;i<r.length;){var a=r.charCodeAt(i);if(a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||a===95){o+=r[i++];continue}break}if(!o)throw new TypeError("Missing parameter name at ".concat(t));e.push({type:"NAME",index:t,value:o}),t=i;continue}if(n==="("){var s=1,c="",i=t+1;if(r[i]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(i));for(;i<r.length;){if(r[i]==="\\"){c+=r[i++]+r[i++];continue}if(r[i]===")"){if(s--,s===0){i++;break}}else if(r[i]==="("&&(s++,r[i+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(i));c+=r[i++]}if(s)throw new TypeError("Unbalanced pattern at ".concat(t));if(!c)throw new TypeError("Missing pattern at ".concat(t));e.push({type:"PATTERN",index:t,value:c}),t=i;continue}e.push({type:"CHAR",index:t,value:r[t++]})}return e.push({type:"END",index:t,value:""}),e}function Q(r,e){e===void 0&&(e={});for(var t=J(r),n=e.prefixes,o=n===void 0?"./":n,i="[^".concat(O(e.delimiter||"/#?"),"]+?"),a=[],s=0,c=0,u="",f=function(v){if(c<t.length&&t[c].type===v)return t[c++].value},p=function(v){var y=f(v);if(y!==void 0)return y;var R=t[c],U=R.type,b=R.index;throw new TypeError("Unexpected ".concat(U," at ").concat(b,", expected ").concat(v))},S=function(){for(var v="",y;y=f("CHAR")||f("ESCAPED_CHAR");)v+=y;return v};c<t.length;){var A=f("CHAR"),H=f("NAME"),T=f("PATTERN");if(H||T){var h=A||"";o.indexOf(h)===-1&&(u+=h,h=""),u&&(a.push(u),u=""),a.push({name:H||s++,prefix:h,suffix:"",pattern:T||i,modifier:f("MODIFIER")||""});continue}var m=A||f("ESCAPED_CHAR");if(m){u+=m;continue}u&&(a.push(u),u="");var L=f("OPEN");if(L){var h=S(),P=f("NAME")||"",l=f("PATTERN")||"",x=S();p("CLOSE"),a.push({name:P||(l?s++:""),pattern:P&&!l?i:l,prefix:h,suffix:x,modifier:f("MODIFIER")||""});continue}p("END")}return a}function O(r){return r.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function K(r){return r&&r.sensitive?"":"i"}function X(r,e){if(!e)return r;for(var t=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,o=t.exec(r.source);o;)e.push({name:o[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),o=t.exec(r.source);return r}function Y(r,e,t){var n=r.map(function(o){return _(o,e,t).source});return new RegExp("(?:".concat(n.join("|"),")"),K(t))}function Z(r,e,t){return k(Q(r,t),e,t)}function k(r,e,t){t===void 0&&(t={});for(var n=t.strict,o=n===void 0?!1:n,i=t.start,a=i===void 0?!0:i,s=t.end,c=s===void 0?!0:s,u=t.encode,f=u===void 0?function(b){return b}:u,p=t.delimiter,S=p===void 0?"/#?":p,A=t.endsWith,H=A===void 0?"":A,T="[".concat(O(H),"]|$"),h="[".concat(O(S),"]"),m=a?"^":"",L=0,P=r;L<P.length;L++){var l=P[L];if(typeof l=="string")m+=O(f(l));else{var x=O(f(l.prefix)),v=O(f(l.suffix));if(l.pattern)if(e&&e.push(l),x||v)if(l.modifier==="+"||l.modifier==="*"){var y=l.modifier==="*"?"?":"";m+="(?:".concat(x,"((?:").concat(l.pattern,")(?:").concat(v).concat(x,"(?:").concat(l.pattern,"))*)").concat(v,")").concat(y)}else m+="(?:".concat(x,"(").concat(l.pattern,")").concat(v,")").concat(l.modifier);else l.modifier==="+"||l.modifier==="*"?m+="((?:".concat(l.pattern,")").concat(l.modifier,")"):m+="(".concat(l.pattern,")").concat(l.modifier);else m+="(?:".concat(x).concat(v,")").concat(l.modifier)}}if(c)o||(m+="".concat(h,"?")),m+=t.endsWith?"(?=".concat(T,")"):"$";else{var R=r[r.length-1],U=typeof R=="string"?h.indexOf(R[R.length-1])>-1:R===void 0;o||(m+="(?:".concat(h,"(?=").concat(T,"))?")),U||(m+="(?=".concat(h,"|").concat(T,")"))}return new RegExp(m,K(t))}function _(r,e,t){return r instanceof RegExp?X(r,e):Array.isArray(r)?Y(r,e,t):Z(r,e,t)}var C=class{constructor(){let e={};this.addEventListener=(t,n,o=null)=>{t in e||(e[t]=[]),e[t].push({callback:n,options:o})},this.removeEventListener=(t,n)=>{if(!Object.keys(e).includes(t))return;let o=e[t],i=-1;for(let a=0;a<o.length;a++)if(o[a].callback===n){i=a;break}i<0||(o.splice(i,1),Object.keys(o).length===0&&delete e[t])},this.removeEventListeners=t=>{t&&delete e[t]},this.removeAllEventListeners=()=>{e={}},this.dispatchEvent=(t,n,o=null)=>{if(!e[t])return;let i=e[t];for(let a=0;a<i.length;a++){let s=o&&o.reverse?i[i.length-(a+1)]:i[a];s.options&&s.options.once&&i.splice(a,1),s.callback(...n)}}}};var D=class extends C{constructor(e={}){super();let t=Symbol("ID_ROUTER");e=Object.assign({basePath:"",path:null,pathToRegexp:{},updateHistory:!1},e);let n=e.path,o=null,i={},a=()=>{this.setPath(window.location.pathname)};e.updateHistory&&window.addEventListener("popstate",a);let s=(c,u,f)=>{if(n=u,o=f,e.updateHistory){let p=c.includes(e.basePath)?c:e.basePath+c;p!==window.location.pathname&&window.history.pushState(null,window.document.title,p)}this.dispatchEvent("changed",[this,o,n])};this.getId=()=>t,this.getPath=()=>n,this.getRoute=()=>o,this.getRoutes=()=>Object.keys(i),this.destroy=()=>{e.updateHistory&&window.removeEventListener("popstate",a),e=null,n=null,o=null,i=null,this.dispatchEvent("destroyed",[this]),this.removeAllEventListeners()},this.addRoute=c=>{if(i[c]=_(c,[],e.pathToRegexp),this.dispatchEvent("added",[this,c]),n){let u=n.replace(e.basePath,"");i[c].test(u)&&s(n,u,c)}},this.removeRoute=c=>{delete i[c],this.dispatchEvent("removed",[this,c]),o===c&&(n=null,o=null,this.dispatchEvent("changed",[this,o,n]))},this.setPath=c=>{let u=c.replace(e.basePath,"");if(n===u)return;let f=null;for(let p in i)if(i[p].test(u)){f=p;break}s(c,u,f)}}};var B=r=>({name:"router",update:(e,t,{processExpression:n})=>{let o=t.getElement(),i=o[E];if(!i){let a=Object.assign({},r,n(e,t.clone(),t.getValue()));i=o[E]=new D(a)}},destroy:(e,t)=>{let n=t.getElement(),o=n[E];if(!o)return;delete n[E];let i=o.getId();o.destroy(),e.getLibrary().update([{id:i,path:""}])}});var q=(r,e)=>{r.nextSibling?r.parentNode.insertBefore(e,r.nextSibling):r.parentNode.appendChild(e)};var j={name:"route",update:(r,e,{transitionIn:t,transitionOut:n})=>{let o=e.getElement(),i,a=()=>{if(i&&e[d]&&(i.removeEventListener("changed",e[d].handler),i.removeEventListener("destroyed",e[d].setup),delete e[d]),i=w(o),!i)return;e[d]={setup:a};let s=e.getValue();i.addRoute(s);let c=(u,f)=>{if(f!==s)if(o.tagName==="TEMPLATE"){if(e[d]&&e[d].element){let p=e[d].element;n(r,p,()=>{p.remove(),e[d].element=void 0})}}else n(r,o,()=>{o.style.display="none"});else if(o.tagName==="TEMPLATE"){let p=document.importNode(o.content,!0);q(o,p),e[d].element=o.nextSibling,t(r,e[d].element)}else o.style.display=null,t(r,o)};e[d].handler=c,i.addEventListener("changed",c),c(i,i.getRoute()),i.addEventListener("destroyed",a)};a()},destroy:(r,e,{transitionOut:t})=>{let n=e.getElement();if(n.tagName==="TEMPLATE"){if(e[d]&&e[d].element){let i=e[d].element;t(r,i,()=>{i.remove(),e[d].element=void 0})}}else t(r,n,()=>{n.style.display="none"});let o=w(n);o&&e[d]&&(o.removeEventListener("destroyed",e[d].setup),e[d].handler&&o.removeEventListener("change",e[d].handler))}};var F="click",W={name:"route-to",update:(r,e)=>{let t=e.getElement(),n=e.getModifiers(),o=e.getValue();if(e[g]){if(e[g].value===o)return;e[g].target.removeEventListener(F,e[g].handler)}let i=a=>{if(n.self&&a.target!==t)return;n.prevent&&a.preventDefault(),n.stop&&a.stopPropagation();let s=w(t);s&&s.setPath(o)};t.addEventListener(F,i),e[g]={handler:i,value:o}},destroy:(r,e)=>{if(!e[g])return;e.getElement().removeEventListener(F,e[g].handler),delete e[g]}};var N=(r,...e)=>{if(!e.length)return r;let t=e.shift();if(M(r)&&M(t))for(let n in t)M(t[n])?(r[n]||Object.assign(r,{[n]:{}}),N(r[n],t[n])):Array.isArray(t[n])?r[n]=t[n].map(o=>M(o)?N({},o):o):Object.assign(r,{[n]:t[n]});return N(r,...e)};var M=r=>r&&typeof r=="object"&&!Array.isArray(r);function z(r,e=null){e=N({},e);let t=!1,n,o=()=>{r.addContexts(0,I),n=B(e),r.addDirectives(-1,n,j,W)},i=()=>{r.removeContexts(I),r.removeDirectives(n,j,W),n=null};this.disable=()=>{!r.getEnabled()&&t&&(t=!1,r.removeEventListener("enabling",o),r.removeEventListener("disabling",i))},this.enable=()=>{t||(t=!0,r.addEventListener("enabling",o),r.addEventListener("disabling",i))},this.enable()}window.DoarsRouter=z;})();
//# sourceMappingURL=doars-router.iife.min.js.map
