var Doars=function(){"use strict";const e=Symbol(),t=Symbol(),n="-state",r=Symbol(),s=Symbol(),i=Symbol(),o=Symbol(),c=Symbol(),a=Symbol(),l=Symbol();class u{constructor(){let e={};this.addEventListener=(t,n,r=null)=>{t in e||(e[t]=[]),e[t].push({callback:n,options:r})},this.removeEventListener=(t,n)=>{if(!Object.keys(e).includes(t))return;const r=e[t];let s=-1;for(let e=0;e<r.length;e++)if(r[e].callback===n){s=e;break}s<0||(r.splice(s,1),0===Object.keys(r).length&&delete e[t])},this.removeEventListeners=t=>{t&&delete e[t]},this.removeAllEventListeners=()=>{e={}},this.dispatchEvent=(t,n,r=null)=>{if(!e[t])return;const s=e[t];for(let e=0;e<s.length;e++){const t=r&&r.reverse?s[s.length-(e+1)]:s[e];t.options&&t.options.once&&s.splice(e,1),t.callback(...n)}}}}const d=e=>{if("string"==typeof e&&(e=e.split(/(?=\.)|(?=#)|(?=\[)/)),!Array.isArray(e))return;const t={};for(let n of e)switch(n=n.trim(),n[0]){case"#":t.id=n.substring(1);break;case".":n=n.substring(1),t.class||(t.class=[]),t.class.includes(n)||t.class.push(n);break;case"[":const[e,r,s]=n.match(/^(?:\[)?([-$_.a-z0-9]{1,})(?:[$*^])?(?:=)?([\s\S]{0,})(?:\])$/i);t[r]=s}return t};class f extends u{constructor(t,n,r,s,i=!1){super();const o=Symbol();i||(n[e]||(n[e]=[]),n[e].push(this));let c,a,l,u,d,h={};if(r){const[e,n,s,i]=((e,t)=>{if(!(t=t.match(new RegExp("^"+e+"-([a-z][0-9a-z-]{1,}):?([a-z][0-9a-z-]*)?(\\..*]*)?$","i"))))return;let[n,r,s,i]=t;s=""!==s?s:null;const o=s?s.replace(/-(\w)/g,((e,t)=>t.toUpperCase())):null;return i=i?i.substring(1).split("."):[],[r,s,o,i]})(t.getLibrary().getOptions().prefix,r);c=e,a=s,l=n,u=i,i&&(d=(e=>{const t={};for(const n of e){const e=n.indexOf("-");if(e<0){t[n]=!0;continue}if(0===e){t[n.substring(1)]=!1;continue}const r=n.substring(0,e);let s=n.substring(e+1);const i=Number.parseInt(s);isNaN(i)||(s=i),t[r]=s}return t})(i))}this.getComponent=()=>t,this.getElement=()=>n,this.getId=()=>o,this.getDirective=()=>c,this.getKey=()=>a,this.getKeyRaw=()=>l,this.getModifiers=()=>Object.assign({},d),this.getModifiersRaw=()=>u,this.getName=()=>r,this.getValue=()=>s,this.setValue=e=>{s=e,this.dispatchEvent("changed",[this])},this.destroy=()=>{this.clearAccessed();const t=n[e].indexOf(this);t>=0&&n[e].splice(t,1),this.dispatchEvent("destroyed",[this]),this.removeAllEventListeners()},this.accessed=(e,t)=>{if(h[e]){if(h[e].includes(t))return}else h[e]=[];h[e].push(t),this.dispatchEvent("accessed",[this,e,t])},this.clearAccessed=()=>{h={}},this.hasAccessed=(e,t)=>{if(!(e in h))return!1;const n=h[e];for(const e of t)if(n.includes(e))return!0;return!1},this.clone=()=>new f(t,n,r,s,!0)}}const h=["apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"];function g(e,t){let n=!1;const r={};for(const e of h)r[e]=(...r)=>{if(!n)return e in t?t[e](...r):Reflect[e](...r)};return{proxy:new Proxy(e,r),revoke:()=>{n=!0}}}class p extends u{constructor(e={}){super(),e=Object.assign({delete:!0,get:!0,set:!0},e);const t=new WeakMap;this.add=(n,r=[])=>{if(t.has(n))return t.get(n);for(const e in n)n[e]&&"object"==typeof n[e]&&(n[e]=this.add(n[e],[...r,e]));const s={};e.delete&&(s.deleteProperty=(e,t)=>{if(!Reflect.has(e,t))return!0;this.remove(e,t);const n=Reflect.deleteProperty(e,t);return n&&this.dispatchEvent("delete",[e,Array.isArray(e)?[...r]:[...r,t]]),n}),e.get&&(s.get=(e,t,n)=>(t!==Symbol.unscopables&&this.dispatchEvent("get",[e,[...r,t],n]),Reflect.get(e,t,n))),e.set&&(s.set=(e,t,n,s)=>(e[t]===n||("object"==typeof n&&(n=this.add(n,[...r,t])),e[t]=n,this.dispatchEvent("set",[e,Array.isArray(e)?[...r]:[...r,t],n,s])),!0));const i=g(n,s);return t.set(i,n),i.proxy},this.remove=e=>{if(!t.has(e))return;const n=t.get(e);t.delete(n);for(const e in n.proxy)"object"==typeof n.proxy[e]&&this.remove(n.proxy[e]);n.revoke()}}}const m=e=>{if(e.parentElement)return(e=e.parentElement)[t]?e[t]:m(e)},b=()=>({createContexts:v,createContextsProxy:y,RevocableProxy:g}),v=(e,t,n,r=null)=>{const s={},i=[];let o="",c="";const a=e.getLibrary().getContexts();for(const r of a){if(!r||!r.name)continue;const a=r.create(e,t,n,b());a&&a.value&&(a.destroy&&"function"==typeof a.destroy&&i.push(a.destroy),r.deconstruct&&"object"==typeof a.value&&(c+="with("+r.name+") { ",o+=" }"),s[r.name]=a.value)}if("object"==typeof r)for(const e in r)s[e]=r[e];return{after:o,before:c,destroy:()=>{i.forEach((e=>e(b())))},contexts:s}},y=(e,t,n,r=null)=>{let s=null;const i=g({},{get:(i,o)=>(s||(s=v(e,t,n,r)),o in s.contexts?(t.accessed(e.getId(),o),s.contexts[o]):s.contexts.$state&&o in s.contexts.$state?(t.accessed(e.getId(),"$state"),s.contexts.$state[o]):void 0)});return{contexts:i.proxy,destroy:()=>{s&&s.destroy&&s.destroy(e,t),i.revoke()}}},E=(e,t,n,r=null,s=null)=>{s=Object.assign({return:!0},s);const i=[];let o,{after:c,before:a,contexts:l,destroy:u}=v(e,t,((e,t)=>{i.push({id:e,path:t})}),r);s.return&&(a+="return ");try{o=new Function(...Object.keys(l),a+n+c)(...Object.values(l))}catch(e){throw Error(e)}return u(),i.length>0&&e.getLibrary().update(i),o},x=(e,t)=>{for(const n in t)if("class"!==n)e.setAttribute(n,t[n]);else for(const n of t.class)e.classList.add(n)},A=(e,t)=>{for(const n in t)if("class"!==n)t[n]&&e.attributes[n]!==t[n]||e.removeAttribute(n);else for(const n of t.class)e.classList.remove(n)},k=(e,t,n)=>{if("value"!==t||"INPUT"!==e.tagName)"checked"!==t||"checkbox"!==e.type&&"radio"!==e.type?("class"===t&&(Array.isArray(n)?n=n.join(" "):"object"==typeof n&&(n=Object.entries(n).filter((([e,t])=>t)).map((([e])=>e)).join(" "))),"style"===t&&(Array.isArray(n)?n=n.join(" "):"object"==typeof n&&(n=Object.entries(n).map((([e,t])=>e+":"+t)).join(";"))),!1===n||null==n?e.removeAttribute(t):e.setAttribute(t,n)):e.checked=!!n;else{if(n||(n=""),e.getAttribute(t)===n)return;e.setAttribute(t,n)}},O=(e,t)=>{for(const n in t)k(e,n,t[n])},L=(e,t,n,r=null)=>{if(1!==n.nodeType)return void(r&&r());const{prefix:s}=t.getLibrary().getOptions(),i=s+"-transition:"+e,o=t=>{n.dispatchEvent(new CustomEvent("transition-"+t)),n.dispatchEvent(new CustomEvent("transition-"+e+"-"+t))};let c,a,l,u,f=!1;const h={};return c=i,a=n.getAttribute(c),a&&(h.during=d(a),x(n,h.during)),c=i+".from",a=n.getAttribute(c),a&&(h.from=d(a),x(n,h.from)),o("start"),u=requestAnimationFrame((()=>{if(u=null,f)return;if(h.from&&(A(n,h.from),h.from=void 0),c=i+".to",a=n.getAttribute(c),a)h.to=d(a),x(n,h.to);else if(!h.during)return o("end"),r&&r(),void(f=!0);const e=getComputedStyle(n);let t=1e3*Number(e.transitionDuration.replace(/,.*/,"").replace("s",""));0===t&&(t=1e3*Number(e.animationDuration.replace("s",""))),l=setTimeout((()=>{l=null,f||(h.during&&(A(n,h.during),h.during=void 0),h.to&&(A(n,h.to),h.to=void 0),o("end"),r&&r(),f=!0)}),t)})),()=>{f&&(f=!0,h.during&&(A(n,h.during),h.during=void 0),h.from?(A(n,h.from),h.from=void 0):h.to&&(A(n,h.to),h.to=void 0),u?(cancelAnimationFrame(u),u=null):l&&(clearTimeout(l),l=null),o("end"),r&&r())}},w=(e,t,n)=>L("in",e,t,n),N=(e,t,n)=>L("out",e,t,n),$=(e,t)=>{e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)},j=(e,t)=>{let n=-1,r=null;return()=>{if(n>=0&&r){const e=r();if(e)return e}let s=null;do{if(n++,n>=e.childElementCount)return null;s=e.children[n]}while(!t(s));return s.childElementCount&&(r=j(s,t)),s}},C=()=>({executeExpression:E,transition:L,transitionIn:w,transitionOut:N});class S{constructor(e,r){const s=Symbol(),{prefix:i}=e.getOptions();let o,c,a,l=[],u=!1,d=!1;if(!r.attributes[i+n])return;r[t]=this;const h=[];let g=m(r);g&&(g.getChildren().includes(this)||(g.getChildren().push(this),e.update([{id:g.getId(),path:"children"}]))),this.getAttributes=()=>l,this.getChildren=()=>h,this.getElement=()=>r,this.getId=()=>s,this.getLibrary=()=>e,this.getParent=()=>g,this.getProxy=()=>c,this.getState=()=>a,this.setParent=e=>{g=e},this.initialize=()=>{if(d)return;d=!0;const e=i+n,t=r.attributes[e].value;o=E(this,new f(this,r,null,t),t)??{},Array.isArray(o)||"object"!=typeof o||(c=new p,a=c.add(o),this.scanAttributes(r))},this.destroy=()=>{if(!d)return;if(l.length>0){const t=e.getDirectivesObject();for(const e in t)t[e].destroy||(t[e]=void 0);for(const e of l){const n=t[e.getKey()];n&&n.destroy(this,e,C()),e.destroy()}}delete r[t],l=[],d=!1,c.remove(o),a=null,c=null,o=null;const n=[];if(h.length>0){for(const e of h)e.setParent(g),n.push({id:e.getId(),path:"parent"});n.push({id:s,path:"children"})}g&&(h.length>0&&(g.getChildren().push(...h),n.push({id:g.getId(),path:"children"})),n.push({id:s,path:"parent"})),n.length>0&&e.update(n),b("destroyed",{element:r,id:s})},this.addAttribute=(t,n,r)=>{const s=e.getDirectivesNames(),i=new f(this,t,n,r);let o=i.length;const c=s.indexOf(i.getDirective());for(let e=l.length-1;e>=0;e--)if(s.indexOf(l[e].getDirective())<=c){o=e+1;break}return l.splice(o,0,i),i},this.removeAttribute=t=>{const n=l.indexOf(t);if(n<0)return;const r=e.getDirectivesObject[t.getKey()];r&&r.destroy&&r.destroy(this,t,C()),l.splice(n,1),t.destroy()},this.scanAttributes=t=>{const r=i+n,s=[],o=j(t,(e=>!e.hasAttribute(r)));do{for(const{name:n,value:r}of t.attributes)e.isDirectiveName(n)&&s.push(this.addAttribute(t,n,r))}while(t=o());return s},this.updateAttribute=t=>{if(!t.getElement()||null===t.getValue()||void 0===t.getValue())return void this.removeAttribute(t);const n=e.getDirectivesObject();t.clearAccessed();const r=n[t.getDirective()];r&&r.update(this,t,C())},this.updateAttributes=e=>{if(!d||e.length<=0)u||(u=!0,b("updated",{attributes:e,element:r,id:s}));else{for(const t of e)this.updateAttribute(t);u=!0,b("updated",{attributes:e,element:r,id:s})}},this.update=e=>{if(!d)return;const t=Object.getOwnPropertySymbols(e),n=[];for(const r of l)for(const s of t)r.hasAccessed(s,e[s])&&(this.updateAttribute(r),n.push(r));(!u||n.length>0)&&(u=!0,b("updated",{attributes:n,element:r,id:s}))};const b=(e,t)=>{r.dispatchEvent(new CustomEvent(i+"-"+e,{detail:t,bubbles:!0}))}}}var T={name:"$children",create:(e,t,n,{createContextsProxy:r,RevocableProxy:s})=>{let i;const o=s(e.getChildren(),{get:(s,o,c)=>{if(i||(i=s.map((e=>r(e,t,n))),t.accessed(e.getId(),"children")),isNaN(o))return Reflect.get(i,o,c);const a=Reflect.get(i,o,c);return a?a.contexts:void 0}});return{value:o.proxy,destroy:()=>{i&&i.forEach((e=>e.destroy())),o.revoke()}}}},P={name:"$component",create:e=>({value:e.getElement()})},I={name:"$element",create:(e,t)=>({value:t.getElement()})},D={name:"$dispatch",create:e=>({value:(t,n={})=>{e.getElement().dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0}))}})},V={deconstruct:!0,name:"$for",create:(e,t,n,{RevocableProxy:s})=>{if(e!==t.getComponent())return;let i=t.getElement();const o=e.getElement(),c=[],a={};for(;i&&!i.isSameNode(o);){const e=i[r];if(e){c.push(e);for(const t in e.variables)a[t]=e.variables[t]}i=i.parentNode}if(0===c.length)return;const l=s(a,{get:(e,n)=>{for(const e of c)if(n in e.variables)return t.accessed(e.id,"$for"),e.variables[n]}});return{value:l.proxy,destroy:()=>{l.revoke()}}}},R={name:"$inContext",create:(e,t,n,{createContexts:r})=>({value:s=>{const{contexts:i,destroy:o}=r(e,t,n,{}),c=s(i);return o(),c}})},z={name:"$nextTick",create:(e,t,n,{createContexts:r})=>{let s,i=!1;return{value:o=>{(()=>{if(i)return;i=!0;const o=e.getLibrary();s=[];const c=()=>{a();const{contexts:i,destroy:o}=r(e,t,n,{});for(const e of s)e(i);o()},a=()=>{o.removeEventListener("updated",c),t.removeEventListener("changed",a),t.removeEventListener("destroyed",a)};o.addEventListener("updated",c),t.addEventListener("changed",a),t.addEventListener("destroyed",a)})(),s.push(o)}}}},M={name:"$parent",create:(e,t,n,{createContextsProxy:r})=>{const s=e.getParent();if(!s)return{key:"$parent",value:null};const{contexts:i,destroy:o}=r(s,t,n);return{value:i,destroy:o}}},_={name:"$references",create:(e,t,n,{RevocableProxy:r})=>{if(!e[a])return{key:"$references",value:[]};let s=e[l];if(!s){const t=e[a],n=Object.getOwnPropertySymbols(t);s={};for(const e of n){const{element:n,name:r}=t[e];s[r]=n}e[l]=s}const i=r(s,{get:(n,r,s)=>(t.accessed(e.getId(),"$references."+r),Reflect.get(n,r,s))});return{value:i.proxy,destroy:()=>{i.revoke()}}}},K={deconstruct:!0,name:"$state",create:(e,t,n,{RevocableProxy:r})=>{const s=e.getProxy(),i=e.getState();if(!s||!i)return;const o=(t,r)=>n(e.getId(),"$state."+r.join(".")),c=(n,r)=>t.accessed(e.getId(),"$state."+r.join(".")),a=(t,r)=>n(e.getId(),"$state."+r.join("."));s.addEventListener("delete",o),s.addEventListener("get",c),s.addEventListener("set",a);const l=r(i,{});return{value:l.proxy,destroy:()=>{s.removeEventListener("delete",o),s.removeEventListener("get",c),s.removeEventListener("set",a),l.revoke()}}}},q={name:"attribute",update:(e,t,{executeExpression:n})=>{const r=t.getElement(),s=t.getModifiers();let i=n(e,t,t.getValue());if(s.selector){if("string"!=typeof i)return;return i=d(i),void O(r,i)}if(Array.isArray(i))return;if("object"==typeof i)return void O(r,i);const o=t.getKey();k(r,o,i)}},U={name:"cloak",update:function(e,t,{transitionIn:n}){const r=t.getElement();r.removeAttribute(e.getLibrary().getOptions().prefix+"-"+this.name),n(e,r)}};const W=(e,...t)=>{const n={};for(let r=0;r<t.length&&!(r>=e.length);r++)n[e[r]]=t[r];return n},F=(e,t,n=-1)=>++n>=e.length?-1:e[n][r].value===t?n:F(e,t,n),X=(e,t,n,s,i,o,c)=>{const a=F(s,o,i);if(a>=0){if(a===i+1)return;const e=s[a];return $(s[i]??n,e),void t(e[r].id)}let l=document.importNode(n.content,!0);const u=-1===i?n:s[i];$(u,l),l=u.nextElementSibling,w(e,l),l[r]={id:Symbol(),value:o,variables:c},s.splice(i+1,0,l)},H=(e,t,n)=>{if(!(t.length<n))for(let r=t.length-1;r>=n;r--){const n=t[r];t.splice(r,1),N(e,n,(()=>{n.remove()}))}};var B={name:"for",update:(e,t,{executeExpression:n})=>{const s=t.getElement();if("TEMPLATE"!==s.tagName)return;const i=(e=>{const t=e.match(/^([$_a-z0-9,(){}\s]{1,}?)\s+(?:in|of)\s+([\s\S]{1,})$/i);if(!t)return;let n=t[1].replace(/^[\s({]*|[)}\s]*$/g,"");return n=n.match(/^([$_a-z0-9]{1,})?(?:,\s+?)?([$_a-z0-9]{1,})?(?:,\s+)?([$_a-z0-9]{1,})?$/i),n?(n.shift(),{iterable:t[2].trim(),variables:[...n]}):void 0})(t.getValue());if(!i)return;t[r]||(t[r]=[]);const o=t[r],c={},a=e=>{c[e]||(c[e]=["$for"])};let l;l=isNaN(i.iterable)?n(e,t,i.iterable):Number(i.iterable);const u=typeof l;if("number"===u){for(let t=0;t<l;t++){const n=W(i.variables,t);X(e,a,s,o,t-1,l,n)}H(e,o,l)}else if("string"===u){for(let t=0;t<l.length;t++){const n=l[t],r=W(i.variables,n,t);X(e,a,s,o,t-1,n,r)}H(e,o,l.length)}else{let t,n;try{const e=[...l];t=!0,n=e.length}catch{}if(t)for(let t=0;t<n;t++){const n=l[t],r=W(i.variables,n,t);X(e,a,s,o,t-1,n,r)}else{const t=Object.keys(l);n=t.length;for(let r=0;r<n;r++){const n=t[r],c=l[n],u=W(i.variables,n,c,r);X(e,a,s,o,r-1,c,u)}}H(e,o,n)}Object.getOwnPropertySymbols(c).length>0&&e.update(c)},destroy:(e,t)=>{if(!e[r])return;if(!t[r])return;const n=t[r];for(const t of n)N(e,t,(()=>{t.remove()}));delete t[r]}},G={name:"html",update:(e,t,{executeExpression:n})=>{const r=t.getElement(),s=n(e,t,t.getValue());r.innerHTML!==s&&(r.innerHTML=s)}},J={name:"if",update:(e,t,{executeExpression:n,transitionIn:r,transitionOut:i})=>{const o=t.getElement();if("TEMPLATE"!==o.tagName)return;if(o.childCount>1)return;const c=n(e,t,t.getValue());let a=o[s];c?a||(a=document.importNode(o.content,!0),$(o,a),o[s]=a=o.nextElementSibling,r(e,a)):a&&i(e,a,(()=>{a.remove()}))},destroy:(e,t,{transitionOut:n})=>{const r=t.getElement(),i=r[s];i&&n(e,i,(()=>{i.remove(),r[s]=void 0}))}};const Q=(e,t)=>{if(!t[i])return;const n=e.getElement(),r=e.getLibrary().getOptions().prefix+"-updated";n.removeEventListener(r,t[i].handler),delete t[i]};var Y={name:"initialized",update:(e,t,{executeExpression:n})=>{const r=e.getElement(),s=t.getValue(),o=e.getLibrary().getOptions().prefix+"-updated";if(t[i]){if(t[i].value===s)return;r.removeEventListener(o,t[i].handler),delete t[i]}const c=({detail:r})=>{r.component===e&&(n(e,t.clone(),s,{},{return:!1}),Q(e,t))};r.addEventListener(o,c,{once:!0}),t[i]={handler:c,value:s}},destroy:Q};const Z=["alt","ctrl","meta","shift"];var ee={name:"on",update:(e,t,{executeExpression:n})=>{let r,s=t.getKeyRaw();if(!s)return;s.startsWith("keydown-")?(r=s.substring(8).toLowerCase(),s="keydown"):s.startsWith("keyup-")&&(r=s.substring(6).toLowerCase(),s="keyup");const i=t.getElement(),o=t.getValue();if(t[c]){if(t[c].value===o)return;t[c].target.removeEventListener(s,t[c].handler),t[c].timeout&&clearTimeout(t[c].timeout),delete t[c]}const a=t.getModifiers(),l={};a.capture&&(l.capture=!0),a.once&&(l.once=!0),a.passive&&(l.passive=!0);let u=0;a.buffer?(u=1,!0===a.buffer&&(a.buffer=5)):a.debounce?(u=2,!0===a.debounce&&(a.debounce=500)):a.throttle&&(u=3,!0===a.throttle&&(a.throttle=500));const d=[];if(r){a.meta=!!a.meta||a.cmd||a.super;for(const e of Z)a[e]&&d.push(e)}const f=l=>{if(a.self&&l.target!==i)return;if(a.outside&&i.contains(l.target))return;if(("keydown"===s||"keyup"===s)&&r){for(const e of d)if(!l[e+"Key"])return;let e=a.code?l.code:l.key;if(" "===e&&(e="space"),e=e.toLowerCase(),r!==e)return}a.prevent&&l.preventDefault(),a.stop&&l.stopPropagation();const f=()=>{n(e,t.clone(),o,{$event:l,$events:t[c].buffer},{return:!1}),t[c].buffer=[]};if(t[c].buffer.push(l),1===u){if(t[c].buffer.length<a.buffer)return;f()}else if(1===u)t[c].timeout&&(clearTimeout(t[c].timeout),t[c].timeout=null),t[c].timeout=setTimeout(f,a.debounce);else if(3===u){const e=window.performance.now();if(t[c].lastExecution&&e-t[c].lastExecution<a.throttle)return;f(),t[c].lastExecution=e}else f()},h=a.outside?document:i;h.addEventListener(s,f,l),t[c]={buffer:[],handler:f,target:h,timeout:t[c]?t[c].timeout:void 0,value:o}},destroy:(e,t)=>{if(!t[c])return;const n=t.getKeyRaw();t[c].target.removeEventListener(n,t[c].handler),t[c].timeout&&clearTimeout(t[c].timeout),delete t[c]}};const te=(e,t)=>{if(!e[a])return;const n=t.getId();if(!e[a][n])return;const r=e.getLibrary(),s=e.getId(),i=t.getValue().trim();delete e[a][n],delete e[l],0===Object.keys(e[a]).length&&delete e[a],r.update([{id:s,path:"$references."+i}])};var ne={name:"reference",update:(e,t)=>{const n=t.getValue().trim();if(!/^[_$a-z]{1}[_\-$a-z0-9]{0,}$/i.test(n))return void te(e,t);const r=e.getLibrary(),s=e.getId(),i=t.getElement(),o=t.getId();e[a]||(e[a]={}),e[a][o]={element:i,name:n},delete e[l],r.update([{id:s,path:"$references."+n}])},destroy:te},re={name:"select",update:(e,t,{executeExpression:n})=>{const r=t.getElement(),s=r.getAttribute("type");if("SELECT"!==r.tagName&&("INPUT"!==r.tagName||"checkbox"!==s&&"radio"!==s))return;const i=n(e,t,t.getValue());if("SELECT"===r.tagName)for(const e of Array.from(r.options)){const t=Array.isArray(i)?i.includes(e.value):i===e.value;e.selected!==t&&(e.selected=t,t?e.setAttribute("selected",""):e.removeAttribute("selected"))}else if("checkbox"===s){const e=i.includes(r.value);r.checked!==e&&(e?r.setAttribute("checked",""):r.removeAttribute("checked"))}else{const e=i===r.value;r.checked!==e&&(e?r.setAttribute("checked",""):r.removeAttribute("checked"))}}},se={name:"show",update:(e,t,{executeExpression:n,transitionIn:r,transitionOut:s})=>{const i=t.getElement();n(e,t,t.getValue())?(i.style.display=null,r(e,i)):s(e,i,(()=>{i.style.display="none"}))}};const ie=(e,t,n)=>{if("object"!=typeof e)return;let r=0;for(;r<t.length-1;r++)if("object"!=typeof(e=e[t[r]]))return;e[t[r]]=n},oe="$state.",ce=function(e,t,n){const r=(t,n)=>{n[e]&&(n.getElement().removeEventListener("input",n[e]),delete n[e])};return{update:(t,s,{executeExpression:i})=>{const o=s.getElement(),c=!s[e];if(c&&("DIV"!==o.tagName||!o.hasAttribute("contenteditable"))&&"INPUT"!==o.tagName&&"SELECT"!==o.tagName&&"TEXTAREA"!==o.tagName)return;const a=s.getValue();if(!/^[_$a-z]{1}[._$a-z0-9]{0,}$/i.test(a))return void r(0,s);let l=a;if(l.startsWith(n)&&(l=l.substring(n.length)),l=l.split("."),c){const{data:n,id:r,path:c}=((e,t)=>{let n=t.getValue();return n.startsWith(oe)||(n=oe+n),{data:e.getState(),id:e.getId(),path:n}})(t,s);let u;switch(o.tagName){case"DIV":u=()=>(ie(n,l,o.innerText),!0);break;case"INPUT":u=()=>{if("checkbox"===o.type){const e=i(t,s.clone(),a);if(o.checked){if(!e)return ie(n,l,[o.value]),!0;if(!e.includes(o.value))return e.push(o.value),!0}else if(e){const t=e.indexOf(o.value);if(t>=0)return e.splice(t,1),!0}}else{if("radio"!==o.type)return ie(n,l,o.value),!0;{const e=i(t,s.clone(),a);if(o.checked){if(e!==o.value)return ie(n,l,o.value),!0}else if(e===o.value)return ie(n,l,null),!0}}return!1};break;case"TEXTAREA":u=()=>(ie(n,l,o.value),!0);break;case"SELECT":u=()=>{if(o.multiple){const e=[];for(const t of o.selectedOptions)e.push(t.value);return ie(n,l,e),!0}return ie(n,l,o.selectedOptions[0].value),!0}}const d=()=>{u()&&t.getLibrary().update([{id:r,path:c}])};o.addEventListener("input",d),s[e]=d}const u=i(t,s,a);switch(o.tagName){case"DIV":case"TEXTAREA":u!==o.innerText&&(o.innerText=u);break;case"INPUT":if("checkbox"===o.type){const e=u.includes(o.value);o.checked!==e&&(o.checked=e,e?o.setAttribute("checked",""):o.removeAttribute("checked"))}else if("radio"===o.type){const e=u===o.value;o.checked!==e&&(o.checked=e,e?o.setAttribute("checked",""):o.removeAttribute("checked"))}else u!==o.value&&o.setAttribute("value",u);break;case"SELECT":for(const e of Array.from(o.options)){const t=Array.isArray(u)?u.includes(e.value):u===e.value;e.selected!==t&&(e.selected=t,t?e.setAttribute("selected",""):e.removeAttribute("selected"))}}},destroy:r}}(o,0,oe);ce.name="sync-state";var ae={name:"text",update:(e,t,{executeExpression:n})=>{const r=t.getElement(),s=t.getModifiers(),i=n(e,t,t.getValue());s.content?r.textContent!==i&&(r.textContent=i):r.innerText!==i&&(r.innerText=i)}},le={name:"watch",update:(e,t,{executeExpression:n})=>{const r=t.getValue();n(e,t,r,{},{return:!1})}};return class extends u{constructor(r){super();let{prefix:s,root:i}=r=Object.assign({prefix:"d",root:document.body.firstElementChild},r);if("string"==typeof i&&(r.root=i=document.querySelector(i)),!s)return;if("string"!=typeof s)return;if(!i)return;if("object"!=typeof i)return;const o=Symbol();let c,a,l,u=!1,d=!1;const f=[],h=[T,P,I,D,R,z,M,_,K,V],g=[ne,q,B,G,J,ae,U,Y,ee,re,se,ce,le];let p,b,v;this.getEnabled=()=>u,this.getId=()=>o,this.getOptions=()=>Object.assign({},r),this.enable=()=>{if(u)return this;d=!1,c=[],l={},this.dispatchEvent("enabling",[this]),u=!0,p=g.map((e=>e.name)),b={};for(const e of g)b[e.name]=e;v=new RegExp("^"+s+"-("+p.join("|")+")(?:[$-_.a-z0-9]{0,})?$","i"),a=new MutationObserver(x.bind(this)),a.observe(i,{attributes:!0,childList:!0,subtree:!0});const e=s+n,t=i.querySelectorAll("["+e+"]");return y(i.hasAttribute(e)?i:null,...t),this.dispatchEvent("enabled",[this]),this.dispatchEvent("updated",[this]),this},this.disable=()=>u?(a.disconnect(),a=null,d=c=l=null,this.dispatchEvent("disabling",[this],{reverse:!0}),E(...f),p=b=v=null,u=!1,this.dispatchEvent("disabled",[this],{reverse:!0}),this):this;const y=(...e)=>{const n=[],r=[];for(const s of e){if(!s)continue;if(s[t])continue;const e=new S(this,s);f.push(e),n.push(e),r.push(s)}r.length>0&&this.dispatchEvent("components-added",[this,r]);for(const e of n)e.initialize();for(const e of n)e.updateAttributes(e.getAttributes());return n},E=(...e)=>{const t=[];for(const n of e){const e=f.indexOf(n);e<0||(t.push(n.getElement()),n.destroy(),f.splice(e,1))}return t.length>0&&this.dispatchEvent("components-removed",[this,t]),t};this.getContexts=()=>[...h],this.addContexts=(e,...t)=>{if(u)return;e<0?e=h.length+e%h.length:e>h.length&&(e=h.length);const n=[];for(let r=0;r<t.length;r++){const s=t[r];h.includes(s)||(h.splice(e+r,0,s),n.push(s))}return n.length>0&&this.dispatchEvent("contexts-added",[this,n]),n},this.removeContexts=(...e)=>{if(u)return;const t=[];for(const n of e)h.indexOf(n)<0||t.push(n);return t.length>0&&this.dispatchEvent("contexts-removed",[this,t]),t},this.getDirectives=()=>[...g],this.getDirectivesNames=()=>[...p],this.getDirectivesObject=()=>Object.assign({},b),this.isDirectiveName=e=>v.test(e),this.addDirectives=(e,...t)=>{if(u)return;e<0?e=g.length+e%g.length:e>g.length&&(e=g.length);const n=[];for(let r=0;r<t.length;r++){const s=t[r];g.includes(s)||(g.splice(e+r,0,s),n.push(s))}return n.length>0&&(p=b=v=null,this.dispatchEvent("directives-added",[this,n])),n},this.removeDirectives=(...e)=>{if(u)return;const t=[];for(const n of e)g.indexOf(n)<0||t.push(n);return t.length>0&&(p=b=v=null,this.dispatchEvent("directives-removed",[this,t])),t},this.update=e=>{if(u){if(e)for(const t of e){const{id:e,path:n}=t;e in l?l[e].includes(n)||l[e].push(n):l[e]=[n]}if(!d&&0!==Object.getOwnPropertySymbols(l).length){d=!0,e=l,l={};for(const t of f)t.update(e);d=!1,Object.getOwnPropertySymbols(l).length>0?window.requestAnimationFrame((()=>this.update())):c.length>0?x():this.dispatchEvent("updated",[this])}}};const x=r=>{if(c.push(...r),d)return;if(0===c.length)return;d=!0,r=[...c],c=[];const i=s+n,o=[],a=[];for(const n of r)if("childList"===n.type){for(let r of n.removedNodes)if(1===r.nodeType)if(r[t]){a.unshift(r[t]);const e=r.querySelectorAll(i);for(const n of e)n[t]&&a.unshift(n)}else{const n=j(r,(e=>!e[t]||(a.unshift(e[t]),!1)));do{if(r[e])for(const t of r[e])t.getComponent().removeAttribute(t)}while(r=n())}for(const e of n.addedNodes){if(1!==e.nodeType)continue;const t=e.querySelectorAll("["+i+"]");for(const e of t)o.push(e);if(e.hasAttribute(i)){o.push(e);continue}const n=m(e);if(n){const t=n.scanAttributes(e);n.updateAttributes(t)}}}else if("attributes"===n.type){if(n.attributeName===i){if(n.target[t])continue;const r=m(n.target);if(r){let t=n.target;const s=j(t,(e=>e.hasAttribute(i)));do{for(const n of t[e])r.removeAttribute(n)}while(t=s())}y(n.target);continue}if(!v.test(n.attributeName))continue;const r=m(n.target);if(!r)continue;let s=null;for(const t of n.target[e])if(t.getName()===n.attributeName){s=t;break}const o=n.target.getAttribute(n.attributeName);if(!s){o&&r.addAttribute(n.target,n.attributeName,o);continue}s.setValue(o),r.updateAttribute(s)}a.length>0&&E(...a),o.length>0&&y(...o),d=!1,c.length>0?x():Object.getOwnPropertySymbols(l).length>0&&this.update()}}}}();
