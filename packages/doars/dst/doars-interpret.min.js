var ze=Math.pow;var U=Symbol("ATTRIBUTES"),S=Symbol("COMPONENT"),q=Symbol("FOR"),M=Symbol("INITIALIZED"),A=Symbol("ON"),P=Symbol("REFERENCES"),Q=Symbol("REFERENCES_CACHE"),J=Symbol("SYNC");var Le=class{constructor(){let e={};this.addEventListener=(o,r,i=null)=>{o in e||(e[o]=[]),e[o].push({callback:r,options:i})},this.removeEventListener=(o,r)=>{if(!Object.keys(e).includes(o))return;let i=e[o],c=-1;for(let f=0;f<i.length;f++)if(i[f].callback===r){c=f;break}c<0||(i.splice(c,1),Object.keys(i).length===0&&delete e[o])},this.removeEventListeners=o=>{o&&delete e[o]},this.removeAllEventListeners=()=>{e={}},this.dispatchEvent=(o,r,i=null)=>{if(!e[o])return;let c=e[o];for(let f=0;f<c.length;f++){let s=i&&i.reverse?c[c.length-(f+1)]:c[f];s.options&&s.options.once&&c.splice(f,1),s.callback(...r)}}}},W=Le;var X=t=>t.replace(/\\/g,"\\\\").replace(/\\'/g,"\\'").replace(/\\"/g,'\\"').replace(/\n/g,"\\n"),$t=t=>t.replace(/-(\w)/g,(e,o)=>o.toUpperCase()),Ge=t=>{let e={};for(let o of t){let r=o.indexOf("-");if(r<0){e[o]=!0;continue}if(r===0){e[o.substring(1)]=!1;continue}let i=o.substring(0,r),c=o.substring(r+1),f=c,s;if(c.endsWith("ms")?f=c.substring(-2):c.endsWith("s")?(s="s",f=c.substring(-1)):c.endsWith("m")?(s="m",f=c.substring(-1)):c.endsWith("h")&&(s="h",f=c.substring(-1)),f=Number.parseInt(f),!isNaN(f))switch(c=f,s){case"h":c*=60;case"m":c*=60;case"s":c*=1e3;break}e[i]=c}return e},qe=(t,e)=>{if(e=e.match(new RegExp("^"+t+"-([a-z][0-9a-z-]{1,}):?([a-z][0-9a-z-]*)?(\\..*]*)?$","i")),!e)return;let[o,r,i,c]=e;i=i!==""?i:null;let f=i?$t(i):null;return c=c?c.substring(1).split("."):[],[r,i,f,c]},Qe=t=>{let e=t.match(/^([$_a-z0-9,(){}\s]{1,}?)\s+(?:in|of)\s+([\s\S]{1,})$/i);if(!e)return;let o=e[1].replace(/^[\s({]*|[)}\s]*$/g,"");if(o=o.match(/^([$_a-z0-9]{1,})?(?:,\s+?)?([$_a-z0-9]{1,})?(?:,\s+)?([$_a-z0-9]{1,})?$/i),!!o)return o.shift(),{iterable:e[2].trim(),variables:[...o]}},Z=t=>{if(typeof t=="string"&&(t=t.split(/(?=\.)|(?=#)|(?=\[)/)),!Array.isArray(t))return;let e={};for(let o of t)switch(o=o.trim(),o[0]){case"#":e.id=o.substring(1);break;case".":o=o.substring(1),e.class||(e.class=[]),e.class.includes(o)||e.class.push(o);break;case"[":let[r,i,c]=o.match(/^(?:\[)?([-$_.a-z0-9]{1,})(?:[$*^])?(?:=)?([\s\S]{0,})(?:\])$/i);e[i]=c;break}return e};var ee=class t extends W{constructor(e,o,r,i,c=!1){super();let f=Symbol("ID_ATTRIBUTE");c||(o[U]||(o[U]=[]),o[U].push(this));let s={},l=null,u,m,g,p,E;if(r){let[y,b,x,N]=qe(e.getLibrary().getOptions().prefix,r);u=y,m=x,g=b,p=N,N&&(E=Ge(N))}this.getComponent=()=>e,this.getElement=()=>o,this.getId=()=>f,this.getDirective=()=>u,this.getKey=()=>m,this.getKeyRaw=()=>g,this.getModifiers=()=>Object.assign({},E),this.getModifiersRaw=()=>p,this.getName=()=>r,this.getValue=()=>i,this.setValue=y=>{i=y,this.dispatchEvent("changed",[this])},this.clearData=()=>{l=null},this.hasData=()=>l!==null,this.getData=()=>l,this.setData=y=>{l=y},this.destroy=()=>{this.setData(null),this.clearAccessed();let y=o[U].indexOf(this);y>=0&&o[U].splice(y,1),this.dispatchEvent("destroyed",[this]),this.removeAllEventListeners()},this.accessed=(y,b)=>{if(!s[y])s[y]=[];else if(s[y].includes(b))return;s[y].push(b),this.dispatchEvent("accessed",[this,y,b])},this.clearAccessed=()=>{s={}},this.hasAccessed=(y,b)=>{if(!(y in s))return!1;let x=s[y];for(let N of b)if(x.includes(N))return!0;return!1},this.clone=()=>new t(e,o,r,i,!0)}};var Bt=["apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"],ie=(t,e)=>{let o=!1,r={};for(let i of Bt)r[i]=(...c)=>{if(!o)return i in e?e[i](...c):Reflect[i](...c)};return{proxy:new Proxy(t,r),revoke:()=>{o=!0}}};var ke=class extends W{constructor(e={}){super(),e=Object.assign({delete:!0,get:!0,set:!0},e);let o=new WeakMap;this.add=(r,i=[])=>{if(o.has(r))return o.get(r);for(let s in r)r[s]&&typeof r[s]=="object"&&(r[s]=this.add(r[s],[...i,s]));let c={};e.delete&&(c.deleteProperty=(s,l)=>{if(!Reflect.has(s,l))return!0;this.remove(s,l);let u=Reflect.deleteProperty(s,l);return u&&this.dispatchEvent("delete",[s,Array.isArray(s)?[...i]:[...i,l]]),u}),e.get&&(c.get=(s,l,u)=>(l!==Symbol.unscopables&&this.dispatchEvent("get",[s,[...i,l],u]),Reflect.get(s,l,u))),e.set&&(c.set=(s,l,u,m)=>(s[l]===u||(u&&typeof u=="object"&&(u=this.add(u,[...i,l])),s[l]=u,this.dispatchEvent("set",[s,Array.isArray(s)?[...i]:[...i,l],u,m])),!0));let f=ie(r,c);return o.set(f,r),f.proxy},this.remove=r=>{if(!o.has(r))return;let i=o.get(r);o.delete(i);for(let c in i.proxy)typeof i.proxy[c]=="object"&&this.remove(i.proxy[c]);i.revoke()}}},Je=ke;var V=t=>{if(t.parentElement)return t=t.parentElement,t[S]?t[S]:V(t)};var Ee=(t,e)=>{for(let o in e){if(o==="class"){for(let r of e.class)t.classList.add(r);continue}t.setAttribute(o,e[o])}};var Y=(t,e)=>{for(let o in e){if(o==="class"){for(let r of e.class)t.classList.remove(r);continue}e[o]&&t.attributes[o]!==e[o]||t.removeAttribute(o)}},Pe=(t,e,o)=>{if(e==="value"&&t.tagName==="INPUT"){if(o||(o=""),t.getAttribute(e)===o)return;t.setAttribute(e,o);return}if(e==="checked"&&(t.type==="checkbox"||t.type==="radio")){t.checked=!!o;return}e==="class"&&(Array.isArray(o)?o=o.join(" "):typeof o=="object"&&(o=Object.entries(o).filter(([r,i])=>i).map(([r])=>r).join(" "))),e==="style"&&(Array.isArray(o)?o=o.join(" "):typeof o=="object"&&(o=Object.entries(o).map(([r,i])=>r+":"+i).join(";"))),o===!1||o===null||o===void 0?t.removeAttribute(e):t.setAttribute(e,o)},Ue=(t,e)=>{for(let o in e)Pe(t,o,e[o])};var Ft="-transition:",ye=(t,e,o,r=null)=>{if(o.nodeType!==1){r&&r();return}let{prefix:i}=e.getLibrary().getOptions(),c=i+Ft+t,f=E=>{o.dispatchEvent(new CustomEvent("transition-"+E)),o.dispatchEvent(new CustomEvent("transition-"+t+"-"+E))},s,l,u,m,g=!1,p={};return s=c,l=o.getAttribute(s),l&&(p.during=Z(l),Ee(o,p.during)),s=c+".from",l=o.getAttribute(s),l&&(p.from=Z(l),Ee(o,p.from)),f("start"),m=requestAnimationFrame(()=>{if(m=null,g)return;if(p.from&&(Y(o,p.from),p.from=void 0),s=c+".to",l=o.getAttribute(s),l)p.to=Z(l),Ee(o,p.to);else if(!p.during){f("end"),r&&r(),g=!0;return}let E=getComputedStyle(o),y=Number(E.transitionDuration.replace(/,.*/,"").replace("s",""))*1e3;y===0&&(y=Number(E.animationDuration.replace("s",""))*1e3),u=setTimeout(()=>{u=null,!g&&(p.during&&(Y(o,p.during),p.during=void 0),p.to&&(Y(o,p.to),p.to=void 0),f("end"),r&&r(),g=!0)},y)}),()=>{g&&(g=!0,p.during&&(Y(o,p.during),p.during=void 0),p.from?(Y(o,p.from),p.from=void 0):p.to&&(Y(o,p.to),p.to=void 0),m?(cancelAnimationFrame(m),m=null):u&&(clearTimeout(u),u=null),f("end"),r&&r())}},ve=(t,e,o)=>ye("in",t,e,o),ce=(t,e,o)=>ye("out",t,e,o);var ae=(t,e)=>{t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)};var te=(t,e)=>{let o=-1,r=null;return()=>{if(o>=0&&r){let c=r();if(c)return c}let i=null;do{if(o++,o>=t.childElementCount)return null;i=t.children[o]}while(!e(i));return i.childElementCount&&(r=te(i,e)),i}};var le=class{constructor(e,o){var D,w;let r=Symbol("ID_COMPONENT"),{prefix:i,processor:c}=e.getOptions(),f=typeof c,s;f==="function"?s=c:f==="string"&&e.constructor[c+"Expression"]?s=e.constructor[c+"Expression"]:s=(w=(D=e.constructor.executeExpression)!=null?D:e.constructor.interpretExpression)!=null?w:e.constructor.callExpression;let l=Object.freeze({processExpression:s,transition:ye,transitionIn:ve,transitionOut:ce}),u=[],m=!1,g=!1,p,E,y;if(!o.attributes[i+"-state"])return;o[S]=this;let b=[],x=V(o);x&&(x.getChildren().includes(this)||(x.getChildren().push(this),e.update([{id:x.getId(),path:"children"}]))),this.getAttributes=()=>u,this.getChildren=()=>b,this.getElement=()=>o,this.getId=()=>r,this.getLibrary=()=>e,this.getParent=()=>x,this.getProxy=()=>E,this.getState=()=>y,this.setParent=n=>{x=n},this.initialize=()=>{if(g)return;g=!0;let n=i+"-state",a=o.attributes[n].value;if(p=a?s(this,new ee(this,o,null,a),a):{},p===null)p={};else if(typeof p!="object"||Array.isArray(p))return;E=new Je,y=E.add(p),this.scanAttributes(o)},this.destroy=()=>{if(!g)return;if(u.length>0){let a=e.getDirectivesObject();for(let d in a)a[d].destroy||(a[d]=void 0);for(let d of u){let h=a[d.getKey()];h&&h.destroy(this,d,l),d.destroy()}}delete o[S],u=[],g=!1,E.remove(p),y=null,E=null,p=null;let n=[];if(b.length>0){for(let a of b)a.setParent(x),n.push({id:a.getId(),path:"parent"});n.push({id:r,path:"children"})}x&&(b.length>0&&(x.getChildren().push(...b),n.push({id:x.getId(),path:"children"})),n.push({id:r,path:"parent"})),n.length>0&&e.update(n),N("destroyed",{element:o,id:r})},this.addAttribute=(n,a,d)=>{let h=e.getDirectivesNames(),v=new ee(this,n,a,d),O=v.length,k=h.indexOf(v.getDirective());for(let C=u.length-1;C>=0;C--)if(h.indexOf(u[C].getDirective())<=k){O=C+1;break}return u.splice(O,0,v),v},this.removeAttribute=n=>{let a=u.indexOf(n);if(a<0)return;let h=e.getDirectivesObject[n.getKey()];h&&h.destroy&&h.destroy(this,n,l),u.splice(a,1),n.destroy()},this.scanAttributes=n=>{let a=i+"-state",d=i+"-ignore",h=[],v=te(n,O=>!O.hasAttribute(a)&&!O.hasAttribute(d));do for(let{name:O,value:k}of n.attributes)e.isDirectiveName(O)&&h.push(this.addAttribute(n,O,k));while(n=v());return h},this.updateAttribute=n=>{if(!n.getElement()||n.getValue()===null||n.getValue()===void 0){this.removeAttribute(n);return}let a=e.getDirectivesObject();n.clearAccessed();let d=a[n.getDirective()];d&&d.update(this,n,l)},this.updateAttributes=n=>{if(!g||n.length<=0){m||(m=!0,N("updated",{attributes:n,element:o,id:r}));return}for(let a of n)this.updateAttribute(a);m=!0,N("updated",{attributes:n,element:o,id:r})},this.update=n=>{if(!g)return;let a=Object.getOwnPropertySymbols(n),d=[];for(let h of u)for(let v of a)h.hasAccessed(v,n[v])&&(this.updateAttribute(h),d.push(h));(!m||d.length>0)&&(m=!0,N("updated",{attributes:d,element:o,id:r}))};let N=(n,a)=>{o.dispatchEvent(new CustomEvent(i+"-"+n,{detail:a,bubbles:!0}))}}};var We={name:"$children",create:(t,e,o,{createContextsProxy:r,RevocableProxy:i})=>{let c,f=i(t.getChildren(),{get:(s,l,u)=>{if(c||(c=s.map(g=>r(g,e,o)),e.accessed(t.getId(),"children")),isNaN(l))return Reflect.get(c,l,u);let m=Reflect.get(c,l,u);if(m)return m.contexts}});return{value:f.proxy,destroy:()=>{c&&c.forEach(s=>s.destroy()),f.revoke()}}}};var Xe={name:"$component",create:t=>({value:t.getElement()})};var Ze={name:"$element",create:(t,e)=>({value:e.getElement()})};var et={name:"$dispatch",create:t=>({value:(e,o={})=>{t.getElement().dispatchEvent(new CustomEvent(e,{detail:o,bubbles:!0}))}})};var tt={deconstruct:!0,name:"$for",create:(t,e,o,{RevocableProxy:r})=>{if(t!==e.getComponent())return;let i=e.getElement(),c=t.getElement(),f=[],s={};for(;i&&!i.isSameNode(c);){let u=i[q];if(u){f.push(u);for(let m in u.variables)s[m]=u.variables[m]}i=i.parentNode}if(f.length===0)return;let l=r(s,{get:(u,m)=>{for(let g of f)if(m in g.variables)return e.accessed(g.id,"$for"),g.variables[m]}});return{value:l.proxy,destroy:()=>{l.revoke()}}}};var rt={name:"$inContext",create:(t,e,o,{createContexts:r})=>({value:i=>{let c=[],f=(m,g)=>{c.push({id:m,path:g})},{contexts:s,destroy:l}=r(t,e,f,{}),u=i(s);return l(),c.length>0&&t.getLibrary().update(c),u}})};var ot={name:"$nextTick",create:(t,e,o,{createContexts:r})=>{let i,c=!1,f=()=>{if(c)return;c=!0;let s=t.getLibrary();i=[];let l=()=>{u();let{contexts:m,destroy:g}=r(t,e,o,{});for(let p of i)p(m);g()},u=()=>{s.removeEventListener("updated",l),e.removeEventListener("changed",u),e.removeEventListener("destroyed",u)};s.addEventListener("updated",l),e.addEventListener("changed",u),e.addEventListener("destroyed",u)};return{value:s=>{f(),i.push(s)}}}};var st={name:"$parent",create:(t,e,o,{createContextsProxy:r})=>{let i=t.getParent();if(!i)return{key:"$parent",value:null};let{contexts:c,destroy:f}=r(i,e,o);return{value:c,destroy:f}}};var nt={name:"$references",create:(t,e,o,{RevocableProxy:r})=>{if(!t[P])return{key:"$references",value:[]};let i=t[Q];if(!i){let f=t[P],s=Object.getOwnPropertySymbols(f);i={};for(let l of s){let{element:u,name:m}=f[l];i[m]=u}t[Q]=i}let c=r(i,{get:(f,s,l)=>(e.accessed(t.getId(),"$references."+s),Reflect.get(f,s,l))});return{value:c.proxy,destroy:()=>{c.revoke()}}}};var it={deconstruct:!0,name:"$state",create:(t,e,o,{RevocableProxy:r})=>{let i=t.getProxy(),c=t.getState();if(!i||!c)return;let f=(m,g)=>o(t.getId(),"$state."+g.join(".")),s=(m,g)=>e.accessed(t.getId(),"$state."+g.join(".")),l=(m,g)=>o(t.getId(),"$state."+g.join("."));i.addEventListener("delete",f),i.addEventListener("get",s),i.addEventListener("set",l);let u=r(c,{});return{value:u.proxy,destroy:()=>{i.removeEventListener("delete",f),i.removeEventListener("get",s),i.removeEventListener("set",l),u.revoke()}}}};var Lr=Function.prototype.toString.call(Function).replace("Function","Promise").replace(/\(.*\)/,"()");var L=t=>t&&Object.prototype.toString.call(t)==="[object Promise]";var ct={name:"attribute",update:(t,e,{processExpression:o})=>{let r=e.getElement(),i=e.getModifiers(),c=s=>{if(i.selector){if(typeof s!="string")return;s=Z(s),Ue(r,s);return}let l=e.getKeyRaw();if(!l){typeof s=="object"&&!Array.isArray(s)&&Ue(r,s);return}Pe(r,l,s)},f=o(t,e,e.getValue());e.setData(f),L(f)?Promise.resolve(f).then(s=>{e.getData()===f&&c(s)}):c(f)}};var at={name:"cloak",update:function(t,e,{transitionIn:o}){let r=e.getElement();r.removeAttribute(t.getLibrary().getOptions().prefix+"-"+this.name),o(t,r)}};var Ae=(t,...e)=>{let o={};for(let r=0;r<e.length&&!(r>=t.length);r++)o[t[r]]=e[r];return o},lt=(t,e,o=-1)=>(o++,o>=t.length?-1:t[o][q].value===e?o:lt(t,e,o)),be=(t,e,o,r,i,c,f)=>{let s=lt(r,c,i);if(s>=0){if(s===i+1)return;let m=r[s];ae(r[i]?r[i]:o,m),e(m[q].id);return}let l=document.importNode(o.content,!0),u=i===-1?o:r[i];ae(u,l),l=u.nextElementSibling,ve(t,l),l[q]={id:Symbol("ID_FOR"),value:c,variables:f},r.splice(i+1,0,l)},je=(t,e,o)=>{if(!(e.length<o))for(let r=e.length-1;r>=o;r--){let i=e[r];e.splice(r,1),ce(t,i,()=>{i.remove()})}},ft={name:"for",update:(t,e,{processExpression:o})=>{let r=e.getElement();if(r.tagName!=="TEMPLATE")return;let i=Qe(e.getValue());if(!i)return;let c={},f=m=>{c[m]||(c[m]=["$for"])},s=m=>{let g=e.getData(),p=g.elements?g.elements:[],E=typeof m;if(m!=null)if(E==="number"){for(let y=0;y<m;y++){let b=Ae(i.variables,y);be(t,f,r,p,y-1,m,b)}je(t,p,m)}else if(E==="string"){for(let y=0;y<m.length;y++){let b=m[y],x=Ae(i.variables,b,y);be(t,f,r,p,y-1,b,x)}je(t,p,m.length)}else{let y,b;try{let x=[...m];y=!0,b=x.length}catch(x){}if(y)for(let x=0;x<b;x++){let N=m[x],D=Ae(i.variables,N,x);be(t,f,r,p,x-1,N,D)}else{let x=Object.keys(m);b=x.length;for(let N=0;N<b;N++){let D=x[N],w=m[D],n=Ae(i.variables,D,w,N);be(t,f,r,p,N-1,w,n)}}je(t,p,b)}Object.getOwnPropertySymbols(c).length>0&&t.update(c),e.setData(Object.assign({},g,{elements:p}))},l;isNaN(i.iterable)?l=o(t,e,i.iterable):l=Number(i.iterable);let u=e.getData();e.setData(Object.assign({},u,{result:l})),L(l)?Promise.resolve(l).then(m=>{e.getData().result===l&&s(m)}):s(l)},destroy:(t,e)=>{let o=e.getData();if(o.elements)for(let r of o.elements)ce(t,r,()=>{r.remove()})}};var Vt={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"'},Yt=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g;var ut=t=>typeof t!="string"?t:t.replaceAll(Yt,e=>Vt[e]);var dt={name:"html",update:(t,e,{processExpression:o})=>{let r=e.getElement(),i=e.getModifiers(),c=s=>{if(i.decode&&typeof s=="string"&&(s=ut(s)),s instanceof HTMLElement){for(let l of r.children)l.remove();r.appendChild(s.cloneNode(!0));return}if(typeof s=="string"){r.innerHTML!==s&&(r.innerHTML=s);return}},f=o(t,e,e.getValue());e.setData(f),L(f)?Promise.resolve(f).then(s=>{e.getData()===f&&c(s)}):c(f)}};var pt={name:"if",update:(t,e,{processExpression:o,transitionIn:r,transitionOut:i})=>{let c=e.getElement();if(c.tagName!=="TEMPLATE"||c.childCount>1)return;let f=u=>{let m=e.getData(),g=m.element,p=m.transition;u?g||(p&&p(),g=document.importNode(c.content,!0),ae(c,g),g=c.nextElementSibling,p=r(t,g)):g&&(p&&p(),p=i(t,g,()=>{g.remove()})),e.setData(Object.assign({},m,{element:g,transition:p}))},s=o(t,e,e.getValue()),l=e.getData();e.setData(Object.assign({},l,{result:s})),L(s)?Promise.resolve(s).then(u=>{e.getData().result===u&&f(u)}):f(s)},destroy:(t,e,{transitionOut:o})=>{let r=e.getData();r.element&&o(t,r.element,()=>{r.element.remove()})}};var ht=(t,e)=>{if(!e[M])return;let o=t.getElement(),r=t.getLibrary().getOptions().prefix+"-updated";o.removeEventListener(r,e[M].handler),delete e[M]},mt={name:"initialized",update:(t,e,{processExpression:o})=>{let r=t.getElement(),i=e.getValue(),c=t.getLibrary().getOptions().prefix+"-updated";if(e[M]){if(e[M].value===i)return;r.removeEventListener(c,e[M].handler),delete e[M]}let f=({detail:s})=>{s.element===r&&(o(t,e.clone(),i,{},{return:!1}),ht(t,e))};r.addEventListener(c,f,{once:!0}),e[M]={handler:f,value:i}},destroy:ht};var fe={keydown:"keyup",mousedown:"mouseup",pointerdown:"pointerup"},j={NONE:0,BUFFER:1,DEBOUNCE:2,HELD:3,HOLD:4,THROTTLE:5},Ht=["alt","ctrl","meta","shift"],gt={name:"on",update:(t,e,{processExpression:o})=>{let r=e.getKeyRaw();if(!r)return;let i;r.startsWith("keydown-")?(i=r.substring(8).toLowerCase(),r="keydown"):r.startsWith("keyup-")&&(i=r.substring(6).toLowerCase(),r="keyup");let c=e.getElement(),f=e.getValue();if(e[A]){if(e[A].value===f)return;e[A].target.removeEventListener(r,e[A].handler),e[A].timeout&&clearTimeout(e[A].timeout),delete e[A]}let s=e.getModifiers(),l={};s.capture&&(l.capture=!0),s.once&&(l.once=!0),s.passive&&(l.passive=!0);let u=j.NONE;s.buffer?(u=j.BUFFER,s.buffer===!0&&(s.buffer=5)):s.debounce?(u=j.DEBOUNCE,s.debounce===!0&&(s.debounce=500)):s.held?(u=j.HELD,s.held===!0&&(s.held=500)):s.hold?(u=j.HOLD,s.hold===!0&&(s.hold=500)):s.throttle&&(u=j.THROTTLE,s.throttle===!0&&(s.throttle=500));let m=[];if(i){s.meta=s.meta?!0:s.cmd||s.super;for(let E of Ht)s[E]&&m.push(E)}let g=c;s.document||s.outside?g=document:s.window&&(g=window);let p=E=>{if(e[A].prevent||!s.repeat&&E.repeat||s.self&&E.target!==c||s.outside&&c.contains(E.target))return;if((r==="keydown"||r==="keyup")&&i){for(let x of m)if(!E[x+"Key"])return;let b=s.code?E.code:E.key;if(b===" "&&(b="space"),b=b.toLowerCase(),b!==i)return}s.prevent&&E.preventDefault(),s.stop&&E.stopPropagation();let y=()=>{o(t,e.clone(),f,{$event:E,$events:e[A].buffer},{return:!1}),e[A].buffer=[]};switch(e[A].buffer.push(E),u){case j.BUFFER:if(e[A].buffer.length<s.buffer)return;y();return;case j.DEBOUNCE:e[A].timeout&&(clearTimeout(e[A].timeout),e[A].timeout=null),e[A].timeout=setTimeout(y,s.debounce);return;case j.HELD:if(!(r in fe))return;let b=fe[r],x=window.performance.now();e[A].cancel=w=>{if(window.performance.now()-x<s.held){e[A].prevent=!1;return}if(b==="keyup"&&i){for(let a of m)if(!w[a+"Key"]){e[A].prevent=!1;return}let n=s.code?w.code:w.key;if(n===" "&&(n="space"),n=n.toLowerCase(),n!==i){e[A].prevent=!1;return}}if(s.self&&w.target!==c){e[A].prevent=!1;return}if(s.outside&&c.contains(w.target)){e[A].prevent=!1;return}y()},e[A].prevent=!0,g.addEventListener(b,e[A].cancel,{once:!0});return;case j.HOLD:if(!(r in fe))return;let N=fe[r];e[A].cancel=w=>{if(N==="keyup"&&i){let n=!1;for(let d of m)w[d+"Key"]||(n=!0);let a=s.code?w.code:w.key;if(a===" "&&(a="space"),a=a.toLowerCase(),a===i&&(n=!0),!n){e[A].prevent=!1;return}}if(s.self&&w.target!==c){e[A].prevent=!1;return}if(s.outside&&c.contains(w.target)){e[A].prevent=!1;return}clearTimeout(e[A].timeout)},g.addEventListener(N,e[A].cancel,{once:!0}),e[A].prevent=!0,e[A].timeout=setTimeout(()=>{g.removeEventListener(N,e[A].cancel),e[A].prevent=!1,y()},s.hold);return;case j.THROTTLE:let D=window.performance.now();if(e[A].lastExecution&&D-e[A].lastExecution<s.throttle)return;y(),e[A].lastExecution=D;return}y()};g.addEventListener(r,p,l),e[A]={buffer:[],handler:p,target:g,timeout:e[A]?e[A].timeout:void 0,value:f,prevent:!1}},destroy:(t,e)=>{if(!e[A])return;let o=e.getKeyRaw();e[A].target.removeEventListener(o,e[A].handler),e[A].cancel&&e[A].target.removeEventListener(fe[o],e[A].cancel),e[A].timeout&&clearTimeout(e[A].timeout),delete e[A]}};var Et=(t,e)=>{if(!t[P])return;let o=e.getId();if(!t[P][o])return;let r=t.getLibrary(),i=t.getId(),c=e.getValue().trim();delete t[P][o],delete t[Q],Object.keys(t[P]).length===0&&delete t[P],r.update([{id:i,path:"$references."+c}])},yt={name:"reference",update:(t,e)=>{let o=e.getValue().trim();if(!/^[_$a-z]{1}[_\-$a-z0-9]{0,}$/i.test(o)){Et(t,e);return}let r=t.getLibrary(),i=t.getId(),c=e.getElement(),f=e.getId();t[P]||(t[P]={}),t[P][f]={element:c,name:o},delete t[Q],r.update([{id:i,path:"$references."+o}])},destroy:Et};var vt="SELECT",xe="checked",At="selected",bt="checkbox",xt={name:"select",update:(t,e,{processExpression:o})=>{let r=e.getElement(),i=r.getAttribute("type");if(r.tagName!==vt&&!(r.tagName==="INPUT"&&(i===bt||i==="radio")))return;let c=s=>{if(r.tagName===vt)for(let l of Array.from(r.options)){let u=Array.isArray(s)?s.includes(l.value):s===l.value;l.selected!==u&&(l.selected=u,u?l.setAttribute(At,""):l.removeAttribute(At))}else if(i===bt){let l=s.includes(r.value);r.checked!==l&&(l?r.setAttribute(xe,""):r.removeAttribute(xe))}else{let l=s===r.value;r.checked!==l&&(l?r.setAttribute(xe,""):r.removeAttribute(xe))}},f=o(t,e,e.getValue());e.setData(f),L(f)?Promise.resolve(f).then(s=>{e.getData()===f&&c(s)}):c(f)}};var Ct={name:"show",update:(t,e,{processExpression:o,transitionIn:r,transitionOut:i})=>{let c=e.getElement(),f=()=>{let u=e.getData();u.transition&&u.transition();let m;u.result?(c.style.display=null,m=r(t,c)):m=i(t,c,()=>{c.style.display="none"}),e.setData(Object.assign({},u,{transition:m}))},s=o(t,e,e.getValue()),l=e.getData();L(s)?(e.setData(Object.assign({},l,{result:s})),Promise.resolve(s).then(u=>{e.getData().result===s&&f(u)})):(!l||l.result!==s)&&(e.setData(Object.assign({},l,{result:s})),f())}};var Nt=()=>({createContexts:_e,createContextsProxy:Kt,RevocableProxy:ie}),_e=(t,e,o,r=null)=>{let i=t.getLibrary(),c=i.getSimpleContexts(),f=[],s="",l="",u=i.getContexts(),m=[];for(let g of u){if(!g||!g.name)continue;let p=g.create(t,e,o,Nt());!p||!p.value||(p.destroy&&typeof p.destroy=="function"&&m.push(p.destroy),g.deconstruct&&typeof p.value=="object"&&(f.push(g.name),l+="with("+g.name+") { ",s+=" }"),c[g.name]=p.value)}if(typeof r=="object")for(let g in r)c[g]=r[g];return{contexts:c,destroy:()=>{for(let g of m)g(Nt())},after:s,before:l,deconstructed:f}},Kt=(t,e,o,r=null)=>{let i=null,c=ie({},{get:(f,s)=>{if(i||(i=_e(t,e,o,r)),s in i.contexts)return e.accessed(t.getId(),s),i.contexts[s];if(i.contexts.$state&&s in i.contexts.$state)return e.accessed(t.getId(),"$state"),i.contexts.$state[s]}});return{contexts:c.proxy,destroy:()=>{i&&i.destroy&&i.destroy(t,e),c.revoke()}}},H=(t,e,o=null)=>{let r=[],i=(s,l)=>{r.push({id:s,path:l})},{contexts:c,destroy:f}=_e(t,e,i,o);return[c,()=>{f(),r.length>0&&t.getLibrary().update(r)}]};var Me=(t,e)=>{let o=t,r=0;for(;r<e.length-1;r++)o=o[e[r]];return o[e[r]]};var $=(t,e,o)=>{if(typeof t!="object")return;let r=0;for(;r<e.length-1;r++)if(t=t[e[r]],typeof t!="object")return;t[e[r]]=o};var Ot={name:"sync",update:(t,e,{processExpression:o})=>{let r=e.getElement(),i=!e[J];if(i&&!(r.tagName==="DIV"&&r.hasAttribute("contenteditable"))&&r.tagName!=="INPUT"&&r.tagName!=="SELECT"&&r.tagName!=="TEXTAREA")return;let c=e.getValue().trim(),f=e.getKey();if(f&&(c="$"+f+"."+c),!/^[_$a-z]{1}[._$a-z0-9]{0,}$/i.test(c))return;if(c=c.split("."),i){let l;switch(r.tagName){case"DIV":l=()=>{let[u,m]=H(t,e.clone());$(u,c,X(r.innerText)),m()};break;case"INPUT":l=()=>{let u=e.clone(),m=X(r.value),[g,p]=H(t,u);if(r.type==="checkbox"){let E=Me(g,c);if(r.checked)E||$(g,c,[m]),E.includes(r.value)||E.push(m);else if(E){let y=E.indexOf(r.value);y>=0&&E.splice(y,1)}}else if(r.type==="radio"){let E=Me(g,c);r.checked?E!==r.value&&$(g,c,m):E===r.value&&$(g,c,null)}else $(g,c,m);p()};break;case"TEXTAREA":l=()=>{let[u,m]=H(t,e.clone());$(u,c,X(r.innerText)),m()};break;case"SELECT":l=()=>{let[u,m]=H(t,e.clone());if(r.multiple){let g=[];for(let p of r.selectedOptions)g.push(X(p.value));$(u,c,[g.join("','")])}else $(u,c,X(r.selectedOptions[0].value));m()};break}r.addEventListener("input",l),e[J]=l}let s=o(t,e,c);switch(r.tagName){case"DIV":case"TEXTAREA":s!==r.innerText&&(r.innerText=s);break;case"INPUT":if(r.type==="checkbox"){let l=s.includes(r.value);r.checked!==l&&(r.checked=l,l?r.setAttribute("checked",""):r.removeAttribute("checked"))}else if(r.type==="radio"){let l=s===r.value;r.checked!==l&&(r.checked=l,l?r.setAttribute("checked",""):r.removeAttribute("checked"))}else s!==r.value&&r.setAttribute("value",s);break;case"SELECT":for(let l of Array.from(r.options)){let u=Array.isArray(s)?s.includes(l.value):s===l.value;l.selected!==u&&(l.selected=u,u?l.setAttribute("selected",""):l.removeAttribute("selected"))}break}},destroy:(t,e)=>{if(!e[J])return;e.getElement().removeEventListener("input",e[J]),delete e[J]}};var wt={name:"text",update:(t,e,{processExpression:o})=>{let r=e.getElement(),i=e.getModifiers(),c=s=>{i.content?r.textContent!==s&&(r.textContent=s):r.innerText!==s&&(r.innerText=s)},f=o(t,e,e.getValue());e.setData(f),L(f)?Promise.resolve(f).then(s=>{e.getData()===f&&c(s)}):c(f)}};var Rt={name:"watch",update:(t,e,{processExpression:o})=>{let r=e.getValue();o(t,e,r,{},{return:!1})}};var re=class extends W{constructor(e){super();let{prefix:o,root:r}=e=Object.assign({prefix:"d",processor:"execute",root:document.body},e);if(typeof r=="string"&&(e.root=r=document.querySelector(r)),!o||typeof o!="string"||!r||typeof r!="object")return;let i=Symbol("ID_DOARS"),c=!1,f=!1,s,l,u,m=[],g={},p=[We,Xe,Ze,et,rt,ot,st,nt,it,tt],E=[yt,ct,ft,dt,pt,wt,at,mt,gt,xt,Ct,Ot,Rt],y,b,x;this.getId=()=>i,this.getOptions=()=>Object.assign({},e),this.getEnabled=()=>c,this.enable=()=>{if(c)return this;f=!1,s=[],u={},this.dispatchEvent("enabling",[this]),c=!0,y=E.map(h=>h.name),b={};for(let h of E)b[h.name]=h;x=new RegExp("^"+o+"-("+y.join("|")+")(?:[$-_.a-z0-9]{0,})?$","i"),l=new MutationObserver(w.bind(this)),l.observe(r,{attributes:!0,childList:!0,subtree:!0});let n=o+"-state",a=o+"-ignore",d=[...r.querySelectorAll("["+n+"]")];for(let h=d.length-1;h>=0;h--)d[h].closest("["+a+"]")&&d.splice(h,1);return N(r.hasAttribute(n)&&!r.hasAttribute(a)?r:null,...d),this.dispatchEvent("enabled",[this]),this.dispatchEvent("updated",[this]),this},this.disable=()=>c?(l.disconnect(),l=null,f=s=u=null,this.dispatchEvent("disabling",[this],{reverse:!0}),D(...m),y=b=x=null,c=!1,this.dispatchEvent("disabled",[this],{reverse:!0}),this):this;let N=(...n)=>{let a=[],d=[];for(let h of n){if(!h||h[S])continue;let v=new le(this,h);m.push(v),a.push(v),d.push(h)}d.length>0&&this.dispatchEvent("components-added",[this,d]);for(let h of a)h.initialize();for(let h of a)h.updateAttributes(h.getAttributes());return a},D=(...n)=>{let a=[];for(let d of n){let h=m.indexOf(d);h<0||(a.push(d.getElement()),d.destroy(),m.splice(h,1))}return a.length>0&&this.dispatchEvent("components-removed",[this,a]),a};this.getSimpleContexts=()=>Object.assign({},g),this.setSimpleContext=(n,a=null)=>a===null?(delete g[n],this.dispatchEvent("simple-context-removed",[this,n]),!0):n.match("^([a-zA-Z_$][a-zA-Z\\d_$]*)$")?(g[n]=a,this.dispatchEvent("simple-context-added",[this,n,a]),!0):!1,this.setSimpleContexts=n=>{let a={};for(let d in n)Object.hasOwnProperty.call(n,d)&&(a[d]=this.setSimpleContext(d,n[d]));return a},this.getContexts=()=>[...p],this.addContexts=(n,...a)=>{if(c)return;n<0?n=p.length+n%p.length:n>p.length&&(n=p.length);let d=[];for(let h=0;h<a.length;h++){let v=a[h];p.includes(v)||(p.splice(n+h,0,v),d.push(v))}return d.length>0&&this.dispatchEvent("contexts-added",[this,d]),d},this.removeContexts=(...n)=>{if(c)return;let a=[];for(let d of n){let h=p.indexOf(d);h<0||(p.slice(h,1),a.push(d))}return a.length>0&&this.dispatchEvent("contexts-removed",[this,a]),a},this.getDirectives=()=>[...E],this.getDirectivesNames=()=>[...y],this.getDirectivesObject=()=>Object.assign({},b),this.isDirectiveName=n=>x.test(n),this.addDirectives=(n,...a)=>{if(c)return;n<0?n=E.length+n%E.length:n>E.length&&(n=E.length);let d=[];for(let h=0;h<a.length;h++){let v=a[h];E.includes(v)||(E.splice(n+h,0,v),d.push(v))}return d.length>0&&(y=b=x=null,this.dispatchEvent("directives-added",[this,d])),d},this.removeDirectives=(...n)=>{if(c)return;let a=[];for(let d of n){let h=E.indexOf(d);h<0||(E.slice(h,1),a.push(d))}return a.length>0&&(y=b=x=null,this.dispatchEvent("directives-removed",[this,a])),a},this.update=n=>{if(c){if(n)for(let a of n){let{id:d,path:h}=a;if(!(d in u)){u[d]=[h];continue}u[d].includes(h)||u[d].push(h)}if(!f&&Object.getOwnPropertySymbols(u).length!==0){this.dispatchEvent("updating",[this]),f=!0,n=u,u={};for(let a of m)a.update(n);if(f=!1,Object.getOwnPropertySymbols(u).length>0){window.requestAnimationFrame(()=>this.update());return}if(s.length>0){w();return}this.dispatchEvent("updated",[this])}}};let w=n=>{if(s.push(...n),f||s.length===0)return;f=!0,n=[...s],s=[];let a=o+"-state",d=o+"-ignore",h=[],v=[],O=C=>{if(C.nodeType===1)if(C[S]){v.unshift(C[S]);let R=C.querySelectorAll(a);for(let T of R)T[S]&&v.unshift(T)}else{let R=te(C,T=>T[S]?(v.unshift(T[S]),!1):!0);do if(C[U])for(let T of C[U])T.getComponent().removeAttribute(T);while(C=R())}},k=C=>{if(C.nodeType!==1||C.closest("["+d+"]"))return;let T=C.querySelectorAll("["+a+"]");for(let F of T)F.closest("["+d+"]")||h.push(F);if(C.hasAttribute(a)){h.push(C);return}let B=V(C);if(B){let F=B.scanAttributes(C);B.updateAttributes(F)}};for(let C of n)if(C.type==="childList"){for(let R of C.removedNodes)O(R);for(let R of C.addedNodes)k(R)}else if(C.type==="attributes"){let R=C.target;if(C.attributeName===a){if(R[S])continue;let G=V(R);if(G){let Ke=R,Mt=te(R,Se=>Se.hasAttribute(a));do for(let Se of Ke[U])G.removeAttribute(Se);while(Ke=Mt())}N(R);continue}else if(C.attributeName===d){if(R.hasAttribute(d)){O(R);continue}k(R);continue}if(!x.test(C.attributeName))continue;let T=V(R);if(!T)continue;let B=null;for(let G of R[U])if(G.getName()===C.attributeName){B=G;break}let F=R.getAttribute(C.attributeName);if(!B){F&&T.addAttribute(R,C.attributeName,F);continue}B.setValue(F),T.updateAttribute(B)}if(v.length>0&&D(...v),h.length>0&&N(...h),f=!1,s.length>0){w();return}Object.getOwnPropertySymbols(u).length>0&&this.update()}}};var zt=[9,10,13,32],$e=40,ue=41,Ce=44,K=46,It=58,Be=63,Fe=91,Ve=93,Dt=125,Tt=["=","||=","&&=","??=","*=","**=","/=","%=","+=","-="],de={"=":1,"||=":1,"&&=":1,"??=":1,"*=":1,"**=":1,"/=":1,"%=":1,"+=":1,"-=":1,"||":2,"&&":3,"??":4,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,"*":11,"/":11,"%":11,"+":11,"-":11},Gt=["-","!","+"],Ne="--",Oe="++",St={true:!0,false:!1,null:null,undefined:void 0},oe=t=>t>=48&&t<=57,Ye=t=>se(t)||oe(t),se=t=>t===36||t>=48&&t<=57||t===95||t>=65&&t<=90||t>=97&&t<=122,Lt=t=>{let e=0,o=()=>(e++,{type:5,elements:r(Ve)}),r=n=>{let a=[],d=!1,h=0;for(;e<t.length;){p();let v=t.charCodeAt(e);if(v===n){if(d=!0,e++,n===ue&&h&&h>=a.length)throw new Error("Unexpected token "+String.fromCharCode(n));break}else if(v===Ce){if(e++,h++,h!==a.length){if(n===ue)throw new Error("Unexpected token ,");if(n===Ve)for(let O=a.length;O<h;O++)a.push(null)}}else{if(a.length!==h&&h!==0)throw new Error("Expected comma");{let O=f();if(!O)throw new Error("Expected comma");a.push(O)}}}if(!d)throw new Error("Expected "+String.fromCharCode(n));return a},i=()=>{let n=b();if(!n)return n;let a=c();if(!a)return n;let d={value:a,precedence:de[a]||0},h=b();if(!h)throw new Error("Expected expression after "+a);let v=[n,d,h],O;for(;a=c();){let C=de[a]||0;if(C===0){e-=a.length;break}d={value:a,precedence:C};let R=a;for(;v.length>2&&v[v.length-2]>C;)h=v.pop(),a=v.pop().value,n=v.pop(),O={type:Tt.indexOf(a)>=0?6:7,operator:a,left:n,right:h},v.push(O);if(O=b(),!O)throw new Error("Expected expression after "+R);v.push(d,O)}let k=v.length-1;for(O=v[k];k>1;)a=v[k-1].value,O={type:Tt.indexOf(a)>=0?6:7,operator:a,left:v[k-2],right:O},k-=2;return O},c=()=>{p();let n=t.substring(e,e+3),a=n.length;for(;a>0;){if(Object.prototype.hasOwnProperty.call(de,n)&&(!se(t.charCodeAt(e))||e+n.length<t.length&&!Ye(t.charCodeAt(e+n.length))))return e+=a,n;n=n.substring(0,--a)}return!1},f=()=>{let n=i();return p(),n=y(n),n},s=n=>{let a=[];for(;e<t.length;){let d=t.charCodeAt(e);if(d===59||d===Ce)e++;else{let h=f();if(h)a.push(h);else if(e<t.length){if(d===n)break;throw new Error('Unexpected "'+t.charAt(e)+'"')}}}return a},l=()=>{let n=t.charCodeAt(e),a=e;if(se(n))e++;else throw new Error("Unexpected "+t.charAt(e));for(;e<t.length&&(n=t.charCodeAt(e),Ye(n));)e++;return{type:2,name:t.slice(a,e)}},u=()=>{let n="";for(;oe(t.charCodeAt(e));)n+=t.charAt(e++);if(t.charCodeAt(e)===K)for(n+=t.charAt(e++);oe(t.charCodeAt(e));)n+=t.charAt(e++);let a=t.charAt(e);if(a==="e"||a==="E"){for(n+=t.charAt(e++),a=t.charAt(e),(a==="+"||a==="-")&&(n+=t.charAt(e++));oe(t.charCodeAt(e));)n+=t.charAt(e++);if(!oe(t.charCodeAt(e-1)))throw new Error("Expected exponent ("+n+t.charAt(e)+")")}let d=t.charCodeAt(e);if(se(d))throw new Error("Variable names cannot start with a number ("+n+t.charAt(e)+")");if(d===K||n.length===1&&n.charCodeAt(0)===K)throw new Error("Unexpected period");return{type:3,value:parseFloat(n)}},m=()=>{if(t.charCodeAt(e)!==123)return;e++;let n=[];for(;!isNaN(t.charCodeAt(e));){if(p(),t.charCodeAt(e)===Dt)return e++,x({type:11,properties:n});let a=b();if(!a)throw new Error("Missing }");if(p(),a.type===2&&(t.charCodeAt(e)===Ce||t.charCodeAt(e)===Dt))n.push({type:4,computed:!1,key:a,value:a,shorthand:!0});else if(t.charCodeAt(e)===It){e++,p();let d=f();if(!d)throw new Error("Unexpected object property");let h=a.type===5;n.push({computed:h,key:h?a.elements[0]:a,shorthand:!1,type:4,value:d}),p()}else a&&n.push(a);t.charCodeAt(e)===Ce&&e++}throw new Error("Missing }")},g=()=>{e++;let n=s(ue);if(t.charCodeAt(e)===ue)return e++,n.length===1?n[0]:n.length?{type:12,expressions:n}:!1;throw new Error("Unclosed (")},p=()=>{for(;zt.indexOf(t.charCodeAt(e))>=0;)e++},E=()=>{let n="",a=t.charAt(e++),d=!1;for(;e<t.length;){let h=t.charAt(e++);if(h===a){d=!0;break}if(h==="\\")switch(h=t.charAt(e++),h){case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="	";break;case"b":n+="\b";break;case"f":n+="\f";break;case"v":n+="\v";break;default:n+=h}else n+=h}if(!d)throw new Error('Unclosed quote after "'+n+'"');return{type:3,value:n}},y=n=>{if(!n||t.charCodeAt(e)!==Be)return n;e++;let a=f();if(!a)throw new Error("Expected expression");if(p(),!t.charCodeAt(e)===It)throw new Error("Expected :");e++;let d=f();if(!d)throw new Error("Expected expression");let h={type:9,condition:n,consequent:a,alternate:d};if(n.operator&&de[n.operator]<=1){let v=n;for(;v.right.operator&&de[v.right.operator]<=1;)v=v.right;h.condition=v.right,v.right=h,h=n}return h},b=()=>{let n=m()||N();if(n)return D(n);p();let a=t.charCodeAt(e);if(oe(a)||a===K)return u();if(a===34||a===39)n=E();else if(a===Fe)n=o();else{let d=t.substring(e,e+1),h=d.length;for(;h>0;){if(Gt.indexOf(d)>=0&&(!se(t.charCodeAt(e))||e+d.length<t.length&&!Ye(t.charCodeAt(e+d.length)))){e+=h;let v=b();if(!v)throw new Error("Missing unary operation parameter");return D({type:13,operator:d,parameter:v})}d=d.substr(0,--h)}se(a)?(n=l(),Object.prototype.hasOwnProperty.call(St,n.name)&&(n={type:3,value:St[n.name]})):a===$e&&(n=g())}return D(x(n))},x=n=>{p();let a=t.charCodeAt(e);for(;a===K||a===Fe||a===$e||a===Be;){let d;if(a===Be){if(t.charCodeAt(e+1)!==K)break;d=!0,e+=2,p(),a=t.charCodeAt(e)}if(e++,a===Fe){if(n={type:10,computed:!0,object:n,property:f()},p(),a=t.charCodeAt(e),a!==Ve)throw new Error("Unclosed [");e++}else a===$e?n={type:8,parameters:r(ue),callee:n}:(a===K||d)&&(d&&e--,p(),n={type:10,computed:!1,object:n,property:l()});d&&(n.optional=!0),p(),a=t.charCodeAt(e)}return n},N=()=>{if(e+1>=t.length)return;let n=t.substring(e,e+2),a=null;if(n===Ne)a=Ne;else if(n===Oe)a=Oe;else return;e+=2;let d={type:14,operator:a,parameter:x(l()),prefix:!0};if(!d.parameter||d.parameter.type!==2&&d.parameter.type!==10)throw new Error("Unexpected "+d.operator);return d},D=n=>{if(!n||e+1>=t.length)return n;let a=t.substring(e,e+2),d=null;if(a===Ne)d=Ne;else if(a===Oe)d=Oe;else return n;return e+=2,n={type:14,operator:d,parameter:n,prefix:!1},n},w=s();return w.length===0?void 0:w};var kt=(t,e,o={})=>{switch(t.type){case 2:return o[t.name]=e,e;case 10:let r=I(t.object,o),i=t.computed||t.property.type!==2?I(t.property,o):t.property.name;return typeof e=="function"?e.bind(r):(r[i]=e,e)}throw new Error("Unsupported assignment method.")},I=(t,e={})=>{if(t){if(Array.isArray(t))return t.map(o=>I(o,e));switch(t.type){case 2:return e[t.name];case 3:return t.value;case 5:let o=[];for(let E of t.elements)o.push(I(E,e));return o;case 6:let r=I(t.right,e);if(t.operator!=="="){let E=I(t.left,e);switch(t.operator){case"||=":if(E)return E;break;case"&&=":if(!E)return E;break;case"??=":if(E!=null)return E;break;case"*=":r=E*r;break;case"**=":r=ze(E,r);break;case"/=":r=E/r;break;case"%=":r=E%r;break;case"+=":r=E+r;break;case"-=":r=E-r;break}}return kt(t.left,r,e);case 7:let i=I(t.left,e),c=I(t.right,e);switch(t.operator){case"||":return i||c;case"&&":return i&&c;case"??":return i!=null?i:c;case"==":return i==c;case"!=":return i!=c;case"===":return i===c;case"!==":return i!==c;case"<":return i<c;case">":return i>c;case"<=":return i<=c;case">=":return i>=c;case"-":return i-c;case"+":return i+c;case"*":return i*c;case"/":return i/c;case"%":return i%c}throw new Error("Unsupported operator: "+t.operator);case 8:let f=[];for(let E of t.parameters)f.push(I(E,e));return I(t.callee,e)(...f);case 9:return I(t.condition,e)?I(t.consequent,e):I(t.alternate,e);case 10:let s=I(t.object,e),l=t.computed||t.property.type!==2?I(t.property,e):t.property.name;return typeof s[l]=="function"?s[l].bind(s):s[l];case 11:let u={};for(let E of t.properties)u[E.computed||E.key.type!==2?I(E.key,e):E.key.name]=I(E.value,e);return u;case 12:return t.expressions.map(E=>I(E,e));case 13:let m=I(t.parameter,e);switch(t.operator){case"!":return!m;case"-":return-m;case"+":return+m}throw new Error("Unsupported operator: "+t.operator);case 14:let g=I(t.parameter,e),p=t.operator==="--"?-1:1;return kt(t.parameter,g+p,e),t.prefix?g+p:g}throw new Error('Unexpected node type "'+t.type+'".')}},Pt=I;var Ut=Lt,jt=Pt;var _t=(t,e,o,r=null,i=null)=>{i=Object.assign({return:!0},i);let[c,f]=H(t,e,r),s;try{let l=Ut(o);if(i.return&&l&&l.length>1)throw new Error('Unable to return a single value from a compound expression of: "'+o+'".');s=jt(l,c)}catch(l){s=null}if(f(),i.return&&s)return s=s[0],s};re.interpretExpression=_t;var fs=re;export{fs as default};
//# sourceMappingURL=doars-interpret.min.js.map
