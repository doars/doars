var global,factory;global=this,factory=function(){const e=(n,...s)=>{if(!s.length)return n;const a=s.shift();if(t(n)&&t(a))for(const s in a)t(a[s])?(n[s]||Object.assign(n,{[s]:{}}),e(n[s],a[s])):Array.isArray(a[s])?n[s]=a[s].map((n=>t(n)?e({},n):n)):Object.assign(n,{[s]:a[s]});return e(n,...s)},t=e=>e&&"object"==typeof e&&!Array.isArray(e);return class{constructor(t,n=null){let s,a,i,o;n=e({},n),t.addEventListener("enabling",(()=>{if(n.aliasContexts||n.renameContexts){let e=1;const i=t.getContexts();for(let o=0;o<i.length;o++){const r=i[o];if(n.renameContexts){const e=n.renameContexts[r.name];e&&/^[_$a-z]{1}[_$a-z0-9]{0,}$/i.test(e)&&(a||(a={}),a[e]=r.name,r.name=e)}if(n.aliasContexts){const a=n.aliasContexts[r.name];if(a)if(s||(s=[]),Array.isArray(a)){let n=0;for(const e of a){if(!/^[_$a-z]{1}[_$a-z0-9]{0,}$/i.test(e))continue;const t=Object.assign({},r);t.name=e,t.deconstruct=!1,s.push(t),n++}t.addContexts(o+e,...s.slice(e-1)),e+=n}else if(/^[_$a-z]{1}[_$a-z0-9]{0,}$/i.test(a)){const n=Object.assign({},r);n.name=a,n.deconstruct=!1,t.addContexts(o+e,n),e++}}}}if(n.aliasDirectives||n.renameDirectives){let e=1;const s=t.getDirectives();for(let a=0;a<s.length;a++){const r=s[a];if(n.renameDirectives){const e=n.renameDirectives[r.name];e&&/^[_\-$a-z]{1}[_\-$a-z0-9]{0,}$/i.test(e)&&(o||(o={}),o[e]=r.name,r.name=e)}if(n.aliasDirectives){const s=n.aliasDirectives[r.name];if(s)if(i||(i=[]),Array.isArray(s)){let n=0;for(const e of s){if(!/^[_\-$a-z]{1}[_\-$a-z0-9]{0,}$/i.test(e))continue;const t=Object.assign({},r);t.name=e,i.push(t),n++}t.addDirectives(a+e,...i.slice(e-1)),e+=n}else if(/^[_\-$a-z]{1}[_\-$a-z0-9]{0,}$/i.test(s)){const n=Object.assign({},r);n.name=s,t.addDirectives(a+e,n),e++}}}}})),t.addEventListener("disabling",(()=>{if(i&&(t.removeDirectives(...i),i=null),o){const e=t.getDirectives();for(let t=0;t<e.length;t++){const n=e.length[t];n.name in o&&(n.name=o[n.name])}o=null}if(s&&(t.removeContexts(...s),s=null),a){const e=t.getContexts();for(let t=0;t<e.length;t++){const n=e.length[t];n.name in a&&(n.name=a[n.name])}a=null}}))}}},"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global="undefined"!=typeof globalThis?globalThis:global||self).DoarsAlias=factory();
