(()=>{var m=(o,r,n,e,t)=>({deconstruct:t,name:o,create:(i,l,s,{RevocableProxy:f})=>{let c=(h,v)=>s(r,o+"."+v.join(".")),d=(h,v)=>l.accessed(r,o+"."+v.join(".")),p=(h,v)=>s(r,o+"."+v.join("."));e.addEventListener("delete",c),e.addEventListener("get",d),e.addEventListener("set",p);let u=f(n,{});return{value:u.proxy,destroy:()=>{e.removeEventListener("delete",c),e.removeEventListener("get",d),e.removeEventListener("set",p),u.revoke()}}}});var y=(o,r,n,e)=>m("$store",o,r,n,e);var j=["apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"],L=(o,r)=>{let n=!1,e={};for(let t of j)e[t]=(...i)=>{if(!n)return t in r?r[t](...i):Reflect[t](...i)};return{proxy:new Proxy(o,e),revoke:()=>{n=!0}}};var x=class{constructor(){let r={};this.addEventListener=(n,e,t=null)=>{n in r||(r[n]=[]),r[n].push({callback:e,options:t})},this.removeEventListener=(n,e)=>{if(!Object.keys(r).includes(n))return;let t=r[n],i=-1;for(let l=0;l<t.length;l++)if(t[l].callback===e){i=l;break}i<0||(t.splice(i,1),Object.keys(t).length===0&&delete r[n])},this.removeEventListeners=n=>{n&&delete r[n]},this.removeAllEventListeners=()=>{r={}},this.dispatchEvent=(n,e,t=null)=>{if(!r[n])return;let i=r[n];for(let l=0;l<i.length;l++){let s=t&&t.reverse?i[i.length-(l+1)]:i[l];s.options&&s.options.once&&i.splice(l,1),s.callback(...e)}}}};var a=class extends x{constructor(r={}){super(),r=Object.assign({delete:!0,get:!0,set:!0},r);let n=new WeakMap;this.add=(e,t=[])=>{if(n.has(e))return n.get(e);for(let s in e)e[s]&&typeof e[s]=="object"&&(e[s]=this.add(e[s],[...t,s]));let i={};r.delete&&(i.deleteProperty=(s,f)=>{if(!Reflect.has(s,f))return!0;this.remove(s,f);let c=Reflect.deleteProperty(s,f);return c&&this.dispatchEvent("delete",[s,Array.isArray(s)?[...t]:[...t,f]]),c}),r.get&&(i.get=(s,f,c)=>(f!==Symbol.unscopables&&this.dispatchEvent("get",[s,[...t,f],c]),Reflect.get(s,f,c))),r.set&&(i.set=(s,f,c,d)=>(s[f]===c||(c&&typeof c=="object"&&(c=this.add(c,[...t,f])),s[f]=c,this.dispatchEvent("set",[s,Array.isArray(s)?[...t]:[...t,f],c,d])),!0));let l=L(e,i);return n.set(l,e),l.proxy},this.remove=e=>{if(!n.has(e))return;let t=n.get(e);n.delete(t);for(let i in t.proxy)typeof t.proxy[i]=="object"&&this.remove(t.proxy[i]);t.revoke()}}};var b=(o,...r)=>{if(!r.length)return o;let n=r.shift();if(E(o)&&E(n))for(let e in n)E(n[e])?(o[e]||Object.assign(o,{[e]:{}}),b(o[e],n[e])):Array.isArray(n[e])?o[e]=n[e].map(t=>E(t)?b({},t):t):Object.assign(o,{[e]:n[e]});return b(o,...r)};var E=o=>o&&typeof o=="object"&&!Array.isArray(o);var O=Symbol("ID_STORE");function g(o,r=null,n={}){r=Object.assign({deconstruct:!1},r);let e=!1,t,i,l,s,f=()=>{i=b({},n),l=new a,s=l.add(i),t=y(O,s,l,!!r.deconstruct);let d=o.getContexts(),p=0;for(let u=d.length-1;u>=0;u--)if(d[u].name==="$state"){p=u;break}o.addContexts(p,t)},c=()=>{o.removeContexts(t),s=null,l.remove(i),l=null,i=null,t=null};this.disable=()=>{!o.getEnabled()&&e&&(e=!1,o.removeEventListener("enabling",f),o.removeEventListener("disabling",c))},this.enable=()=>{e||(e=!0,o.addEventListener("enabling",f),o.addEventListener("disabling",c))},this.enable()}window.DoarsStore=g;})();
//# sourceMappingURL=doars-store.iife.min.js.map
