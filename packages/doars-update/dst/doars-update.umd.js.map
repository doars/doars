{"version":3,"file":"doars-update.umd.js","sources":["../src/factories/contexts/createUpdate.js","../src/factories/directives/createUpdate.js","../../utils/src/polyfills/RevocableProxy.js","../../utils/src/events/EventDispatcher.js","../../utils/src/events/ProxyDispatcher.js","../src/Updater.js","../src/DoarsUpdate.js"],"sourcesContent":["export default (updater) => {\n  // Deconstruct updater.\n  const id = updater.getId()\n  const proxy = updater.getProxy()\n  const time = updater.getTime()\n\n  return {\n    name: '$update',\n\n    create: (component, attribute) => {\n      // Create event handlers.\n      const onGet = (target, path) => attribute.accessed(id, path.join('.'))\n\n      // Add event listeners.\n      proxy.addEventListener('get', onGet)\n\n      return {\n        value: time,\n\n        // Remove event listeners.\n        destroy: () => {\n          proxy.removeEventListener('get', onGet)\n        },\n      }\n    },\n  }\n}\n","export default (options) => {\n  // Overwrite default options.\n  options = Object.assign({\n    defaultOrder: 500,\n  }, options)\n\n  // Create list of update directives.\n  const itemIds = []\n  const items = []\n\n  const directive = {\n    name: 'update',\n\n    update: function (component, attribute, { processExpression }) {\n      // Store execute expression locally.\n      if (!this._execute) {\n        this._execute = processExpression\n      }\n\n      // Deconstruct attribute.\n      const id = attribute.getId()\n\n      // Exit early if already in list.\n      if (itemIds.indexOf(id) >= 0) {\n        return\n      }\n\n      // Deconstruct attribute.\n      let { order } = attribute.getModifiers()\n      if (!order) {\n        order = options.defaultOrder\n      }\n\n      // Get index to place item at based on order.\n      let index = 0\n      for (let i = 0; i < items.length; i++) {\n        if (items[i].order >= order) {\n          index = i\n          break\n        }\n      }\n\n      // Add item at index in list.\n      items.splice(index, 0, {\n        attribute: attribute,\n        component: component,\n        order: order,\n      })\n    },\n\n    destroy: (component, attribute) => {\n      // Deconstruct attribute.\n      const id = attribute.getId()\n\n      // Exit early if already in list.\n      const index = itemIds.indexOf(id)\n      if (index >= 0) {\n        return\n      }\n\n      // Remove attribute id from item ids list.\n      itemIds.splice(index, 1)\n\n      // Remove attribute from items list.\n      for (let i = 0; i < items.length; i++) {\n        if (items[i].attribute === attribute) {\n          // Remove item from list.\n          items.splice(i, 1)\n          break\n        }\n      }\n    },\n  }\n\n  return [directive, () => {\n    // Run expression of each item in order.\n    for (const item of items) {\n      directive._execute(item.component, item.attribute.clone(), item.attribute.getValue(), {}, { return: false })\n    }\n  }]\n}\n","// List of methods to revoke access to.\nconst REFLECTION_METHODS = [\n  'apply',\n  'construct',\n  'defineProperty',\n  'deleteProperty',\n  'get',\n  'getOwnPropertyDescriptor',\n  'getPrototypeOf',\n  'isExtensible',\n  'ownKeys',\n  'preventExtensions',\n  'set',\n  'setPrototypeOf',\n]\n\n/**\n * Revocable proxy made using regular a proxy and a simple boolean.\n */\nexport default (target, handler) => {\n  // Keep track of status.\n  let revoked = false\n\n  // Add revocable handlers for each given handlers.\n  const revocableHandler = {}\n  for (const key of REFLECTION_METHODS) {\n    revocableHandler[key] = (...parameters) => {\n      if (revoked) {\n        console.error('illegal operation attempted on a revoked proxy')\n        return\n      }\n\n      if (key in handler) {\n        return handler[key](...parameters)\n      }\n      return Reflect[key](...parameters)\n    }\n  }\n\n  // Return proxy and revoke method.\n  return {\n    proxy: new Proxy(target, revocableHandler),\n    revoke: () => {\n      revoked = true\n    },\n  }\n}\n","class EventDispatcher {\n  /**\n   * Create instance.\n   */\n  constructor() {\n    let events = {}\n\n    /**\n     * Add callback to event.\n     * @param {String} name Event name.\n     * @param {Function} callback Function to call on dispatch.\n     * @param {Object} options Callback options.\n     */\n    this.addEventListener = (name, callback, options = null) => {\n      // Check if event name exits and callback is not already present.\n      if (!(name in events)) {\n        events[name] = []\n      }\n\n      // Add to events.\n      events[name].push({\n        callback: callback,\n        options: options,\n      })\n    }\n\n    /**\n     * Remove callback from event.\n     * @param {String} name Event name.\n     * @param {Function} callback Function that would be called.\n     */\n    this.removeEventListener = (name, callback) => {\n      // Check if event exists.\n      if (!Object.keys(events).includes(name)) {\n        return\n      }\n      const eventData = events[name]\n\n      // Get index of callback in events.\n      let index = -1\n      for (let i = 0; i < eventData.length; i++) {\n        if (eventData[i].callback === callback) {\n          index = i\n          break\n        }\n      }\n      if (index < 0) {\n        return\n      }\n\n      // Remove item from events.\n      eventData.splice(index, 1)\n\n      // Remove event if list is empty.\n      if (Object.keys(eventData).length === 0) {\n        delete events[name]\n      }\n    }\n\n    /**\n     * Remove listeners to an event.\n     * @param {String} name Event name.\n     */\n    this.removeEventListeners = (name) => {\n      if (!name) {\n        return\n      }\n\n      // Remove all handlers with the event name.\n      delete events[name]\n    }\n\n    /**\n     * Remove all listeners.\n     * @param {String} name Event name.\n     */\n    this.removeAllEventListeners = () => {\n      // Remove all listeners.\n      events = {}\n    }\n\n    /**\n     * Trigger event and dispatch data to listeners.\n     * @param {String} name Event name.\n     * @param {Array<Any>} parameters Event parameters to pass through.\n     * @param {Object} options Dispatch options.\n     */\n    this.dispatchEvent = (name, parameters, options = null) => {\n      // Check if event exists.\n      if (!events[name]) {\n        return\n      }\n      // Get events by trigger name.\n      const eventData = events[name]\n\n      // Dispatch a call to each event.\n      for (let i = 0; i < eventData.length; i++) {\n        const event = (options && options.reverse) ? eventData[eventData.length - (i + 1)] : eventData[i]\n\n        // If once is truthy then remove the callback.\n        if (event.options && event.options.once) {\n          eventData.splice(i, 1)\n        }\n\n        // Execute callback.\n        event.callback(...parameters)\n      }\n    }\n  }\n}\n\nexport default EventDispatcher\n","// Import polyfill.\nimport RevocableProxy from '../polyfills/RevocableProxy.js'\n\n// Import event dispatcher.\nimport EventDispatcher from './EventDispatcher.js'\n\nclass ProxyDispatcher extends EventDispatcher {\n  constructor(options = {}) {\n    super()\n\n    options = Object.assign({\n      delete: true,\n      get: true,\n      set: true,\n    }, options)\n\n    // Setup WeakMap for keep track of created proxies.\n    const map = new WeakMap()\n\n    /**\n     * Add object to start keeping track of it.\n     * @param {Object} target Object that is being kept track of.\n     * @param {Array<String>} path Path of object on optional parent object, used for recursion.\n     * @returns {Proxy} Object to access and mutate.\n     */\n    this.add = (target, path = []) => {\n      // Exit early if proxy already exists.\n      if (map.has(target)) {\n        return map.get(target)\n      }\n\n      // Recursively create proxies for each property.\n      for (const key in target) {\n        if (target[key] && typeof (target[key]) === 'object') {\n          target[key] = this.add(target[key], [...path, key])\n        }\n      }\n\n      // Create handler and add the handler for which a callback exits..\n      const handler = {}\n\n      if (options.delete) {\n        handler.deleteProperty = (target, key) => {\n          // Exit early successful if property doesn't exist.\n          if (!Reflect.has(target, key)) {\n            return true\n          }\n\n          // Remove proxy.\n          this.remove(target, key)\n\n          // Delete property.\n          const deleted = Reflect.deleteProperty(target, key)\n\n          // Dispatch delete event.\n          if (deleted) {\n            this.dispatchEvent('delete', [target, Array.isArray(target) ? [...path] : [...path, key]])\n          }\n\n          // Return deleted.\n          return deleted\n        }\n      }\n\n      if (options.get) {\n        handler.get = (target, key, receiver) => {\n          // Dispatch get event.\n          if (key !== Symbol.unscopables) {\n            this.dispatchEvent('get', [target, [...path, key], receiver])\n          }\n\n          // Return value from object.\n          return Reflect.get(target, key, receiver)\n        }\n      }\n\n      if (options.set) {\n        handler.set = (target, key, value, receiver) => {\n          // Exit early if not changed.\n          if (target[key] === value) {\n            return true\n          }\n\n          // Add proxy if value is an object.\n          if (typeof value === 'object') {\n            value = this.add(value, [...path, key])\n          }\n          // Store value.\n          target[key] = value\n\n          // Dispatch set event. If the target is an array and a new item has been pushed then the length has also changed, therefore a more generalizable path will be dispatched.\n          this.dispatchEvent('set', [target, Array.isArray(target) ? [...path] : [...path, key], value, receiver])\n\n          // Return success.\n          return true\n        }\n      }\n\n      // Create proxy.\n      const revocable = RevocableProxy(target, handler)\n\n      // Store target at proxy.\n      map.set(revocable, target)\n\n      // Return proxy.\n      return revocable.proxy\n    }\n\n    /**\n     * Remove object from being kept track of.\n     * @param {Object} target Object that is being kept track of.\n     */\n    this.remove = (target) => {\n      // Remove target from the map.\n      if (!map.has(target)) {\n        return\n      }\n\n      const revocable = map.get(target)\n      map.delete(revocable)\n\n      // Recursively remove properties as well.\n      for (const property in revocable.proxy) {\n        if (typeof (revocable.proxy[property]) === 'object') {\n          this.remove(revocable.proxy[property])\n        }\n      }\n\n      // Revoke proxy.\n      revocable.revoke()\n    }\n  }\n}\n\nexport default ProxyDispatcher\n","// Import proxy dispatcher.\nimport ProxyDispatcher from '@doars/utils/src/events/ProxyDispatcher.js'\n\nexport default class Updater {\n  constructor(options, callback) {\n    // Overwrite default options.\n    options = Object.assign({\n      stepMinimum: 0,\n    }, options)\n\n    // Create id.\n    const id = Symbol('ID_UPDATE')\n\n    // Set private variables.\n    let isEnabled = false, request\n\n    // Setup time proxy.\n    const proxy = new ProxyDispatcher({\n      // We don't care when they are updated, we have a callback for that. They should never be updated by the user anyway.\n      delete: false,\n      set: false,\n    })\n    const time = proxy.add({})\n\n    const update = (timeAbsolute) => {\n      // Exit if not enabled any more.\n      if (!isEnabled) {\n        return\n      }\n\n      // Request to be updated next frame.\n      request = window.requestAnimationFrame(update)\n\n      // Set initial time values.\n      if (!time.startMs) {\n        time.currentMs = time.lastMs = time.startMs = timeAbsolute\n        time.current = time.last = time.start = timeAbsolute / 1000\n        time.delta = time.passed = time.deltaMs = time.passedMs = 0\n\n        // Exit early after initial update.\n        return\n      }\n\n      // Check if minimum time has been elapsed.\n      const deltaMs = timeAbsolute - time.lastMs\n      if (deltaMs <= options.stepMinimum) {\n        return\n      }\n\n      // Update time values.\n      time.lastMs = time.currentMs\n      time.last = time.current\n      time.currentMs = timeAbsolute\n      time.current = timeAbsolute / 1000\n      time.deltaMs = deltaMs\n      time.delta = deltaMs / 1000\n      time.passedMs += deltaMs // Adding the delta could introduce drift because we are not measuring from the start time, hover doing so would case issues if the updater is disabled and later on re-enabled. Due to the high precession the drift will only cause a noticeable effect after a long time, long enough to not cause a problem in most use cases. Long story short, good enough.\n      time.passed = time.passedMs / 1000\n\n      // Invoke callback.\n      callback()\n    }\n\n    /**\n     * Get whether the instance is enabled.\n     * @returns {Bool} Whether the instance is enabled.\n     */\n    this.isEnabled = () => {\n      return isEnabled\n    }\n\n    /**\n     * Get updater id.\n     * @returns {Symbol} Unique identifier.\n     */\n    this.getId = () => {\n      return id\n    }\n\n    /**\n     * Get time proxy.\n     * @returns {ProxyDispatcher} Time proxy.\n     */\n    this.getProxy = () => {\n      return proxy\n    }\n\n    /**\n     * Get time data.\n     * @returns {Proxy} Time data.\n     */\n    this.getTime = () => {\n      return time\n    }\n\n    /**\n     * Enable updater.\n     */\n    this.enable = () => {\n      if (isEnabled) {\n        return\n      }\n      isEnabled = true\n\n      // Start update loop.\n      request = window.requestAnimationFrame(update)\n    }\n\n    /**\n     * Disable updater.\n     */\n    this.disable = () => {\n      if (!isEnabled) {\n        return\n      }\n      isEnabled = false\n\n      // Stop updating.\n      if (request) {\n        cancelAnimationFrame(request)\n        request = null\n      }\n    }\n  }\n}\n","// Import contexts.\nimport createContextUpdate from './factories/contexts/createUpdate.js'\n\n// Import directives.\nimport createDirectiveUpdate from './factories/directives/createUpdate.js'\n\n// Import updater.\nimport Updater from './Updater.js'\n\nexport default class DoarsUpdate {\n  /**\n   * Create plugin instance.\n   * @param {Doars} library Doars instance to add onto.\n   * @param {Object} options The plugin options.\n   */\n  constructor(library, options = null) {\n    options = Object.assign({}, options)\n\n    // Set private variables.\n    let contextUpdate, directiveUpdate, updater\n\n    // Enable plugin when library is enabling.\n    library.addEventListener('enabling', () => {\n      // Create and add directive.\n      const [_directiveUpdate, update] = createDirectiveUpdate(options)\n      directiveUpdate = _directiveUpdate\n      library.addDirectives(-1, directiveUpdate)\n\n      // Setup update loop.\n      updater = new Updater(options, () => {\n        // Update all directives.\n        update()\n\n        // Dispatch update triggers.\n        library.update([{\n          id: updater.getId(),\n          path: 'current',\n        }, {\n          id: updater.getId(),\n          path: 'delta',\n        }, {\n          id: updater.getId(),\n          path: 'last',\n        }, {\n          id: updater.getId(),\n          path: 'passed',\n        }])\n      })\n\n      // Create and add context.\n      contextUpdate = createContextUpdate(updater)\n      library.addContexts(0, contextUpdate)\n\n      // Enable updater.\n      updater.enable()\n    })\n\n    // Disable plugin when library is disabling.\n    library.addEventListener('disabling', () => {\n      // Remove context.\n      library.removeContexts(contextUpdate)\n\n      // Remove directive.\n      library.removeDirectives(directiveUpdate)\n\n      // Disable updater.\n      updater.disable()\n\n      // Reset private variables.\n      contextUpdate = null\n      directiveUpdate = null\n      updater = null\n    })\n  }\n}\n"],"names":["updater","id","getId","proxy","getProxy","time","getTime","name","create","component","attribute","onGet","target","path","accessed","join","addEventListener","value","destroy","removeEventListener","options","Object","assign","defaultOrder","itemIds","items","directive","update","processExpression","_execute","indexOf","getModifiers","order","index","i","length","splice","item","clone","getValue","return","REFLECTION_METHODS","handler","revoked","revocableHandler","key","console","error","Reflect","Proxy","revoke","EventDispatcher","events","callback","push","keys","includes","eventData","removeEventListeners","removeAllEventListeners","dispatchEvent","parameters","event","reverse","once","ProxyDispatcher","delete","get","set","map","WeakMap","add","has","deleteProperty","remove","deleted","Array","isArray","receiver","Symbol","unscopables","revocable","RevocableProxy","property","Updater","stepMinimum","isEnabled","request","timeAbsolute","window","requestAnimationFrame","startMs","currentMs","lastMs","current","last","start","delta","passed","deltaMs","passedMs","enable","disable","cancelAnimationFrame","DoarsUpdate","library","contextUpdate","directiveUpdate","createDirectiveUpdate","_directiveUpdate","addDirectives","createContextUpdate","addContexts","removeContexts","removeDirectives"],"mappings":"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"}