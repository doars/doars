(()=>{var X=({updateContextName:B},z)=>{let F=z.getId(),G=z.getProxy(),L=z.getTime();return{name:B,create:(J,w)=>{let Q=(K,T)=>w.accessed(F,T.join("."));return G.addEventListener("get",Q),{value:L,destroy:()=>{G.removeEventListener("get",Q)}}}}};var Y=({defaultOrder:B,updateDirectiveName:z})=>{let F=[],G=[],L={name:z,update:(J,w,Q)=>{if(!L._execute)L._execute=Q;let K=w.getId();if(F.indexOf(K)>=0)return;let{order:T}=w.getModifiers();if(!T)T=B;let S=0;for(let V=0;V<G.length;V++)if(G[V].order>=T){S=V;break}G.splice(S,0,{attribute:w,component:J,order:T})},destroy:(J,w)=>{let Q=w.getId(),K=F.indexOf(Q);if(K>=0)return;F.splice(K,1);for(let T=0;T<G.length;T++)if(G[T].attribute===w){G.splice(T,1);break}}};return[L,()=>{for(let J of G)L._execute(J.component,J.attribute.clone(),J.attribute.getValue(),{},{return:!1})}]};var H=["apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","has","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"],_=(B,z)=>{let F=!1,G={};for(let L of H)G[L]=(...J)=>{if(F)return;if(L in z)return z[L](...J);return Reflect[L](...J)};return{proxy:new Proxy(B,G),revoke:()=>{F=!0}}};class W{constructor(){let B={};this.addEventListener=(z,F,G=null)=>{if(!(z in B))B[z]=[];B[z].push({callback:F,options:G})},this.removeEventListener=(z,F)=>{if(!Object.keys(B).includes(z))return;let G=B[z],L=-1;for(let J=0;J<G.length;J++)if(G[J].callback===F){L=J;break}if(L<0)return;if(G.splice(L,1),Object.keys(G).length===0)delete B[z]},this.removeEventListeners=(z)=>{if(!z)return;delete B[z]},this.removeAllEventListeners=()=>{B={}},this.dispatchEvent=(z,F,G=null)=>{if(!B[z])return;let L=B[z];for(let J=0;J<L.length;J++){let w=G&&G.reverse?L[L.length-(J+1)]:L[J];if(w.options&&w.options.once)L.splice(J,1);w.callback(...F)}}}}class Z extends W{constructor(B={}){super();B=Object.assign({delete:!0,get:!0,set:!0},B);let z=new WeakMap;this.add=(F,G=[])=>{if(z.has(F))return z.get(F);for(let w in F)if(F[w]&&typeof F[w]==="object")F[w]=this.add(F[w],[...G,w]);let L={};if(B.delete)L.deleteProperty=(w,Q)=>{if(!Reflect.has(w,Q))return!0;this.remove(w,Q);let K=Reflect.deleteProperty(w,Q);if(K)this.dispatchEvent("delete",[w,Array.isArray(w)?[...G]:[...G,Q]]);return K};if(B.get)L.get=(w,Q,K)=>{if(Q!==Symbol.unscopables)this.dispatchEvent("get",[w,[...G,Q],K]);return Reflect.get(w,Q,K)};if(B.set)L.set=(w,Q,K,T)=>{if(w[Q]===K)return!0;if(K&&typeof K==="object")K=this.add(K,[...G,Q]);return w[Q]=K,this.dispatchEvent("set",[w,Array.isArray(w)?[...G]:[...G,Q],K,T]),!0};let J=_(F,L);return z.set(J,F),J.proxy},this.remove=(F)=>{if(!z.has(F))return;let G=z.get(F);z.delete(G);for(let L in G.proxy)if(typeof G.proxy[L]==="object")this.remove(G.proxy[L]);G.revoke()}}}class ${constructor({stepMinimum:B},z){let F=Symbol("ID_UPDATE"),G=!1,L,J=new Z({delete:!1,set:!1}),w=J.add({}),Q=(K)=>{if(!G)return;if(L=window.requestAnimationFrame(Q),!w.startMs){w.currentMs=w.lastMs=w.startMs=K,w.current=w.last=w.start=K/1000,w.delta=w.passed=w.deltaMs=w.passedMs=0;return}let T=K-w.lastMs;if(T<=B)return;w.lastMs=w.currentMs,w.last=w.current,w.currentMs=K,w.current=K/1000,w.deltaMs=T,w.delta=T/1000,w.passedMs+=T,w.passed=w.passedMs/1000,z()};this.isEnabled=()=>{return G},this.getId=()=>{return F},this.getProxy=()=>{return J},this.getTime=()=>{return w},this.enable=()=>{if(G)return;G=!0,L=window.requestAnimationFrame(Q)},this.disable=()=>{if(!G)return;if(G=!1,L)cancelAnimationFrame(L),L=null}}}function C(B,z=null){z=Object.assign({defaultOrder:500,stepMinimum:0,updateContextName:"$update",updateDirectiveName:"update"},z);let F=!1,G=new $(z,()=>{w(),B.update([{id:G.getId(),path:"current"},{id:G.getId(),path:"delta"},{id:G.getId(),path:"last"},{id:G.getId(),path:"passed"}])}),L=X(z,G),[J,w]=Y(z),Q=()=>{B.addContexts(0,L),B.addDirectives(-1,J),G.enable()},K=()=>{B.removeContexts(L),B.removeDirectives(J),G.disable()};this.disable=()=>{if(!B.getEnabled()&&F)F=!1,B.removeEventListener("enabling",Q),B.removeEventListener("disabling",K)},this.enable=()=>{if(!F)F=!0,B.addEventListener("enabling",Q),B.addEventListener("disabling",K)},this.enable()}window.DoarsUpdate=C;})();

//# debugId=EF3F0079EB382ABE64756E2164756E21
