var l=(e,...r)=>{if(!r.length)return e;let n=r.shift();if(i(e)&&i(n))for(let t in n)i(n[t])?(e[t]||Object.assign(e,{[t]:{}}),l(e[t],n[t])):Array.isArray(n[t])?e[t]=n[t].map(a=>i(a)?l({},a):a):Object.assign(e,{[t]:n[t]});return l(e,...r)};var i=e=>e&&typeof e=="object"&&!Array.isArray(e);var s=(e,r)=>{let n;switch(String.prototype.toLowerCase.call(r)){default:break;case"arraybuffer":n=e.arrayBuffer();break;case"blob":n=e.blob();break;case"formdata":n=e.formData();break;case"json":n=e.json();break;case"element":case"html":case"svg":case"text":case"xml":n=e.text();break}return n?n.then(t=>{switch(r){case"element":let a=document.createElement("template");a.innerHTML=t,t=a.content.childNodes[0];break;case"html":t=new DOMParser().parseFromString(t,"text/html");break;case"svg":t=new DOMParser().parseFromString(t,"image/svg+xml");break;case"xml":t=new DOMParser().parseFromString(t,"application/xml");break}return t}):null},o=e=>{switch(String.prototype.toLowerCase(e.headers.get("content-type"))){case"text/html":return"html";case"application/json":case"application/ld+json":case"application/vnd.api+json":return"json";case"image/svg+xml":return"svg";case"text/plain":return"text";case"application/xml":case"text/xml":return"xml"}return null};var f=({fetchOptions:e})=>({name:"$fetch",create:()=>({value:(r,n=null)=>{e&&(n=l({},e,n));let t=n.returnType?n.returnType:null;return delete n.returnType,fetch(r,n).then(a=>(t==="auto"&&a.headers.get("content-type")&&(t=o(a)),t&&(a=s(a,t)),a))}})});function g(e,r=null){r=Object.assign({fetchOptions:{},encodingConverters:{"application/json":()=>{},"application/x-www-form-urlencoded":()=>{},"multipart/formdata":()=>{}}},r),r.defaultInit&&Object.assign(r.fetchOptions,r.defaultInit);let n=!1,t,a=()=>{t=f(r),e.addContexts(0,t)},c=()=>{e.removeContexts(t),t=null};this.disable=()=>{!e.getEnabled()&&n&&(n=!1,e.removeEventListener("enabling",a),e.removeEventListener("disabling",c))},this.enable=()=>{n||(n=!0,e.addEventListener("enabling",a),e.addEventListener("disabling",c))},this.enable()}export{g as default};
//# sourceMappingURL=doars-fetch.min.js.map
