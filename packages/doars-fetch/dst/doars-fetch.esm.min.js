var o=(r,...a)=>{if(!a.length)return r;let t=a.shift();if(c(r)&&c(t))for(let e in t)c(t[e])?(r[e]||Object.assign(r,{[e]:{}}),o(r[e],t[e])):Array.isArray(t[e])?r[e]=t[e].map(n=>c(n)?o({},n):n):Object.assign(r,{[e]:t[e]});return o(r,...a)};var c=r=>r&&typeof r=="object"&&!Array.isArray(r);var l=(r,a)=>{let t;switch(String.prototype.toLowerCase.call(a)){default:console.warn('Unknown response type "'+a+'" used when using the $fetch context.');break;case"arraybuffer":t=r.arrayBuffer();break;case"blob":t=r.blob();break;case"formdata":t=r.formData();break;case"json":t=r.json();break;case"element":case"html":case"svg":case"text":case"xml":t=r.text();break}return t?t.then(e=>{switch(a){case"element":let n=document.createElement("template");n.innerHTML=e,e=n.content.childNodes[0];break;case"html":e=new DOMParser().parseFromString(e,"text/html");break;case"svg":e=new DOMParser().parseFromString(e,"image/svg+xml");break;case"xml":e=new DOMParser().parseFromString(e,"application/xml");break}return e}):null},i=r=>{switch(String.prototype.toLowerCase(r.headers.get("content-type"))){case"text/html":return"html";case"application/json":case"application/ld+json":case"application/vnd.api+json":return"json";case"image/svg+xml":return"svg";case"text/plain":return"text";case"application/xml":case"text/xml":return"xml"}return null};var p=({defaultInit:r})=>({name:"$fetch",create:()=>({value:(a,t=null)=>{r&&(t=o({},r,t));let e=t.returnType?t.returnType:null;return delete t.returnType,fetch(a,t).then(n=>(e==="auto"&&n.headers.get("content-type")&&(e=i(n)),e&&(n=l(n,e)),n))}})});var h=Symbol("FETCH");var m=({defaultInit:r,encodingConverters:a})=>({name:"fetch",update:(t,e,{processExpression:n})=>{}});var s=class{constructor(a,t=null){t=Object.assign({defaultInit:{},encodingConverters:{"application/json":()=>{},"application/x-www-form-urlencoded":()=>{},"multipart/formdata":()=>{}}},t);let e,n;a.addEventListener("enabling",()=>{e=p(t),a.addContexts(0,e),n=m(t),a.addDirectives(-1,n)}),a.addEventListener("disabling",()=>{a.removeContexts(e),e=null,a.removeDirective(n),n=null})}};export{s as default};
//# sourceMappingURL=doars-fetch.esm.min.js.map
