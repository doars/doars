(()=>{var o=(e,...a)=>{if(!a.length)return e;let n=a.shift();if(s(e)&&s(n))for(let t in n)s(n[t])?(e[t]||Object.assign(e,{[t]:{}}),o(e[t],n[t])):Array.isArray(n[t])?e[t]=n[t].map(r=>s(r)?o({},r):r):Object.assign(e,{[t]:n[t]});return o(e,...a)};var s=e=>e&&typeof e=="object"&&!Array.isArray(e);var l=(e,a)=>{let n;switch(String.prototype.toLowerCase.call(a)){default:break;case"arraybuffer":n=e.arrayBuffer();break;case"blob":n=e.blob();break;case"formdata":n=e.formData();break;case"json":n=e.json();break;case"element":case"html":case"svg":case"text":case"xml":n=e.text();break}return n?n.then(t=>{switch(a){case"element":let r=document.createElement("template");r.innerHTML=t,t=r.content.childNodes[0];break;case"html":t=new DOMParser().parseFromString(t,"text/html");break;case"svg":t=new DOMParser().parseFromString(t,"image/svg+xml");break;case"xml":t=new DOMParser().parseFromString(t,"application/xml");break}return t}):null},i=e=>{switch(String.prototype.toLowerCase(e.headers.get("content-type"))){case"text/html":return"html";case"application/json":case"application/ld+json":case"application/vnd.api+json":return"json";case"image/svg+xml":return"svg";case"text/plain":return"text";case"application/xml":case"text/xml":return"xml"}return null};var f=({defaultInit:e})=>({name:"$fetch",create:()=>({value:(a,n=null)=>{e&&(n=o({},e,n));let t=n.returnType?n.returnType:null;return delete n.returnType,fetch(a,n).then(r=>(t==="auto"&&r.headers.get("content-type")&&(t=i(r)),t&&(r=l(r,t)),r))}})});function m(e,a=null){a=Object.assign({defaultInit:{},encodingConverters:{"application/json":()=>{},"application/x-www-form-urlencoded":()=>{},"multipart/formdata":()=>{}}},a);let n=!1,t,r=function(){t=f(a),e.addContexts(0,t)},c=function(){e.removeContexts(t),t=null};this.disable=function(){!e.getEnabled()&&n&&(n=!1,e.removeEventListener("enabling",r),e.removeEventListener("disabling",c))},this.enable=function(){n||(n=!0,e.addEventListener("enabling",r),e.addEventListener("disabling",c))},this.enable()}window.DoarsFetch=m;})();
//# sourceMappingURL=doars-fetch.iife.min.js.map
