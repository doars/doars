(()=>{var P=["apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","has","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"],x=(n,o)=>{let e=!1,r={};for(let t of P)r[t]=(...s)=>{if(!e)return t in o?o[t](...s):Reflect[t](...s)};return{proxy:new Proxy(n,r),revoke:()=>{e=!0}}};var g=class{constructor(){let o={};this.addEventListener=(e,r,t=null)=>{e in o||(o[e]=[]),o[e].push({callback:r,options:t})},this.removeEventListener=(e,r)=>{if(!Object.keys(o).includes(e))return;let t=o[e],s=-1;for(let l=0;l<t.length;l++)if(t[l].callback===r){s=l;break}s<0||(t.splice(s,1),Object.keys(t).length===0&&delete o[e])},this.removeEventListeners=e=>{e&&delete o[e]},this.removeAllEventListeners=()=>{o={}},this.dispatchEvent=(e,r,t=null)=>{if(!o[e])return;let s=o[e];for(let l=0;l<s.length;l++){let i=t&&t.reverse?s[s.length-(l+1)]:s[l];i.options&&i.options.once&&s.splice(l,1),i.callback(...r)}}}};var f=class extends g{constructor(o={}){super(),o=Object.assign({delete:!0,get:!0,set:!0},o);let e=new WeakMap;this.add=(r,t=[])=>{if(e.has(r))return e.get(r);for(let i in r)r[i]&&typeof r[i]=="object"&&(r[i]=this.add(r[i],[...t,i]));let s={};o.delete&&(s.deleteProperty=(i,c)=>{if(!Reflect.has(i,c))return!0;this.remove(i,c);let a=Reflect.deleteProperty(i,c);return a&&this.dispatchEvent("delete",[i,Array.isArray(i)?[...t]:[...t,c]]),a}),o.get&&(s.get=(i,c,a)=>(c!==Symbol.unscopables&&this.dispatchEvent("get",[i,[...t,c],a]),Reflect.get(i,c,a))),o.set&&(s.set=(i,c,a,d)=>(i[c]===a||(a&&typeof a=="object"&&(a=this.add(a,[...t,c])),i[c]=a,this.dispatchEvent("set",[i,Array.isArray(i)?[...t]:[...t,c],a,d])),!0));let l=x(r,s);return e.set(l,r),l.proxy},this.remove=r=>{if(!e.has(r))return;let t=e.get(r);e.delete(t);for(let s in t.proxy)typeof t.proxy[s]=="object"&&this.remove(t.proxy[s]);t.revoke()}}};var b=(n,o,e,r)=>(t,s,l)=>{let i=(v,u)=>l(o,n+"."+u.join(".")),c=(v,u)=>s.accessed(o,n+"."+u.join(".")),a=(v,u)=>l(o,n+"."+u.join("."));r.addEventListener("delete",i),r.addEventListener("get",c),r.addEventListener("set",a);let d=x(e,{});return{value:d.proxy,destroy:()=>{r.removeEventListener("delete",i),r.removeEventListener("get",c),r.removeEventListener("set",a),d.revoke()}}};var m=(n,o,e,r,t)=>({deconstruct:t,name:n,create:b(n,o,e,r)});var p=null,S=()=>(p===null&&(p=Object.fromEntries(document.cookie.split(/; */).map(n=>{let[o,...e]=n.split("=");return[o,decodeURIComponent(e.join("="))]}))),p),h=(n,o="",e=60)=>{if(n=n.trim(),!o||o==="")document.cookie=n+"=; Expires=Thu, 01 Jan 1970 00:00:01 GMT; Path=/; SameSite=Strict;",p!==null&&delete p[n];else{let r="";if(e){let t=new Date;t.setTime(t.getTime()+e*24*60*60*1e3),r="; expires="+t.toUTCString()}document.cookie=n+"="+encodeURIComponent(o)+r+"; Path=/; SameSite=Strict;",S(),p[n]=o}};var E=({cookiesContextDeconstruct:n,cookiesContextName:o})=>{let e=new f,r=(t,s)=>{s.length>1,h(s[0],t[s[0]])};return e.addEventListener("delete",r),e.addEventListener("set",r),m(o,Symbol("ID_COOKIES"),e.add(S()),e,!!n)};var C=()=>{let n={},o=Object.keys(localStorage);for(let e=o.length-1;e>=0;e--)n[o[e]]=localStorage.getItem(o[e]);return n};var L=({localStorageContextDeconstruct:n,localStorageContextName:o})=>{let e=new f;return e.addEventListener("delete",(r,t)=>{t.length>1,localStorage.removeItem(t[0])}),e.addEventListener("set",(r,t)=>{t.length>1,localStorage.setItem(t[0],r[t[0]])}),m(o,Symbol("ID_LOCAL_STORAGE"),e.add(C()),e,!!n)};var y=()=>{let n={},o=Object.keys(sessionStorage);for(let e=o.length-1;e>=0;e--)n[o[e]]=sessionStorage.getItem(o[e]);return n};var j=({sessionStorageContextDeconstruct:n,sessionStorageContextName:o})=>{let e=new f;return e.addEventListener("delete",(r,t)=>{t.length>1,sessionStorage.removeItem(t[0])}),e.addEventListener("set",(r,t)=>{t.length>1,sessionStorage.setItem(t[0],r[t[0]])}),m(o,Symbol("ID_LOCAL_STORAGE"),e.add(y()),e,!!n)};function k(n,o=null){o=Object.assign({cookiesContextDeconstruct:!1,cookiesContextName:"$cookies",localStorageContextDeconstruct:!1,localStorageContextName:"$localStorage",sessionStorageContextDeconstruct:!1,sessionStorageContextName:"$sessionStorage"},o);let e=!1,r,t,s,l=()=>{r=E(o),t=L(o),s=j(o);let c=n.getContexts(),a=0;for(let d=c.length-1;d>=0;d--)if(c[d].name==="$state"){a=d;break}n.addContexts(a,r,t,s)},i=()=>{n.removeContexts(r,t,s),r=null,t=null,s=null};this.disable=()=>{!n.getEnabled()&&e&&(e=!1,n.removeEventListener("enabling",l),n.removeEventListener("disabling",i))},this.enable=()=>{e||(e=!0,n.addEventListener("enabling",l),n.addEventListener("disabling",i))},this.enable()}window.DoarsPersist=k;})();
//# sourceMappingURL=doars-persist.iife.min.js.map
