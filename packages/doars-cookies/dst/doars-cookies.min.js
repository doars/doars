var b=(i,o,n,t,e)=>({deconstruct:e,name:i,create:(s,l,r,{RevocableProxy:d})=>{let c=(m,a)=>r(o,i+"."+a.join(".")),f=(m,a)=>l.accessed(o,i+"."+a.join(".")),u=(m,a)=>r(o,i+"."+a.join("."));t.addEventListener("delete",c),t.addEventListener("get",f),t.addEventListener("set",u);let v=d(n,{});return{value:v.proxy,destroy:()=>{t.removeEventListener("delete",c),t.removeEventListener("get",f),t.removeEventListener("set",u),v.revoke()}}}});var L=(i,o,n,t)=>b("$cookies",i,o,n,t);var j=["apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"],g=(i,o)=>{let n=!1,t={};for(let e of j)t[e]=(...s)=>{if(!n)return e in o?o[e](...s):Reflect[e](...s)};return{proxy:new Proxy(i,t),revoke:()=>{n=!0}}};var E=class{constructor(){let o={};this.addEventListener=(n,t,e=null)=>{n in o||(o[n]=[]),o[n].push({callback:t,options:e})},this.removeEventListener=(n,t)=>{if(!Object.keys(o).includes(n))return;let e=o[n],s=-1;for(let l=0;l<e.length;l++)if(e[l].callback===t){s=l;break}s<0||(e.splice(s,1),Object.keys(e).length===0&&delete o[n])},this.removeEventListeners=n=>{n&&delete o[n]},this.removeAllEventListeners=()=>{o={}},this.dispatchEvent=(n,t,e=null)=>{if(!o[n])return;let s=o[n];for(let l=0;l<s.length;l++){let r=e&&e.reverse?s[s.length-(l+1)]:s[l];r.options&&r.options.once&&s.splice(l,1),r.callback(...t)}}}};var x=class extends E{constructor(o={}){super(),o=Object.assign({delete:!0,get:!0,set:!0},o);let n=new WeakMap;this.add=(t,e=[])=>{if(n.has(t))return n.get(t);for(let r in t)t[r]&&typeof t[r]=="object"&&(t[r]=this.add(t[r],[...e,r]));let s={};o.delete&&(s.deleteProperty=(r,d)=>{if(!Reflect.has(r,d))return!0;this.remove(r,d);let c=Reflect.deleteProperty(r,d);return c&&this.dispatchEvent("delete",[r,Array.isArray(r)?[...e]:[...e,d]]),c}),o.get&&(s.get=(r,d,c)=>(d!==Symbol.unscopables&&this.dispatchEvent("get",[r,[...e,d],c]),Reflect.get(r,d,c))),o.set&&(s.set=(r,d,c,f)=>(r[d]===c||(c&&typeof c=="object"&&(c=this.add(c,[...e,d])),r[d]=c,this.dispatchEvent("set",[r,Array.isArray(r)?[...e]:[...e,d],c,f])),!0));let l=g(t,s);return n.set(l,t),l.proxy},this.remove=t=>{if(!n.has(t))return;let e=n.get(t);n.delete(e);for(let s in e.proxy)typeof e.proxy[s]=="object"&&this.remove(e.proxy[s]);e.revoke()}}};var p=null,h=()=>(p===null&&(p=Object.fromEntries(document.cookie.split(/; */).map(i=>{let[o,...n]=i.split("=");return[o,decodeURIComponent(n.join("="))]}))),p),y=(i,o="",n=60)=>{if(i=i.trim(),!o||o==="")document.cookie=i+"=; Expires=Thu, 01 Jan 1970 00:00:01 GMT; Path=/; SameSite=Strict;",p!==null&&delete p[i];else{let t="";if(n){let e=new Date;e.setTime(e.getTime()+n*24*60*60*1e3),t="; expires="+e.toUTCString()}document.cookie=i+"="+encodeURIComponent(o)+t+"; Path=/; SameSite=Strict;",h(),p[i]=o}};var k=Symbol("ID_COOKIES");function _(i,o=null){o=Object.assign({deconstruct:!1},o);let n=!1,t,e,s,l,r=(f,u)=>{u.length>1,y(u[0],f[u[0]])},d=()=>{e=h(),s=new x,l=s.add(e),s.addEventListener("delete",r),s.addEventListener("set",r),t=L(k,l,s,!!o.deconstruct);let f=i.getContexts(),u=0;for(let v=f.length-1;v>=0;v--)if(f[v].name==="$state"){u=v;break}i.addContexts(u,t)},c=()=>{i.removeContexts(t),s.removeEventListener("delete",r),s.removeEventListener("set",r),l=null,s.remove(e),s=null,e=null,t=null};this.disable=()=>{!i.getEnabled()&&n&&(n=!1,i.removeEventListener("enabling",d),i.removeEventListener("disabling",c))},this.enable=()=>{n||(n=!0,i.addEventListener("enabling",d),i.addEventListener("disabling",c))},this.enable()}export{_ as default};
//# sourceMappingURL=doars-cookies.min.js.map
