var z=Symbol("INTERSECT"),P={NONE:0,BUFFER:1,DEBOUNCE:2,THROTTLE:5,DELAY:6},w=({intersectDirectiveName:H},A)=>({name:H,update:(L,q,B)=>{let J=q.getElement(),K=q.getKey(),V=q.getValue();if(q[z]){if(q[z].value===V)return;if(A.remove(J,q[z].handler),q[z].timeout)clearTimeout(q[z].timeout);delete q[z]}let G=q.getModifiers(),Q=P.NONE;if(G.buffer){if(Q=P.BUFFER,G.buffer===!0)G.buffer=5}else if(G.debounce){if(Q=P.DEBOUNCE,G.debounce===!0)G.debounce=500}else if(G.throttle){if(Q=P.THROTTLE,G.throttle===!0)G.throttle=500}else if(G.delay){if(Q=P.DELAY,G.delay===!0)G.delay=500}let $=(W)=>{if(q[z].isIntersecting===W.isIntersecting)return;if(q[z].isIntersecting=W.isIntersecting,K==="enter"&&!W.isIntersecting||K==="leave"&&W.isIntersecting){if(q[z].timeout)clearTimeout(q[z].timeout),q[z].timeout=null;return}let Y=()=>{B(L,q.clone(),V,{$event:W},{return:!1}),q[z].buffer=[]};if(q[z].buffer.push(W),Q===P.BUFFER){if(q[z].buffer.length<G.buffer)return;Y()}else if(Q===P.BUFFER){if(q[z].timeout)clearTimeout(q[z].timeout),q[z].timeout=null;q[z].timeout=setTimeout(Y,G.debounce)}else if(Q===P.THROTTLE){let j=window.performance.now();if(q[z].lastExecution&&j-q[z].lastExecution<G.throttle)return;Y(),q[z].lastExecution=j}else if(P.DELAY)q[z].timeout=setTimeout(Y,G.delay);else Y()};A.add(J,$),q[z]={buffer:[],handler:$,isIntersecting:!1,timeout:q[z]?q[z].timeout:null,value:V}},destroy:(L,q)=>{if(!q[z])return;let B=q.getElement();if(A.remove(B,q[z].handler),q[z].timeout)clearTimeout(q[z].timeout);delete q[z]}});class Z{constructor(H=null){let A=new WeakMap,L=(B)=>{for(let J of B)for(let K of A.get(J.target))K(J)},q=new window.IntersectionObserver(L,H);this.add=(B,J)=>{if(!A.has(B))A.set(B,[]);A.get(B).push(J),q.observe(B)},this.remove=(B,J)=>{if(!A.has(B))return;let K=A.get(B),V=K.indexOf(J);if(V>=0)K.splice(V,1);if(K.length===0)A.delete(B),q.unobserve(B)}}}function g(H,A=null){A=Object.assign({intersectDirectiveName:"intersect",intersectionRoot:null,intersectionMargin:"0px",intersectionThreshold:0},A);let L=!1,q=new Z({root:A.intersectionRoot?A.intersectionRoot:H.getOptions().root,rootMargin:A.intersectionMargin,threshold:A.intersectionThreshold}),B=w(A,q),J=()=>{H.addDirectives(-1,B)},K=()=>{H.removeDirectives(B)};this.disable=()=>{if(!H.getEnabled()&&L)L=!1,H.removeEventListener("enabling",J),H.removeEventListener("disabling",K)},this.enable=()=>{if(!L)L=!0,H.addEventListener("enabling",J),H.addEventListener("disabling",K)},this.enable()}export{g as default};

//# debugId=08A7C2FF6853C55064756E2164756E21
