(()=>{var n=Symbol("VIEW");var d={NONE:0,BUFFER:1,DEBOUNCE:2,THROTTLE:3},T=t=>({name:"intersect",update:(c,e,{processExpression:f})=>{let l=e.getElement(),s=e.getKey(),i=e.getValue();if(e[n]){if(e[n].value===i)return;t.remove(l,e[n].handler),e[n].timeout&&clearTimeout(e[n].timeout),delete e[n]}let o=e.getModifiers(),r=d.NONE;o.buffer?(r=d.BUFFER,o.buffer===!0&&(o.buffer=5)):o.debounce?(r=d.DEBOUNCE,o.debounce===!0&&(o.debounce=500)):o.throttle&&(r=d.THROTTLE,o.throttle===!0&&(o.throttle=500));let g=m=>{if(!(e[n].isIntersecting!==m.isIntersecting))return;if(e[n].isIntersecting=m.isIntersecting,s==="enter"&&!m.isIntersecting||s==="leave"&&m.isIntersecting){e[n].timeout&&(clearTimeout(e[n].timeout),e[n].timeout=null);return}let E=()=>{f(c,e.clone(),i,{$event:m},{return:!1}),e[n].buffer=[]};if(e[n].buffer.push(m),r===d.BUFFER){if(e[n].buffer.length<o.buffer)return;E()}else if(r===d.BUFFER)e[n].timeout&&(clearTimeout(e[n].timeout),e[n].timeout=null),e[n].timeout=setTimeout(E,o.debounce);else if(r===d.THROTTLE){let h=window.performance.now();if(e[n].lastExecution&&h-e[n].lastExecution<o.throttle)return;E(),e[n].lastExecution=h}else E()};t.add(l,g),e[n]={buffer:[],handler:g,isIntersecting:!1,timeout:e[n]?e[n].timeout:null,value:i}},destroy:(c,e)=>{if(!e[n])return;let f=e.getElement();t.remove(f,e[n].handler),e[n].timeout&&clearTimeout(e[n].timeout),delete e[n]}});var u=class{constructor(c=null){c=Object.assign({root:null,rootMargin:"0px",threshold:0},c);let e=new WeakMap,f=s=>{for(let i of s)for(let o of e.get(i.target))o(i)},l=new u(f,c);this.add=(s,i)=>{e.has(s)||e.set(s,[]),e.get(s).push(i),l.observe(s)},this.remove=(s,i)=>{if(!e.has(s))return;let o=e.get(s),r=o.indexOf(i);r>=0&&o.splice(r,1),o.length===0&&(e.delete(s),l.unobserve(s))}}};function a(t,c=null){c=Object.assign({},c);let e=!1,f,l,s=function(){let o=Object.assign({},c);o.root||(o.root=t.getOptions().root),l=new u(c),f=T(l),t.addDirectives(-1,f)},i=function(){t.removeDirectives(f),f=null,l=null};this.disable=function(){!t.getEnabled()&&e&&(e=!1,t.removeEventListener("enabling",s),t.removeEventListener("disabling",i))},this.enable=function(){e||(e=!0,t.addEventListener("enabling",s),t.addEventListener("disabling",i))},this.enable()}window.DoarsIntersect=a;})();
//# sourceMappingURL=doars-intersect.iife.min.js.map
