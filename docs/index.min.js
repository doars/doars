var R=Symbol("ATTRIBUTES"),T=Symbol("COMPONENT"),z=Symbol("FOR"),j=Symbol("INITIALIZED"),E=Symbol("ON"),L=Symbol("REFERENCES"),K=Symbol("REFERENCES_CACHE"),B=Symbol("SYNC");var de=class{constructor(){let e={};this.addEventListener=(r,t,o=null)=>{r in e||(e[r]=[]),e[r].push({callback:t,options:o})},this.removeEventListener=(r,t)=>{if(!Object.keys(e).includes(r))return;let o=e[r],i=-1;for(let l=0;l<o.length;l++)if(o[l].callback===t){i=l;break}i<0||(o.splice(i,1),Object.keys(o).length===0&&delete e[r])},this.removeEventListeners=r=>{r&&delete e[r]},this.removeAllEventListeners=()=>{e={}},this.dispatchEvent=(r,t,o=null)=>{if(!e[r])return;let i=e[r];for(let l=0;l<i.length;l++){let n=o&&o.reverse?i[i.length-(l+1)]:i[l];n.options&&n.options.once&&i.splice(l,1),n.callback(...t)}}}},q=de;var W=s=>s.replace(/\\/g,"\\\\").replace(/\\'/g,"\\'").replace(/\\"/g,'\\"').replace(/\n/g,"\\n"),ot=s=>s.replace(/-(\w)/g,(e,r)=>r.toUpperCase()),Ee=s=>{let e={};for(let r of s){let t=r.indexOf("-");if(t<0){e[r]=!0;continue}if(t===0){e[r.substring(1)]=!1;continue}let o=r.substring(0,t),i=r.substring(t+1),l=i,n;if(i.endsWith("ms")?l=i.substring(-2):i.endsWith("s")?(n="s",l=i.substring(-1)):i.endsWith("m")?(n="m",l=i.substring(-1)):i.endsWith("h")&&(n="h",l=i.substring(-1)),l=Number.parseInt(l),!isNaN(l))switch(i=l,n){case"h":i*=60;case"m":i*=60;case"s":i*=1e3;break}e[o]=i}return e},xe=(s,e)=>{if(e=e.match(new RegExp("^"+s+"-([a-z][0-9a-z-]{1,}):?([a-z][0-9a-z-]*)?(\\..*]*)?$","i")),!e)return;let[r,t,o,i]=e;o=o!==""?o:null;let l=o?ot(o):null;return i=i?i.substring(1).split("."):[],[t,o,l,i]},be=s=>{let e=s.match(/^([$_a-z0-9,(){}\s]{1,}?)\s+(?:in|of)\s+([\s\S]{1,})$/i);if(!e)return;let r=e[1].replace(/^[\s({]*|[)}\s]*$/g,"");if(r=r.match(/^([$_a-z0-9]{1,})?(?:,\s+?)?([$_a-z0-9]{1,})?(?:,\s+)?([$_a-z0-9]{1,})?$/i),!!r)return r.shift(),{iterable:e[2].trim(),variables:[...r]}},X=s=>{if(typeof s=="string"&&(s=s.split(/(?=\.)|(?=#)|(?=\[)/)),!Array.isArray(s))return;let e={};for(let r of s)switch(r=r.trim(),r[0]){case"#":e.id=r.substring(1);break;case".":r=r.substring(1),e.class||(e.class=[]),e.class.includes(r)||e.class.push(r);break;case"[":let[t,o,i]=r.match(/^(?:\[)?([-$_.a-z0-9]{1,})(?:[$*^])?(?:=)?([\s\S]{0,})(?:\])$/i);e[o]=i;break}return e};var G=class s extends q{constructor(e,r,t,o,i=!1){super();let l=Symbol("ID_ATTRIBUTE");i||(r[R]||(r[R]=[]),r[R].push(this));let n={},c=null,a,u,d,p,y;if(t){let[v,x,b,D]=xe(e.getLibrary().getOptions().prefix,t);a=v,u=b,d=x,p=D,D&&(y=Ee(D))}this.getComponent=()=>e,this.getElement=()=>r,this.getId=()=>l,this.getDirective=()=>a,this.getKey=()=>u,this.getKeyRaw=()=>d,this.getModifiers=()=>Object.assign({},y),this.getModifiersRaw=()=>p,this.getName=()=>t,this.getValue=()=>o,this.setValue=v=>{o=v,this.dispatchEvent("changed",[this])},this.clearData=()=>{c=null},this.hasData=()=>c!==null,this.getData=()=>c,this.setData=v=>{c=v},this.destroy=()=>{this.setData(null),this.clearAccessed();let v=r[R].indexOf(this);v>=0&&r[R].splice(v,1),this.dispatchEvent("destroyed",[this]),this.removeAllEventListeners()},this.accessed=(v,x)=>{if(!n[v])n[v]=[];else if(n[v].includes(x))return;n[v].push(x),this.dispatchEvent("accessed",[this,v,x])},this.clearAccessed=()=>{n={}},this.hasAccessed=(v,x)=>{if(!(v in n))return!1;let b=n[v];for(let D of x)if(b.includes(D))return!0;return!1},this.clone=()=>new s(e,r,t,o,!0)}};var it=["apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"],J=(s,e)=>{let r=!1,t={};for(let o of it)t[o]=(...i)=>{if(!r)return o in e?e[o](...i):Reflect[o](...i)};return{proxy:new Proxy(s,t),revoke:()=>{r=!0}}};var pe=class extends q{constructor(e={}){super(),e=Object.assign({delete:!0,get:!0,set:!0},e);let r=new WeakMap;this.add=(t,o=[])=>{if(r.has(t))return r.get(t);for(let n in t)t[n]&&typeof t[n]=="object"&&(t[n]=this.add(t[n],[...o,n]));let i={};e.delete&&(i.deleteProperty=(n,c)=>{if(!Reflect.has(n,c))return!0;this.remove(n,c);let a=Reflect.deleteProperty(n,c);return a&&this.dispatchEvent("delete",[n,Array.isArray(n)?[...o]:[...o,c]]),a}),e.get&&(i.get=(n,c,a)=>(c!==Symbol.unscopables&&this.dispatchEvent("get",[n,[...o,c],a]),Reflect.get(n,c,a))),e.set&&(i.set=(n,c,a,u)=>(n[c]===a||(a&&typeof a=="object"&&(a=this.add(a,[...o,c])),n[c]=a,this.dispatchEvent("set",[n,Array.isArray(n)?[...o]:[...o,c],a,u])),!0));let l=J(t,i);return r.set(l,t),l.proxy},this.remove=t=>{if(!r.has(t))return;let o=r.get(t);r.delete(o);for(let i in o.proxy)typeof o.proxy[i]=="object"&&this.remove(o.proxy[i]);o.revoke()}}},Ae=pe;var U=s=>{if(s.parentElement)return s=s.parentElement,s[T]?s[T]:U(s)};var oe=(s,e)=>{for(let r in e){if(r==="class"){for(let t of e.class)s.classList.add(t);continue}s.setAttribute(r,e[r])}};var M=(s,e)=>{for(let r in e){if(r==="class"){for(let t of e.class)s.classList.remove(t);continue}e[r]&&s.attributes[r]!==e[r]||s.removeAttribute(r)}},me=(s,e,r)=>{if(e==="value"&&s.tagName==="INPUT"){if(r||(r=""),s.getAttribute(e)===r)return;s.setAttribute(e,r);return}if(e==="checked"&&(s.type==="checkbox"||s.type==="radio")){s.checked=!!r;return}e==="class"&&(Array.isArray(r)?r=r.join(" "):typeof r=="object"&&(r=Object.entries(r).filter(([t,o])=>o).map(([t])=>t).join(" "))),e==="style"&&(Array.isArray(r)?r=r.join(" "):typeof r=="object"&&(r=Object.entries(r).map(([t,o])=>t+":"+o).join(";"))),r===!1||r===null||r===void 0?s.removeAttribute(e):s.setAttribute(e,r)},he=(s,e)=>{for(let r in e)me(s,r,e[r])};var ct="-transition:",ie=(s,e,r,t=null)=>{if(r.nodeType!==1){t&&t();return}let{prefix:o}=e.getLibrary().getOptions(),i=o+ct+s,l=y=>{r.dispatchEvent(new CustomEvent("transition-"+y)),r.dispatchEvent(new CustomEvent("transition-"+s+"-"+y))},n,c,a,u,d=!1,p={};return n=i,c=r.getAttribute(n),c&&(p.during=X(c),oe(r,p.during)),n=i+".from",c=r.getAttribute(n),c&&(p.from=X(c),oe(r,p.from)),l("start"),u=requestAnimationFrame(()=>{if(u=null,d)return;if(p.from&&(M(r,p.from),p.from=void 0),n=i+".to",c=r.getAttribute(n),c)p.to=X(c),oe(r,p.to);else if(!p.during){l("end"),t&&t(),d=!0;return}let y=getComputedStyle(r),v=Number(y.transitionDuration.replace(/,.*/,"").replace("s",""))*1e3;v===0&&(v=Number(y.animationDuration.replace("s",""))*1e3),a=setTimeout(()=>{a=null,!d&&(p.during&&(M(r,p.during),p.during=void 0),p.to&&(M(r,p.to),p.to=void 0),l("end"),t&&t(),d=!0)},v)}),()=>{d&&(d=!0,p.during&&(M(r,p.during),p.during=void 0),p.from?(M(r,p.from),p.from=void 0):p.to&&(M(r,p.to),p.to=void 0),u?(cancelAnimationFrame(u),u=null):a&&(clearTimeout(a),a=null),l("end"),t&&t())}},ce=(s,e,r)=>ie("in",s,e,r),Q=(s,e,r)=>ie("out",s,e,r);var ee=(s,e)=>{s.nextSibling?s.parentNode.insertBefore(e,s.nextSibling):s.parentNode.appendChild(e)};var Y=(s,e)=>{let r=-1,t=null;return()=>{if(r>=0&&t){let i=t();if(i)return i}let o=null;do{if(r++,r>=s.childElementCount)return null;o=s.children[r]}while(!e(o));return o.childElementCount&&(t=Y(o,e)),o}};var te=class{constructor(e,r){var k,N;let t=Symbol("ID_COMPONENT"),{prefix:o,processor:i}=e.getOptions(),l=typeof i,n;l==="function"?n=i:l==="string"&&e.constructor[i+"Expression"]?n=e.constructor[i+"Expression"]:n=(N=(k=e.constructor.executeExpression)!=null?k:e.constructor.interpretExpression)!=null?N:e.constructor.callExpression;let c=Object.freeze({processExpression:n,transition:ie,transitionIn:ce,transitionOut:Q}),a=[],u=!1,d=!1,p,y,v;if(!r.attributes[o+"-state"])return;r[T]=this;let x=[],b=U(r);b&&(b.getChildren().includes(this)||(b.getChildren().push(this),e.update([{id:b.getId(),path:"children"}]))),this.getAttributes=()=>a,this.getChildren=()=>x,this.getElement=()=>r,this.getId=()=>t,this.getLibrary=()=>e,this.getParent=()=>b,this.getProxy=()=>y,this.getState=()=>v,this.setParent=f=>{b=f},this.initialize=()=>{if(d)return;d=!0;let f=o+"-state",m=r.attributes[f].value;if(p=m?n(this,new G(this,r,null,m),m):{},p===null)p={};else if(typeof p!="object"||Array.isArray(p))return;y=new Ae,v=y.add(p),this.scanAttributes(r)},this.destroy=()=>{if(!d)return;if(a.length>0){let m=e.getDirectivesObject();for(let h in m)m[h].destroy||(m[h]=void 0);for(let h of a){let g=m[h.getKey()];g&&g.destroy(this,h,c),h.destroy()}}delete r[T],a=[],d=!1,y.remove(p),v=null,y=null,p=null;let f=[];if(x.length>0){for(let m of x)m.setParent(b),f.push({id:m.getId(),path:"parent"});f.push({id:t,path:"children"})}b&&(x.length>0&&(b.getChildren().push(...x),f.push({id:b.getId(),path:"children"})),f.push({id:t,path:"parent"})),f.length>0&&e.update(f),D("destroyed",{element:r,id:t})},this.addAttribute=(f,m,h)=>{let g=e.getDirectivesNames(),O=new G(this,f,m,h),I=O.length,_=g.indexOf(O.getDirective());for(let A=a.length-1;A>=0;A--)if(g.indexOf(a[A].getDirective())<=_){I=A+1;break}return a.splice(I,0,O),O},this.removeAttribute=f=>{let m=a.indexOf(f);if(m<0)return;let g=e.getDirectivesObject[f.getKey()];g&&g.destroy&&g.destroy(this,f,c),a.splice(m,1),f.destroy()},this.scanAttributes=f=>{let m=o+"-state",h=o+"-ignore",g=[],O=Y(f,I=>!I.hasAttribute(m)&&!I.hasAttribute(h));do for(let{name:I,value:_}of f.attributes)e.isDirectiveName(I)&&g.push(this.addAttribute(f,I,_));while(f=O());return g},this.updateAttribute=f=>{if(!f.getElement()||f.getValue()===null||f.getValue()===void 0){this.removeAttribute(f);return}let m=e.getDirectivesObject();f.clearAccessed();let h=m[f.getDirective()];h&&h.update(this,f,c)},this.updateAttributes=f=>{if(!d||f.length<=0){u||(u=!0,D("updated",{attributes:f,element:r,id:t}));return}for(let m of f)this.updateAttribute(m);u=!0,D("updated",{attributes:f,element:r,id:t})},this.update=f=>{if(!d)return;let m=Object.getOwnPropertySymbols(f),h=[];for(let g of a)for(let O of m)g.hasAccessed(O,f[O])&&(this.updateAttribute(g),h.push(g));(!u||h.length>0)&&(u=!0,D("updated",{attributes:h,element:r,id:t}))};let D=(f,m)=>{r.dispatchEvent(new CustomEvent(o+"-"+f,{detail:m,bubbles:!0}))}}};var De={name:"$children",create:(s,e,r,{createContextsProxy:t,RevocableProxy:o})=>{let i,l=o(s.getChildren(),{get:(n,c,a)=>{if(i||(i=n.map(d=>t(d,e,r)),e.accessed(s.getId(),"children")),isNaN(c))return Reflect.get(i,c,a);let u=Reflect.get(i,c,a);if(u)return u.contexts}});return{value:l.proxy,destroy:()=>{i&&i.forEach(n=>n.destroy()),l.revoke()}}}};var Oe={name:"$component",create:s=>({value:s.getElement()})};var Ne={name:"$element",create:(s,e)=>({value:e.getElement()})};var Ce={name:"$dispatch",create:s=>({value:(e,r={})=>{s.getElement().dispatchEvent(new CustomEvent(e,{detail:r,bubbles:!0}))}})};var we={deconstruct:!0,name:"$for",create:(s,e,r,{RevocableProxy:t})=>{if(s!==e.getComponent())return;let o=e.getElement(),i=s.getElement(),l=[],n={};for(;o&&!o.isSameNode(i);){let a=o[z];if(a){l.push(a);for(let u in a.variables)n[u]=a.variables[u]}o=o.parentNode}if(l.length===0)return;let c=t(n,{get:(a,u)=>{for(let d of l)if(u in d.variables)return e.accessed(d.id,"$for"),d.variables[u]}});return{value:c.proxy,destroy:()=>{c.revoke()}}}};var Te={name:"$inContext",create:(s,e,r,{createContexts:t})=>({value:o=>{let i=[],l=(u,d)=>{i.push({id:u,path:d})},{contexts:n,destroy:c}=t(s,e,l,{}),a=o(n);return c(),i.length>0&&s.getLibrary().update(i),a}})};var Se={name:"$nextTick",create:(s,e,r,{createContexts:t})=>{let o,i=!1,l=()=>{if(i)return;i=!0;let n=s.getLibrary();o=[];let c=()=>{a();let{contexts:u,destroy:d}=t(s,e,r,{});for(let p of o)p(u);d()},a=()=>{n.removeEventListener("updated",c),e.removeEventListener("changed",a),e.removeEventListener("destroyed",a)};n.addEventListener("updated",c),e.addEventListener("changed",a),e.addEventListener("destroyed",a)};return{value:n=>{l(),o.push(n)}}}};var ke={name:"$parent",create:(s,e,r,{createContextsProxy:t})=>{let o=s.getParent();if(!o)return{key:"$parent",value:null};let{contexts:i,destroy:l}=t(o,e,r);return{value:i,destroy:l}}};var Le={name:"$references",create:(s,e,r,{RevocableProxy:t})=>{if(!s[L])return{key:"$references",value:[]};let o=s[K];if(!o){let l=s[L],n=Object.getOwnPropertySymbols(l);o={};for(let c of n){let{element:a,name:u}=l[c];o[u]=a}s[K]=o}let i=t(o,{get:(l,n,c)=>(e.accessed(s.getId(),"$references."+n),Reflect.get(l,n,c))});return{value:i.proxy,destroy:()=>{i.revoke()}}}};var Ie={deconstruct:!0,name:"$state",create:(s,e,r,{RevocableProxy:t})=>{let o=s.getProxy(),i=s.getState();if(!o||!i)return;let l=(u,d)=>r(s.getId(),"$state."+d.join(".")),n=(u,d)=>e.accessed(s.getId(),"$state."+d.join(".")),c=(u,d)=>r(s.getId(),"$state."+d.join("."));o.addEventListener("delete",l),o.addEventListener("get",n),o.addEventListener("set",c);let a=t(i,{});return{value:a.proxy,destroy:()=>{o.removeEventListener("delete",l),o.removeEventListener("get",n),o.removeEventListener("set",c),a.revoke()}}}};var Yt=Function.prototype.toString.call(Function).replace("Function","Promise").replace(/\(.*\)/,"()");var S=s=>s&&Object.prototype.toString.call(s)==="[object Promise]";var Re={name:"attribute",update:(s,e,{processExpression:r})=>{let t=e.getElement(),o=e.getModifiers(),i=n=>{if(o.selector){if(typeof n!="string")return;n=X(n),he(t,n);return}let c=e.getKeyRaw();if(!c){typeof n=="object"&&!Array.isArray(n)&&he(t,n);return}me(t,c,n)},l=r(s,e,e.getValue());e.setData(l),S(l)?Promise.resolve(l).then(n=>{e.getData()===l&&i(n)}):i(l)}};var Pe={name:"cloak",update:function(s,e,{transitionIn:r}){let t=e.getElement();t.removeAttribute(s.getLibrary().getOptions().prefix+"-"+this.name),r(s,t)}};var le=(s,...e)=>{let r={};for(let t=0;t<e.length&&!(t>=s.length);t++)r[s[t]]=e[t];return r},je=(s,e,r=-1)=>(r++,r>=s.length?-1:s[r][z].value===e?r:je(s,e,r)),ae=(s,e,r,t,o,i,l)=>{let n=je(t,i,o);if(n>=0){if(n===o+1)return;let u=t[n];ee(t[o]?t[o]:r,u),e(u[z].id);return}let c=document.importNode(r.content,!0),a=o===-1?r:t[o];ee(a,c),c=a.nextElementSibling,ce(s,c),c[z]={id:Symbol("ID_FOR"),value:i,variables:l},t.splice(o+1,0,c)},ge=(s,e,r)=>{if(!(e.length<r))for(let t=e.length-1;t>=r;t--){let o=e[t];e.splice(t,1),Q(s,o,()=>{o.remove()})}},$e={name:"for",update:(s,e,{processExpression:r})=>{let t=e.getElement();if(t.tagName!=="TEMPLATE")return;let o=be(e.getValue());if(!o)return;let i={},l=u=>{i[u]||(i[u]=["$for"])},n=u=>{let d=e.getData(),p=d.elements?d.elements:[],y=typeof u;if(u!=null)if(y==="number"){for(let v=0;v<u;v++){let x=le(o.variables,v);ae(s,l,t,p,v-1,u,x)}ge(s,p,u)}else if(y==="string"){for(let v=0;v<u.length;v++){let x=u[v],b=le(o.variables,x,v);ae(s,l,t,p,v-1,x,b)}ge(s,p,u.length)}else{let v,x;try{let b=[...u];v=!0,x=b.length}catch(b){}if(v)for(let b=0;b<x;b++){let D=u[b],k=le(o.variables,D,b);ae(s,l,t,p,b-1,D,k)}else{let b=Object.keys(u);x=b.length;for(let D=0;D<x;D++){let k=b[D],N=u[k],f=le(o.variables,k,N,D);ae(s,l,t,p,D-1,N,f)}}ge(s,p,x)}Object.getOwnPropertySymbols(i).length>0&&s.update(i),e.setData(Object.assign({},d,{elements:p}))},c;isNaN(o.iterable)?c=r(s,e,o.iterable):c=Number(o.iterable);let a=e.getData();e.setData(Object.assign({},a,{result:c})),S(c)?Promise.resolve(c).then(u=>{e.getData().result===c&&n(u)}):n(c)},destroy:(s,e)=>{let r=e.getData();if(r.elements)for(let t of r.elements)Q(s,t,()=>{t.remove()})}};var lt={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"'},at=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g;var Fe=s=>typeof s!="string"?s:s.replaceAll(at,e=>lt[e]);var Ve={name:"html",update:(s,e,{processExpression:r})=>{let t=e.getElement(),o=e.getModifiers(),i=n=>{if(o.decode&&typeof n=="string"&&(n=Fe(n)),n instanceof HTMLElement){for(let c of t.children)c.remove();t.appendChild(n.cloneNode(!0));return}if(typeof n=="string"){t.innerHTML!==n&&(t.innerHTML=n);return}},l=r(s,e,e.getValue());e.setData(l),S(l)?Promise.resolve(l).then(n=>{e.getData()===l&&i(n)}):i(l)}};var Ue={name:"if",update:(s,e,{processExpression:r,transitionIn:t,transitionOut:o})=>{let i=e.getElement();if(i.tagName!=="TEMPLATE"||i.childCount>1)return;let l=a=>{let u=e.getData(),d=u.element,p=u.transition;a?d||(p&&p(),d=document.importNode(i.content,!0),ee(i,d),d=i.nextElementSibling,p=t(s,d)):d&&(p&&p(),p=o(s,d,()=>{d.remove()})),e.setData(Object.assign({},u,{element:d,transition:p}))},n=r(s,e,e.getValue()),c=e.getData();e.setData(Object.assign({},c,{result:n})),S(n)?Promise.resolve(n).then(a=>{e.getData().result===a&&l(a)}):l(n)},destroy:(s,e,{transitionOut:r})=>{let t=e.getData();t.element&&r(s,t.element,()=>{t.element.remove()})}};var Me=(s,e)=>{if(!e[j])return;let r=s.getElement(),t=s.getLibrary().getOptions().prefix+"-updated";r.removeEventListener(t,e[j].handler),delete e[j]},_e={name:"initialized",update:(s,e,{processExpression:r})=>{let t=s.getElement(),o=e.getValue(),i=s.getLibrary().getOptions().prefix+"-updated";if(e[j]){if(e[j].value===o)return;t.removeEventListener(i,e[j].handler),delete e[j]}let l=({detail:n})=>{n.element===t&&(r(s,e.clone(),o,{},{return:!1}),Me(s,e))};t.addEventListener(i,l,{once:!0}),e[j]={handler:l,value:o}},destroy:Me};var re={keydown:"keyup",mousedown:"mouseup",pointerdown:"pointerup"},P={NONE:0,BUFFER:1,DEBOUNCE:2,HELD:3,HOLD:4,THROTTLE:5},ft=["alt","ctrl","meta","shift"],He={name:"on",update:(s,e,{processExpression:r})=>{let t=e.getKeyRaw();if(!t)return;let o;t.startsWith("keydown-")?(o=t.substring(8).toLowerCase(),t="keydown"):t.startsWith("keyup-")&&(o=t.substring(6).toLowerCase(),t="keyup");let i=e.getElement(),l=e.getValue();if(e[E]){if(e[E].value===l)return;e[E].target.removeEventListener(t,e[E].handler),e[E].timeout&&clearTimeout(e[E].timeout),delete e[E]}let n=e.getModifiers(),c={};n.capture&&(c.capture=!0),n.once&&(c.once=!0),n.passive&&(c.passive=!0);let a=P.NONE;n.buffer?(a=P.BUFFER,n.buffer===!0&&(n.buffer=5)):n.debounce?(a=P.DEBOUNCE,n.debounce===!0&&(n.debounce=500)):n.held?(a=P.HELD,n.held===!0&&(n.held=500)):n.hold?(a=P.HOLD,n.hold===!0&&(n.hold=500)):n.throttle&&(a=P.THROTTLE,n.throttle===!0&&(n.throttle=500));let u=[];if(o){n.meta=n.meta?!0:n.cmd||n.super;for(let y of ft)n[y]&&u.push(y)}let d=i;n.document||n.outside?d=document:n.window&&(d=window);let p=y=>{if(e[E].prevent||!n.repeat&&y.repeat||n.self&&y.target!==i||n.outside&&i.contains(y.target))return;if((t==="keydown"||t==="keyup")&&o){for(let b of u)if(!y[b+"Key"])return;let x=n.code?y.code:y.key;if(x===" "&&(x="space"),x=x.toLowerCase(),x!==o)return}n.prevent&&y.preventDefault(),n.stop&&y.stopPropagation();let v=()=>{r(s,e.clone(),l,{$event:y,$events:e[E].buffer},{return:!1}),e[E].buffer=[]};switch(e[E].buffer.push(y),a){case P.BUFFER:if(e[E].buffer.length<n.buffer)return;v();return;case P.DEBOUNCE:e[E].timeout&&(clearTimeout(e[E].timeout),e[E].timeout=null),e[E].timeout=setTimeout(v,n.debounce);return;case P.HELD:if(!(t in re))return;let x=re[t],b=window.performance.now();e[E].cancel=N=>{if(window.performance.now()-b<n.held){e[E].prevent=!1;return}if(x==="keyup"&&o){for(let m of u)if(!N[m+"Key"]){e[E].prevent=!1;return}let f=n.code?N.code:N.key;if(f===" "&&(f="space"),f=f.toLowerCase(),f!==o){e[E].prevent=!1;return}}if(n.self&&N.target!==i){e[E].prevent=!1;return}if(n.outside&&i.contains(N.target)){e[E].prevent=!1;return}v()},e[E].prevent=!0,d.addEventListener(x,e[E].cancel,{once:!0});return;case P.HOLD:if(!(t in re))return;let D=re[t];e[E].cancel=N=>{if(D==="keyup"&&o){let f=!1;for(let h of u)N[h+"Key"]||(f=!0);let m=n.code?N.code:N.key;if(m===" "&&(m="space"),m=m.toLowerCase(),m===o&&(f=!0),!f){e[E].prevent=!1;return}}if(n.self&&N.target!==i){e[E].prevent=!1;return}if(n.outside&&i.contains(N.target)){e[E].prevent=!1;return}clearTimeout(e[E].timeout)},d.addEventListener(D,e[E].cancel,{once:!0}),e[E].prevent=!0,e[E].timeout=setTimeout(()=>{d.removeEventListener(D,e[E].cancel),e[E].prevent=!1,v()},n.hold);return;case P.THROTTLE:let k=window.performance.now();if(e[E].lastExecution&&k-e[E].lastExecution<n.throttle)return;v(),e[E].lastExecution=k;return}v()};d.addEventListener(t,p,c),e[E]={buffer:[],handler:p,target:d,timeout:e[E]?e[E].timeout:void 0,value:l,prevent:!1}},destroy:(s,e)=>{if(!e[E])return;let r=e.getKeyRaw();e[E].target.removeEventListener(r,e[E].handler),e[E].cancel&&e[E].target.removeEventListener(re[r],e[E].cancel),e[E].timeout&&clearTimeout(e[E].timeout),delete e[E]}};var ze=(s,e)=>{if(!s[L])return;let r=e.getId();if(!s[L][r])return;let t=s.getLibrary(),o=s.getId(),i=e.getValue().trim();delete s[L][r],delete s[K],Object.keys(s[L]).length===0&&delete s[L],t.update([{id:o,path:"$references."+i}])},Ke={name:"reference",update:(s,e)=>{let r=e.getValue().trim();if(!/^[_$a-z]{1}[_\-$a-z0-9]{0,}$/i.test(r)){ze(s,e);return}let t=s.getLibrary(),o=s.getId(),i=e.getElement(),l=e.getId();s[L]||(s[L]={}),s[L][l]={element:i,name:r},delete s[K],t.update([{id:o,path:"$references."+r}])},destroy:ze};var Be="SELECT",fe="checked",qe="selected",We="checkbox",Xe={name:"select",update:(s,e,{processExpression:r})=>{let t=e.getElement(),o=t.getAttribute("type");if(t.tagName!==Be&&!(t.tagName==="INPUT"&&(o===We||o==="radio")))return;let i=n=>{if(t.tagName===Be)for(let c of Array.from(t.options)){let a=Array.isArray(n)?n.includes(c.value):n===c.value;c.selected!==a&&(c.selected=a,a?c.setAttribute(qe,""):c.removeAttribute(qe))}else if(o===We){let c=n.includes(t.value);t.checked!==c&&(c?t.setAttribute(fe,""):t.removeAttribute(fe))}else{let c=n===t.value;t.checked!==c&&(c?t.setAttribute(fe,""):t.removeAttribute(fe))}},l=r(s,e,e.getValue());e.setData(l),S(l)?Promise.resolve(l).then(n=>{e.getData()===l&&i(n)}):i(l)}};var Ge={name:"show",update:(s,e,{processExpression:r,transitionIn:t,transitionOut:o})=>{let i=e.getElement(),l=()=>{let a=e.getData();a.transition&&a.transition();let u;a.result?(i.style.display=null,u=t(s,i)):u=o(s,i,()=>{i.style.display="none"}),e.setData(Object.assign({},a,{transition:u}))},n=r(s,e,e.getValue()),c=e.getData();S(n)?(e.setData(Object.assign({},c,{result:n})),Promise.resolve(n).then(a=>{e.getData().result===n&&l(a)})):(!c||c.result!==n)&&(e.setData(Object.assign({},c,{result:n})),l())}};var Ye=()=>({createContexts:se,createContextsProxy:ut,RevocableProxy:J}),se=(s,e,r,t=null)=>{let o=s.getLibrary(),i=o.getSimpleContexts(),l=[],n="",c="",a=o.getContexts(),u=[];for(let d of a){if(!d||!d.name)continue;let p=d.create(s,e,r,Ye());!p||!p.value||(p.destroy&&typeof p.destroy=="function"&&u.push(p.destroy),d.deconstruct&&typeof p.value=="object"&&(l.push(d.name),c+="with("+d.name+") { ",n+=" }"),i[d.name]=p.value)}if(typeof t=="object")for(let d in t)i[d]=t[d];return{contexts:i,destroy:()=>{for(let d of u)d(Ye())},after:n,before:c,deconstructed:l}},ut=(s,e,r,t=null)=>{let o=null,i=J({},{get:(l,n)=>{if(o||(o=se(s,e,r,t)),n in o.contexts)return e.accessed(s.getId(),n),o.contexts[n];if(o.contexts.$state&&n in o.contexts.$state)return e.accessed(s.getId(),"$state"),o.contexts.$state[n]}});return{contexts:i.proxy,destroy:()=>{o&&o.destroy&&o.destroy(s,e),i.revoke()}}},ne=(s,e,r=null)=>{let t=[],o=(n,c)=>{t.push({id:n,path:c})},{contexts:i,destroy:l}=se(s,e,o,r);return[i,()=>{l(),t.length>0&&s.getLibrary().update(t)}]};var ve=(s,e)=>{let r=s,t=0;for(;t<e.length-1;t++)r=r[e[t]];return r[e[t]]};var $=(s,e,r)=>{if(typeof s!="object")return;let t=0;for(;t<e.length-1;t++)if(s=s[e[t]],typeof s!="object")return;s[e[t]]=r};var Ze={name:"sync",update:(s,e,{processExpression:r})=>{let t=e.getElement(),o=!e[B];if(o&&!(t.tagName==="DIV"&&t.hasAttribute("contenteditable"))&&t.tagName!=="INPUT"&&t.tagName!=="SELECT"&&t.tagName!=="TEXTAREA")return;let i=e.getValue().trim(),l=e.getKey();if(l&&(i="$"+l+"."+i),!/^[_$a-z]{1}[._$a-z0-9]{0,}$/i.test(i))return;if(i=i.split("."),o){let c;switch(t.tagName){case"DIV":c=()=>{let[a,u]=ne(s,e.clone());$(a,i,W(t.innerText)),u()};break;case"INPUT":c=()=>{let a=e.clone(),u=W(t.value),[d,p]=ne(s,a);if(t.type==="checkbox"){let y=ve(d,i);if(t.checked)y||$(d,i,[u]),y.includes(t.value)||y.push(u);else if(y){let v=y.indexOf(t.value);v>=0&&y.splice(v,1)}}else if(t.type==="radio"){let y=ve(d,i);t.checked?y!==t.value&&$(d,i,u):y===t.value&&$(d,i,null)}else $(d,i,u);p()};break;case"TEXTAREA":c=()=>{let[a,u]=ne(s,e.clone());$(a,i,W(t.innerText)),u()};break;case"SELECT":c=()=>{let[a,u]=ne(s,e.clone());if(t.multiple){let d=[];for(let p of t.selectedOptions)d.push(W(p.value));$(a,i,[d.join("','")])}else $(a,i,W(t.selectedOptions[0].value));u()};break}t.addEventListener("input",c),e[B]=c}let n=r(s,e,i);switch(t.tagName){case"DIV":case"TEXTAREA":n!==t.innerText&&(t.innerText=n);break;case"INPUT":if(t.type==="checkbox"){let c=n.includes(t.value);t.checked!==c&&(t.checked=c,c?t.setAttribute("checked",""):t.removeAttribute("checked"))}else if(t.type==="radio"){let c=n===t.value;t.checked!==c&&(t.checked=c,c?t.setAttribute("checked",""):t.removeAttribute("checked"))}else n!==t.value&&t.setAttribute("value",n);break;case"SELECT":for(let c of Array.from(t.options)){let a=Array.isArray(n)?n.includes(c.value):n===c.value;c.selected!==a&&(c.selected=a,a?c.setAttribute("selected",""):c.removeAttribute("selected"))}break}},destroy:(s,e)=>{if(!e[B])return;e.getElement().removeEventListener("input",e[B]),delete e[B]}};var Je={name:"text",update:(s,e,{processExpression:r})=>{let t=e.getElement(),o=e.getModifiers(),i=n=>{o.content?t.textContent!==n&&(t.textContent=n):t.innerText!==n&&(t.innerText=n)},l=r(s,e,e.getValue());e.setData(l),S(l)?Promise.resolve(l).then(n=>{e.getData()===l&&i(n)}):i(l)}};var Qe={name:"watch",update:(s,e,{processExpression:r})=>{let t=e.getValue();r(s,e,t,{},{return:!1})}};var Z=class extends q{constructor(e){super();let{prefix:r,root:t}=e=Object.assign({prefix:"d",processor:"execute",root:document.body},e);if(typeof t=="string"&&(e.root=t=document.querySelector(t)),!r||typeof r!="string"||!t||typeof t!="object")return;let o=Symbol("ID_DOARS"),i=!1,l=!1,n,c,a,u=[],d={},p=[De,Oe,Ne,Ce,Te,Se,ke,Le,Ie,we],y=[Ke,Re,$e,Ve,Ue,Je,Pe,_e,He,Xe,Ge,Ze,Qe],v,x,b;this.getId=()=>o,this.getOptions=()=>Object.assign({},e),this.getEnabled=()=>i,this.enable=()=>{if(i)return this;l=!1,n=[],a={},this.dispatchEvent("enabling",[this]),i=!0,v=y.map(g=>g.name),x={};for(let g of y)x[g.name]=g;b=new RegExp("^"+r+"-("+v.join("|")+")(?:[$-_.a-z0-9]{0,})?$","i"),c=new MutationObserver(N.bind(this)),c.observe(t,{attributes:!0,childList:!0,subtree:!0});let f=r+"-state",m=r+"-ignore",h=[...t.querySelectorAll("["+f+"]")];for(let g=h.length-1;g>=0;g--)h[g].closest("["+m+"]")&&h.splice(g,1);return D(t.hasAttribute(f)&&!t.hasAttribute(m)?t:null,...h),this.dispatchEvent("enabled",[this]),this.dispatchEvent("updated",[this]),this},this.disable=()=>i?(c.disconnect(),c=null,l=n=a=null,this.dispatchEvent("disabling",[this],{reverse:!0}),k(...u),v=x=b=null,i=!1,this.dispatchEvent("disabled",[this],{reverse:!0}),this):this;let D=(...f)=>{let m=[],h=[];for(let g of f){if(!g||g[T])continue;let O=new te(this,g);u.push(O),m.push(O),h.push(g)}h.length>0&&this.dispatchEvent("components-added",[this,h]);for(let g of m)g.initialize();for(let g of m)g.updateAttributes(g.getAttributes());return m},k=(...f)=>{let m=[];for(let h of f){let g=u.indexOf(h);g<0||(m.push(h.getElement()),h.destroy(),u.splice(g,1))}return m.length>0&&this.dispatchEvent("components-removed",[this,m]),m};this.getSimpleContexts=()=>Object.assign({},d),this.setSimpleContext=(f,m=null)=>m===null?(delete d[f],this.dispatchEvent("simple-context-removed",[this,f]),!0):f.match("^([a-zA-Z_$][a-zA-Z\\d_$]*)$")?(d[f]=m,this.dispatchEvent("simple-context-added",[this,f,m]),!0):!1,this.setSimpleContexts=f=>{let m={};for(let h in f)Object.hasOwnProperty.call(f,h)&&(m[h]=this.setSimpleContext(h,f[h]));return m},this.getContexts=()=>[...p],this.addContexts=(f,...m)=>{if(i)return;f<0?f=p.length+f%p.length:f>p.length&&(f=p.length);let h=[];for(let g=0;g<m.length;g++){let O=m[g];p.includes(O)||(p.splice(f+g,0,O),h.push(O))}return h.length>0&&this.dispatchEvent("contexts-added",[this,h]),h},this.removeContexts=(...f)=>{if(i)return;let m=[];for(let h of f){let g=p.indexOf(h);g<0||(p.slice(g,1),m.push(h))}return m.length>0&&this.dispatchEvent("contexts-removed",[this,m]),m},this.getDirectives=()=>[...y],this.getDirectivesNames=()=>[...v],this.getDirectivesObject=()=>Object.assign({},x),this.isDirectiveName=f=>b.test(f),this.addDirectives=(f,...m)=>{if(i)return;f<0?f=y.length+f%y.length:f>y.length&&(f=y.length);let h=[];for(let g=0;g<m.length;g++){let O=m[g];y.includes(O)||(y.splice(f+g,0,O),h.push(O))}return h.length>0&&(v=x=b=null,this.dispatchEvent("directives-added",[this,h])),h},this.removeDirectives=(...f)=>{if(i)return;let m=[];for(let h of f){let g=y.indexOf(h);g<0||(y.slice(g,1),m.push(h))}return m.length>0&&(v=x=b=null,this.dispatchEvent("directives-removed",[this,m])),m},this.update=f=>{if(i){if(f)for(let m of f){let{id:h,path:g}=m;if(!(h in a)){a[h]=[g];continue}a[h].includes(g)||a[h].push(g)}if(!l&&Object.getOwnPropertySymbols(a).length!==0){this.dispatchEvent("updating",[this]),l=!0,f=a,a={};for(let m of u)m.update(f);if(l=!1,Object.getOwnPropertySymbols(a).length>0){window.requestAnimationFrame(()=>this.update());return}if(n.length>0){N();return}this.dispatchEvent("updated",[this])}}};let N=f=>{if(n.push(...f),l||n.length===0)return;l=!0,f=[...n],n=[];let m=r+"-state",h=r+"-ignore",g=[],O=[],I=A=>{if(A.nodeType===1)if(A[T]){O.unshift(A[T]);let C=A.querySelectorAll(m);for(let w of C)w[T]&&O.unshift(w)}else{let C=Y(A,w=>w[T]?(O.unshift(w[T]),!1):!0);do if(A[R])for(let w of A[R])w.getComponent().removeAttribute(w);while(A=C())}},_=A=>{if(A.nodeType!==1||A.closest("["+h+"]"))return;let w=A.querySelectorAll("["+m+"]");for(let V of w)V.closest("["+h+"]")||g.push(V);if(A.hasAttribute(m)){g.push(A);return}let F=U(A);if(F){let V=F.scanAttributes(A);F.updateAttributes(V)}};for(let A of f)if(A.type==="childList"){for(let C of A.removedNodes)I(C);for(let C of A.addedNodes)_(C)}else if(A.type==="attributes"){let C=A.target;if(A.attributeName===m){if(C[T])continue;let H=U(C);if(H){let ye=C,nt=Y(C,ue=>ue.hasAttribute(m));do for(let ue of ye[R])H.removeAttribute(ue);while(ye=nt())}D(C);continue}else if(A.attributeName===h){if(C.hasAttribute(h)){I(C);continue}_(C);continue}if(!b.test(A.attributeName))continue;let w=U(C);if(!w)continue;let F=null;for(let H of C[R])if(H.getName()===A.attributeName){F=H;break}let V=C.getAttribute(A.attributeName);if(!F){V&&w.addAttribute(C,A.attributeName,V);continue}F.setValue(V),w.updateAttribute(F)}if(O.length>0&&k(...O),g.length>0&&D(...g),l=!1,n.length>0){N();return}Object.getOwnPropertySymbols(a).length>0&&this.update()}}};var et=(s,e,r,t=null,o=null)=>{o=Object.assign({return:!0},o);let i=[],l=(p,y)=>{i.push({id:p,path:y})},{after:n,before:c,contexts:a,destroy:u}=se(s,e,l,t);o.return&&(c+="return ");let d;try{d=new Function(...Object.keys(a),c+r+n)(...Object.values(a))}catch(p){d=null}return u(),i.length>0&&s.getLibrary().update(i),d};Z.executeExpression=et;var tt=Z;var rt=function(){new tt().enable()};document.readyState==="complete"||document.readyState==="interactive"?rt():document.addEventListener("DOMContentLoaded",rt,{once:!0,passive:!0});window.copyToClipboard=s=>{let e=document.createElement("textarea");e.value=s,document.body.append(e),e.select(),e.setSelectionRange(0,999999),document.execCommand("copy"),e.remove()};var st=0,dt=document.getElementById("counter-text");window.increment=()=>{st++,dt.setAttribute("d-text",st)};
//# sourceMappingURL=index.min.js.map
