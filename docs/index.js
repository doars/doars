!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function u(e,t,n){return(u=o()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&i(a,n.prototype),a}).apply(null,arguments)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function l(e){var t=o();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw a}}return i}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=v(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}var g=Symbol(),m=Symbol(),y=Symbol(),b=Symbol(),E=Symbol(),x=Symbol(),A=Symbol(),w=Symbol(),O=n((function t(){e(this,t);var n={};this.addEventListener=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e in n||(n[e]=[]),n[e].push({callback:t,options:r})},this.removeEventListener=function(e,t){if(Object.keys(n).includes(e)){for(var r=n[e],a=-1,i=0;i<r.length;i++)if(r[i].callback===t){a=i;break}a<0||(r.splice(a,1),0===Object.keys(r).length&&delete n[e])}},this.removeEventListeners=function(e){e&&delete n[e]},this.removeAllEventListeners=function(){n={}},this.dispatchEvent=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n[e])for(var a=n[e],i=0;i<a.length;i++){var o=r&&r.reverse?a[a.length-(i+1)]:a[i];o.options&&o.options.once&&a.splice(i,1),o.callback.apply(o,d(t))}}})),D=function(e){return e.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\"/g,'\\"').replace(/\n/g,"\\n")},N=function(e){var t,n={},r=h(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=a.indexOf("-");if(i<0)n[a]=!0;else if(0!==i){var o=a.substring(0,i),u=a.substring(i+1),s=u,c=void 0;if(u.endsWith("ms")?s=u.substring(-2):u.endsWith("s")?(c="s",s=u.substring(-1)):u.endsWith("m")?(c="m",s=u.substring(-1)):u.endsWith("h")&&(c="h",s=u.substring(-1)),s=Number.parseInt(s),!isNaN(s))switch(u=s,c){case"h":u*=60;case"m":u*=60;case"s":u*=1e3}n[o]=u}else n[a.substring(1)]=!1}}catch(e){r.e(e)}finally{r.f()}return n},j=function(e,t){if(t=t.match(new RegExp("^"+e+"-([a-z][0-9a-z-]{1,}):?([a-z][0-9a-z-]*)?(\\..*]*)?$","i"))){var n=f(t,4);n[0];var r=n[1],a=n[2],i=n[3];return[r,a=""!==a?a:null,a?a.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()})):null,i=i?i.substring(1).split("."):[]]}},k=function(e){if("string"==typeof e&&(e=e.split(/(?=\.)|(?=#)|(?=\[)/)),Array.isArray(e)){var t,n={},r=h(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;switch((a=a.trim())[0]){case"#":n.id=a.substring(1);break;case".":a=a.substring(1),n.class||(n.class=[]),n.class.includes(a)||n.class.push(a);break;case"[":var i=f(a.match(/^(?:\[)?([-$_.a-z0-9]{1,})(?:[$*^])?(?:=)?([\s\S]{0,})(?:\])$/i),3),o=(i[0],i[1]),u=i[2];n[o]=u}}}catch(e){r.e(e)}finally{r.f()}return n}console.error("Doars: parseSelector expects Array of string or a single string.")},S=function(t){r(i,t);var a=l(i);function i(t,n,r,o){var u,c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e(this,i),u=a.call(this);var l=Symbol();c||(n[g]||(n[g]=[]),n[g].push(s(u)));var d,v,p,m,y,b={},E=null;if(r){var x=j(t.getLibrary().getOptions().prefix,r),A=f(x,4),w=A[0],O=A[1],D=A[2],k=A[3];d=w,v=D,p=O,m=k,k&&(y=N(k))}return u.getComponent=function(){return t},u.getElement=function(){return n},u.getId=function(){return l},u.getDirective=function(){return d},u.getKey=function(){return v},u.getKeyRaw=function(){return p},u.getModifiers=function(){return Object.assign({},y)},u.getModifiersRaw=function(){return m},u.getName=function(){return r},u.getValue=function(){return o},u.setValue=function(e){o=e,u.dispatchEvent("changed",[s(u)])},u.clearData=function(){E=null},u.hasData=function(){return null!==E},u.getData=function(){return E},u.setData=function(e){E=e},u.destroy=function(){u.setData(null),u.clearAccessed();var e=n[g].indexOf(s(u));e>=0&&n[g].splice(e,1),u.dispatchEvent("destroyed",[s(u)]),u.removeAllEventListeners()},u.accessed=function(e,t){if(b[e]){if(b[e].includes(t))return}else b[e]=[];b[e].push(t),u.dispatchEvent("accessed",[s(u),e,t])},u.clearAccessed=function(){b={}},u.hasAccessed=function(e,t){if(!(e in b))return!1;var n,r=b[e],a=h(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(r.includes(i))return!0}}catch(e){a.e(e)}finally{a.f()}return!1},u.clone=function(){return new i(t,n,r,o,!0)},u}return n(i)}(O),L=["apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"],C=function(e,t){var n,r=!1,a={},i=h(L);try{var o=function(){var e=n.value;a[e]=function(){if(!r)return e in t?t[e].apply(t,arguments):Reflect[e].apply(Reflect,arguments);console.error("illegal operation attempted on a revoked proxy")}};for(i.s();!(n=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}return{proxy:new Proxy(e,a),revoke:function(){r=!0}}},T=function(t){r(i,t);var a=l(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,i),t=a.call(this),n=Object.assign({delete:!0,get:!0,set:!0},n);var r=new WeakMap;return t.add=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(r.has(e))return r.get(e);for(var i in e)e[i]&&"object"==typeof e[i]&&(e[i]=t.add(e[i],[].concat(d(a),[i])));var o={};n.delete&&(o.deleteProperty=function(e,n){if(!Reflect.has(e,n))return!0;t.remove(e,n);var r=Reflect.deleteProperty(e,n);return r&&t.dispatchEvent("delete",[e,Array.isArray(e)?d(a):[].concat(d(a),[n])]),r}),n.get&&(o.get=function(e,n,r){return n!==Symbol.unscopables&&t.dispatchEvent("get",[e,[].concat(d(a),[n]),r]),Reflect.get(e,n,r)}),n.set&&(o.set=function(e,n,r,i){return e[n]===r||("object"==typeof r&&(r=t.add(r,[].concat(d(a),[n]))),e[n]=r,t.dispatchEvent("set",[e,Array.isArray(e)?d(a):[].concat(d(a),[n]),r,i])),!0});var u=C(e,o);return r.set(u,e),u.proxy},t.remove=function(e){if(r.has(e)){var n=r.get(e);for(var a in r.delete(n),n.proxy)"object"==typeof n.proxy[a]&&t.remove(n.proxy[a]);n.revoke()}},t}return n(i)}(O),P=function(e,t){for(var n in t)if("class"!==n)e.setAttribute(n,t[n]);else{var r,a=h(t.class);try{for(a.s();!(r=a.n()).done;){var i=r.value;e.classList.add(i)}}catch(e){a.e(e)}finally{a.f()}}},$=function(e,t){for(var n in t)if("class"!==n)t[n]&&e.attributes[n]!==t[n]||e.removeAttribute(n);else{var r,a=h(t.class);try{for(a.s();!(r=a.n()).done;){var i=r.value;e.classList.remove(i)}}catch(e){a.e(e)}finally{a.f()}}},I=function(e,t,n){if("value"!==t||"INPUT"!==e.tagName)"checked"!==t||"checkbox"!==e.type&&"radio"!==e.type?("class"===t&&(Array.isArray(n)?n=n.join(" "):"object"==typeof n&&(n=Object.entries(n).filter((function(e){var t=f(e,2);return t[0],t[1]})).map((function(e){return f(e,1)[0]})).join(" "))),"style"===t&&(Array.isArray(n)?n=n.join(" "):"object"==typeof n&&(n=Object.entries(n).map((function(e){var t=f(e,2);return t[0]+":"+t[1]})).join(";"))),!1===n||null==n?e.removeAttribute(t):e.setAttribute(t,n)):e.checked=!!n;else{if(n||(n=""),e.getAttribute(t)===n)return;e.setAttribute(t,n)}},R=function(e,t){for(var n in t)I(e,n,t[n])},V=function(e,t){e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)},z=function(e,t){return e.isSameNode?e.isSameNode(t):e.tagName===t.tagName&&3===e.type&&e.nodeValue===t.nodeValue},_=function e(t,n){var r=-1,a=null;return function(){if(r>=0&&a){var i=a();if(i)return i}var o=null;do{if(++r>=t.childElementCount)return null;o=t.children[r]}while(!n(o));return o.childElementCount&&(a=e(o,n)),o}},M=function(e,t,n){if("object"!=typeof e)throw new Error("Existing tree should be an object.");if("string"==typeof t)r=t,(a=document.createElement("template")).innerHTML=r,t=a.content.childNodes[0];else if("object"!=typeof t)throw new Error("New tree should be an object.");var r,a;return n&&n.childrenOnly||11===t.nodeType?(q(e,t),e):K(e,t)},U=function(e,t,n){e[n]!==t[n]&&(e[n]=t[n],t[n]?e.setAttribute(n,""):e.removeAttribute(n))},K=function(e,t){return e?t?e.isSameNode&&e.isSameNode(t)?e:e.tagName!==t.tagName?t:(n=e,a=(r=t).nodeType,i=r.nodeName,1===a&&function(e,t){for(var n=e.attributes,r=t.attributes,a=null,i=null,o=null,u=null,s=r.length-1;s>=0;--s)o=(u=r[s]).name,a=u.namespaceURI,i=u.value,a?(o=u.localName||o,e.getAttributeNS(a,o)!==i&&e.setAttributeNS(a,o,i)):e.hasAttribute(o)?e.getAttribute(o)!==i&&("null"===i||"undefined"===i?e.removeAttribute(o):e.setAttribute(o,i)):e.setAttribute(o,i);for(var c=n.length-1;c>=0;--c)!1!==(u=n[c]).specified&&(o=u.name,(a=u.namespaceURI)?(o=u.localName||o,t.hasAttributeNS(a,o)||e.removeAttributeNS(a,o)):t.hasAttributeNS(null,o)||e.removeAttribute(o))}(n,r),3!==a&&8!==a||n.nodeValue!==r.nodeValue&&(n.nodeValue=r.nodeValue),"INPUT"===i?function(e,t){var n=t.value,r=e.value;U(e,t,"checked"),U(e,t,"disabled"),e.indeterminate!==t.indeterminate&&(e.indeterminate=t.indeterminate),"file"!==e.type&&(r!==n&&(e.setAttribute("value",n),e.value=n),"null"===n&&(e.value="",e.removeAttribute("value")),t.hasAttributeNS(null,"value")?"range"===e.type&&(e.value=n):e.removeAttribute("value"))}(n,r):"OPTION"===i?U(n,r,"selected"):"TEXTAREA"===i&&function(e,t){var n=t.value;if(e.value!==n&&(e.value=n),e.firstChild&&e.firstChild.nodeValue!==n){if(e.firstChild.nodeValue===e.placeholder&&""===n)return;e.firstChild.nodeValue=n}}(n,r),q(e,t),e):null:t;var n,r,a,i},q=function(e,t){for(var n,r,a,i,o=0,u=0;n=e.childNodes[u],r=t.childNodes[u-o],n||r;u++)if(r)if(n)if(z(n,r))(a=K(n,r))!==n&&(e.replaceChild(a,n),o++);else{i=null;for(var s=u;s<e.childNodes.length;s++)if(z(e.childNodes[s],r)){i=e.childNodes[s];break}i?((a=K(i,r))!==i&&o++,e.insertBefore(a,n)):r.id||n.id?(e.insertBefore(r,n),o++):(a=K(n,r))!==n&&(e.replaceChild(a,n),o++)}else e.appendChild(r),o++;else e.removeChild(n),u--},F=function e(t){if(t.parentElement)return(t=t.parentElement)[m]?t[m]:e(t)},W="-transition:",B=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(1===n.nodeType){var a,i,o,u,s=t.getLibrary().getOptions(),c=s.prefix,l=c+W+e,f=function(t){n.dispatchEvent(new CustomEvent("transition-"+t)),n.dispatchEvent(new CustomEvent("transition-"+e+"-"+t))},d=!1,v={};return a=l,(i=n.getAttribute(a))&&(v.during=k(i),P(n,v.during)),a=l+".from",(i=n.getAttribute(a))&&(v.from=k(i),P(n,v.from)),f("start"),u=requestAnimationFrame((function(){if(u=null,!d){if(v.from&&($(n,v.from),v.from=void 0),a=l+".to",i=n.getAttribute(a))v.to=k(i),P(n,v.to);else if(!v.during)return f("end"),r&&r(),void(d=!0);var e=getComputedStyle(n),t=1e3*Number(e.transitionDuration.replace(/,.*/,"").replace("s",""));0===t&&(t=1e3*Number(e.animationDuration.replace("s",""))),o=setTimeout((function(){o=null,d||(v.during&&($(n,v.during),v.during=void 0),v.to&&($(n,v.to),v.to=void 0),f("end"),r&&r(),d=!0)}),t)}})),function(){d&&(d=!0,v.during&&($(n,v.during),v.during=void 0),v.from?($(n,v.from),v.from=void 0):v.to&&($(n,v.to),v.to=void 0),u?(cancelAnimationFrame(u),u=null):o&&(clearTimeout(o),o=null),f("end"),r&&r())}}r&&r()},H=function(e,t,n){return B("in",e,t,n)},X=function(e,t,n){return B("out",e,t,n)},Z=n((function t(n,r){var a=this;e(this,t);var i,o,u,s=Symbol(),c=n.getOptions(),l=c.prefix,f=c.processor,d="function"==typeof f?f:n.constructor.evaluateExpression&&"evaluate"===expression?n.constructor.evaluateExpression:n.constructor.executeExpression,v=Object.freeze({morphTree:M,processExpression:d,transition:B,transitionIn:H,transitionOut:X}),p=[],g=!1,y=!1;if(r.attributes[l+"-state"]){r[m]=this;var b=[],E=F(r);E&&(E.getChildren().includes(this)||(E.getChildren().push(this),n.update([{id:E.getId(),path:"children"}]))),this.getAttributes=function(){return p},this.getChildren=function(){return b},this.getElement=function(){return r},this.getId=function(){return s},this.getLibrary=function(){return n},this.getParent=function(){return E},this.getProxy=function(){return o},this.getState=function(){return u},this.setParent=function(e){E=e},this.initialize=function(){if(!y){y=!0;var e=l+"-state",t=r.attributes[e].value;if(null===(i=d(a,new S(a,r,null,t),t)))i={};else if("object"!=typeof i||Array.isArray(i))return void console.error("Doars: component tag must return an object!");o=new T,u=o.add(i),a.scanAttributes(r)}},this.destroy=function(){if(y){if(p.length>0){var e=n.getDirectivesObject();for(var t in e)e[t].destroy||(e[t]=void 0);var c,l=h(p);try{for(l.s();!(c=l.n()).done;){var f=c.value,d=e[f.getKey()];d&&d.destroy(a,f,v),f.destroy()}}catch(e){l.e(e)}finally{l.f()}}delete r[m],p=[],y=!1,o.remove(i),u=null,o=null,i=null;var g,A=[];if(b.length>0){var w,O=h(b);try{for(O.s();!(w=O.n()).done;){var D=w.value;D.setParent(E),A.push({id:D.getId(),path:"parent"})}}catch(e){O.e(e)}finally{O.f()}A.push({id:s,path:"children"})}E&&(b.length>0&&((g=E.getChildren()).push.apply(g,b),A.push({id:E.getId(),path:"children"})),A.push({id:s,path:"parent"})),A.length>0&&n.update(A),x("destroyed",{element:r,id:s})}},this.addAttribute=function(e,t,r){for(var i=n.getDirectivesNames(),o=new S(a,e,t,r),u=o.length,s=i.indexOf(o.getDirective()),c=p.length-1;c>=0;c--)if(i.indexOf(p[c].getDirective())<=s){u=c+1;break}return p.splice(u,0,o),o},this.removeAttribute=function(e){var t=p.indexOf(e);if(!(t<0)){var r=n.getDirectivesObject[e.getKey()];r&&r.destroy&&r.destroy(a,e,v),p.splice(t,1),e.destroy()}},this.scanAttributes=function(e){var t=l+"-state",r=l+"-ignore",i=[],o=_(e,(function(e){return!e.hasAttribute(t)&&!e.hasAttribute(r)}));do{var u,s=h(e.attributes);try{for(s.s();!(u=s.n()).done;){var c=u.value,f=c.name,d=c.value;n.isDirectiveName(f)&&i.push(a.addAttribute(e,f,d))}}catch(e){s.e(e)}finally{s.f()}}while(e=o());return i},this.updateAttribute=function(e){if(e.getElement()&&null!==e.getValue()&&void 0!==e.getValue()){var t=n.getDirectivesObject();e.clearAccessed();var r=t[e.getDirective()];r&&r.update(a,e,v)}else a.removeAttribute(e)},this.updateAttributes=function(e){if(!y||e.length<=0)g||(g=!0,x("updated",{attributes:e,element:r,id:s}));else{var t,n=h(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;a.updateAttribute(i)}}catch(e){n.e(e)}finally{n.f()}g=!0,x("updated",{attributes:e,element:r,id:s})}},this.update=function(e){if(y){var t,n=Object.getOwnPropertySymbols(e),i=[],o=h(p);try{for(o.s();!(t=o.n()).done;){var u,c=t.value,l=h(n);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.hasAccessed(f,e[f])&&(a.updateAttribute(c),i.push(c))}}catch(e){l.e(e)}finally{l.f()}}}catch(e){o.e(e)}finally{o.f()}(!g||i.length>0)&&(g=!0,x("updated",{attributes:i,element:r,id:s}))}};var x=function(e,t){r.dispatchEvent(new CustomEvent(l+"-"+e,{detail:t,bubbles:!0}))}}else console.error("Doars: element given to component does not contain a state attribute!")})),G={name:"$children",create:function(e,t,n,r){var a,i=r.createContextsProxy,o=(0,r.RevocableProxy)(e.getChildren(),{get:function(r,o,u){if(a||(a=r.map((function(e){return i(e,t,n)})),t.accessed(e.getId(),"children")),isNaN(o))return Reflect.get(a,o,u);var s=Reflect.get(a,o,u);return s?s.contexts:void 0}});return{value:o.proxy,destroy:function(){a&&a.forEach((function(e){return e.destroy()})),o.revoke()}}}},J={name:"$component",create:function(e){return{value:e.getElement()}}},Q={name:"$element",create:function(e,t){return{value:t.getElement()}}},Y={name:"$dispatch",create:function(e){return{value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.getElement().dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0}))}}}},ee={deconstruct:!0,name:"$for",create:function(e,t,n,r){var a=r.RevocableProxy;if(e===t.getComponent()){for(var i=t.getElement(),o=e.getElement(),u=[],s={};i&&!i.isSameNode(o);){var c=i[y];if(c)for(var l in u.push(c),c.variables)s[l]=c.variables[l];i=i.parentNode}if(0!==u.length){var f=a(s,{get:function(e,n){var r,a=h(u);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(n in i.variables)return t.accessed(i.id,"$for"),i.variables[n]}}catch(e){a.e(e)}finally{a.f()}}});return{value:f.proxy,destroy:function(){f.revoke()}}}}}},te={name:"$inContext",create:function(e,t,n,r){var a=r.createContexts;return{value:function(n){var r=[],i=a(e,t,(function(e,t){r.push({id:e,path:t})}),{}),o=i.contexts,u=i.destroy,s=n(o);return u(),r.length>0&&e.getLibrary().update(r),s}}}},ne={name:"$nextTick",create:function(e,t,n,r){var a,i=r.createContexts,o=!1;return{value:function(r){!function(){if(!o){o=!0;var r=e.getLibrary();a=[];var u=function(){s();var r,o=i(e,t,n,{}),u=o.contexts,c=o.destroy,l=h(a);try{for(l.s();!(r=l.n()).done;)(0,r.value)(u)}catch(e){l.e(e)}finally{l.f()}c()},s=function e(){r.removeEventListener("updated",u),t.removeEventListener("changed",e),t.removeEventListener("destroyed",e)};r.addEventListener("updated",u),t.addEventListener("changed",s),t.addEventListener("destroyed",s)}}(),a.push(r)}}}},re={name:"$parent",create:function(e,t,n,r){var a=r.createContextsProxy,i=e.getParent();if(!i)return{key:"$parent",value:null};var o=a(i,t,n);return{value:o.contexts,destroy:o.destroy}}},ae={name:"$references",create:function(e,t,n,r){var a=r.RevocableProxy;if(!e[x])return{key:"$references",value:[]};var i=e[A];if(!i){var o=e[x];i={};var u,s=h(Object.getOwnPropertySymbols(o));try{for(s.s();!(u=s.n()).done;){var c=o[u.value],l=c.element;i[c.name]=l}}catch(e){s.e(e)}finally{s.f()}e[A]=i}var f=a(i,{get:function(n,r,a){return t.accessed(e.getId(),"$references."+r),Reflect.get(n,r,a)}});return{value:f.proxy,destroy:function(){f.revoke()}}}},ie={deconstruct:!0,name:"$state",create:function(e,t,n,r){var a=r.RevocableProxy,i=e.getProxy(),o=e.getState();if(i&&o){var u=function(t,r){return n(e.getId(),"$state."+r.join("."))},s=function(n,r){return t.accessed(e.getId(),"$state."+r.join("."))},c=function(t,r){return n(e.getId(),"$state."+r.join("."))};i.addEventListener("delete",u),i.addEventListener("get",s),i.addEventListener("set",c);var l=a(o,{});return{value:l.proxy,destroy:function(){i.removeEventListener("delete",u),i.removeEventListener("get",s),i.removeEventListener("set",c),l.revoke()}}}}};Function.prototype.toString.call(Function).replace("Function","Promise").replace(/\(.*\)/,"()");var oe=function(e){return e&&"[object Promise]"===Object.prototype.toString.call(e)},ue={name:"attribute",update:function(e,t,n){var r=n.processExpression,a=t.getElement(),i=t.getModifiers(),o=function(e){if(i.selector)return"string"!=typeof e?void console.error("Doars: Value returned to attribute directive must be a string if the selector modifier is set."):(e=k(e),void R(a,e));var n=t.getKeyRaw();n?I(a,n,e):"object"!=typeof e||Array.isArray(e)?console.error("Doars: Value returned to attribute directive of invalid type."):R(a,e)},u=r(e,t,t.getValue());t.setData(u),oe(u)?Promise.resolve(u).then((function(e){t.getData()===u&&o(e)})):o(u)}},se={name:"cloak",update:function(e,t,n){var r=n.transitionIn,a=t.getElement();a.removeAttribute(e.getLibrary().getOptions().prefix+"-"+this.name),r(e,a)}},ce=function(e){for(var t={},n=0;n<(arguments.length<=1?0:arguments.length-1)&&!(n>=e.length);n++)t[e[n]]=n+1<1||arguments.length<=n+1?void 0:arguments[n+1];return t},le=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return++r>=t.length?-1:t[r][y].value===n?r:e(t,n,r)},fe=function(e,t,n,r,a,i,o){var u=le(r,i,a);if(u>=0){if(u===a+1)return;var s=r[u];return V(r[a]?r[a]:n,s),void t(s[y].id)}var c=document.importNode(n.content,!0),l=-1===a?n:r[a];V(l,c),c=l.nextElementSibling,H(e,c),c[y]={id:Symbol(),value:i,variables:o},r.splice(a+1,0,c)},de=function(e,t,n){if(!(t.length<n))for(var r=function(n){var r=t[n];t.splice(n,1),X(e,r,(function(){r.remove()}))},a=t.length-1;a>=n;a--)r(a)},ve={name:"for",update:function(e,t,n){var r=n.processExpression,a=t.getElement();if("TEMPLATE"===a.tagName){var i=function(e){var t=e.match(/^([$_a-z0-9,(){}\s]{1,}?)\s+(?:in|of)\s+([\s\S]{1,})$/i);if(t){var n=t[1].replace(/^[\s({]*|[)}\s]*$/g,"");if(n=n.match(/^([$_a-z0-9]{1,})?(?:,\s+?)?([$_a-z0-9]{1,})?(?:,\s+)?([$_a-z0-9]{1,})?$/i))return n.shift(),{iterable:t[2].trim(),variables:d(n)}}}(t.getValue());if(i){var o,u={},s=function(e){u[e]||(u[e]=["$for"])},c=function(n){var r=t.getData(),o=r.elements?r.elements:[],c=typeof n;if("number"===c){for(var l=0;l<n;l++){var f=ce(i.variables,l);fe(e,s,a,o,l-1,n,f)}de(e,o,n)}else if("string"===c){for(var v=0;v<n.length;v++){var p=n[v],h=ce(i.variables,p,v);fe(e,s,a,o,v-1,p,h)}de(e,o,n.length)}else{var g,m;try{var y=d(n);g=!0,m=y.length}catch(e){}if(g)for(var b=0;b<m;b++){var E=n[b],x=ce(i.variables,E,b);fe(e,s,a,o,b-1,E,x)}else{var A=Object.keys(n);m=A.length;for(var w=0;w<m;w++){var O=A[w],D=n[O],N=ce(i.variables,O,D,w);fe(e,s,a,o,w-1,D,N)}}de(e,o,m)}Object.getOwnPropertySymbols(u).length>0&&e.update(u),t.setData(Object.assign({},r,{elements:o}))};o=isNaN(i.iterable)?r(e,t,i.iterable):Number(i.iterable);var l=t.getData();t.setData(Object.assign({},l,{result:o})),oe(o)?Promise.resolve(o).then((function(e){t.getData().result===o&&c(e)})):c(o)}else console.error("Doars: Error in `for` expression: ",t.getValue())}else console.warn("Doars: `for` directive must be placed on a `<template>` tag.")},destroy:function(e,t){var n=t.getData();if(n.elements){var r,a=h(n.elements);try{var i=function(){var t=r.value;X(e,t,(function(){t.remove()}))};for(a.s();!(r=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}}}},pe={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"'},he=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g,ge={name:"html",update:function(e,t,n){var r=n.processExpression,a=n.morphTree,i=t.getElement(),o=t.getModifiers(),u=function(e){var t;if(o.decode&&"string"==typeof e&&(e="string"!=typeof(t=e)?t:t.replaceAll(he,(function(e){return pe[e]}))),o.morph){if(0===i.children.length)i.appendChild(document.createElement("div"));else if(i.children.length>1)for(var n=i.children.length-1;n>=1;n--)i.children[n].remove();var r=a(i.children[0],e);i.children[0].isSameNode(r)||(i.children[0].remove(),i.appendChild(r))}else if(e instanceof HTMLElement){var u,s=h(i.children);try{for(s.s();!(u=s.n()).done;)u.value.remove()}catch(e){s.e(e)}finally{s.f()}i.appendChild(e.cloneNode(!0))}else"string"!=typeof e?console.error("Doars/directives/html: Unknown type returned to directive!"):i.innerHTML!==e&&(i.innerHTML=e)},s=r(e,t,t.getValue());t.setData(s),oe(s)?Promise.resolve(s).then((function(e){t.getData()===s&&u(e)})):u(s)}},me={name:"if",update:function(e,t,n){var r=n.processExpression,a=n.transitionIn,i=n.transitionOut,o=t.getElement();if("TEMPLATE"===o.tagName)if(o.childCount>1)console.warn("Doars: `if` directive must have a single child node.");else{var u=function(n){var r=t.getData(),u=r.element,s=r.transition;n?u||(s&&s(),u=document.importNode(o.content,!0),V(o,u),u=o.nextElementSibling,s=a(e,u)):u&&(s&&s(),s=i(e,u,(function(){u.remove()}))),t.setData(Object.assign({},r,{element:u,transition:s}))},s=r(e,t,t.getValue()),c=t.getData();t.setData(Object.assign({},c,{result:s})),oe(s)?Promise.resolve(s).then((function(e){t.getData().result===e&&u(e)})):u(s)}else console.warn("Doars: `if` directive must be placed on a `<template>` tag.")},destroy:function(e,t,n){var r=n.transitionOut,a=t.getData();a.element&&r(e,a.element,(function(){a.element.remove()}))}},ye=function(e,t){if(t[b]){var n=e.getElement(),r=e.getLibrary().getOptions().prefix+"-updated";n.removeEventListener(r,t[b].handler),delete t[b]}},be={name:"initialized",update:function(e,t,n){var r=n.processExpression,a=e.getElement(),i=t.getValue(),o=e.getLibrary().getOptions().prefix+"-updated";if(t[b]){if(t[b].value===i)return;a.removeEventListener(o,t[b].handler),delete t[b]}var u=function(n){n.detail.element===a&&(r(e,t.clone(),i,{},{return:!1}),ye(e,t))};a.addEventListener(o,u,{once:!0}),t[b]={handler:u,value:i}},destroy:ye},Ee={keydown:"keyup",mousedown:"mouseup",pointerdown:"pointerup"},xe=["alt","ctrl","meta","shift"],Ae={name:"on",update:function(e,t,n){var r=n.processExpression,a=t.getKeyRaw();if(a){var i;a.startsWith("keydown-")?(i=a.substring(8).toLowerCase(),a="keydown"):a.startsWith("keyup-")&&(i=a.substring(6).toLowerCase(),a="keyup");var o=t.getElement(),u=t.getValue();if(t[E]){if(t[E].value===u)return;t[E].target.removeEventListener(a,t[E].handler),t[E].timeout&&clearTimeout(t[E].timeout),delete t[E]}var s=t.getModifiers(),c={};s.capture&&(c.capture=!0),s.once&&(c.once=!0),s.passive&&(c.passive=!0);var l=0;s.buffer?(l=1,!0===s.buffer&&(s.buffer=5)):s.debounce?(l=2,!0===s.debounce&&(s.debounce=500)):s.held?(l=3,!0===s.held&&(s.held=500)):s.hold?(l=4,!0===s.hold&&(s.hold=500)):s.throttle&&(l=5,!0===s.throttle&&(s.throttle=500));var f=[];if(i){s.meta=!!s.meta||s.cmd||s.super;var d,v=h(xe);try{for(v.s();!(d=v.n()).done;){var p=d.value;s[p]&&f.push(p)}}catch(e){v.e(e)}finally{v.f()}}var g=o;s.document||s.outside?g=document:s.window&&(g=window);var m=function(n){if(!t[E].prevent&&(s.repeat||!n.repeat)&&!(s.self&&n.target!==o||s.outside&&o.contains(n.target))){if(("keydown"===a||"keyup"===a)&&i){var c,d=h(f);try{for(d.s();!(c=d.n()).done;){var v=c.value;if(!n[v+"Key"])return}}catch(e){d.e(e)}finally{d.f()}var p=s.code?n.code:n.key;if(" "===p&&(p="space"),(p=p.toLowerCase())!==i)return}s.prevent&&n.preventDefault(),s.stop&&n.stopPropagation();var m=function(){r(e,t.clone(),u,{$event:n,$events:t[E].buffer},{return:!1}),t[E].buffer=[]};switch(t[E].buffer.push(n),l){case 1:if(t[E].buffer.length<s.buffer)return;return void m();case 2:return t[E].timeout&&(clearTimeout(t[E].timeout),t[E].timeout=null),void(t[E].timeout=setTimeout(m,s.debounce));case 3:if(!(a in Ee))return void console.warn('Doars: `on` directive, event of name "'+a+'" is not cancelable and can not have "held" modifier.');var y=Ee[a],b=window.performance.now();return t[E].cancel=function(e){if(window.performance.now()-b<s.held)t[E].prevent=!1;else{if("keyup"===y&&i){var n,r=h(f);try{for(r.s();!(n=r.n()).done;)if(!e[n.value+"Key"])return void(t[E].prevent=!1)}catch(e){r.e(e)}finally{r.f()}var a=s.code?e.code:e.key;if(" "===a&&(a="space"),(a=a.toLowerCase())!==i)return void(t[E].prevent=!1)}s.self&&e.target!==o||s.outside&&o.contains(e.target)?t[E].prevent=!1:m()}},t[E].prevent=!0,void g.addEventListener(y,t[E].cancel,{once:!0});case 4:if(!(a in Ee))return void console.warn('Doars: `on` directive, event of name "'+a+'" is not cancelable and can not have "hold" modifier.');var x=Ee[a];return t[E].cancel=function(e){if("keyup"===x&&i){var n,r=!1,a=h(f);try{for(a.s();!(n=a.n()).done;)e[n.value+"Key"]||(r=!0)}catch(e){a.e(e)}finally{a.f()}var u=s.code?e.code:e.key;if(" "===u&&(u="space"),(u=u.toLowerCase())===i&&(r=!0),!r)return void(t[E].prevent=!1)}s.self&&e.target!==o||s.outside&&o.contains(e.target)?t[E].prevent=!1:clearTimeout(t[E].timeout)},g.addEventListener(x,t[E].cancel,{once:!0}),t[E].prevent=!0,void(t[E].timeout=setTimeout((function(){g.removeEventListener(x,t[E].cancel),t[E].prevent=!1,m()}),s.hold));case 5:var A=window.performance.now();if(t[E].lastExecution&&A-t[E].lastExecution<s.throttle)return;return m(),void(t[E].lastExecution=A)}m()}};g.addEventListener(a,m,c),t[E]={buffer:[],handler:m,target:g,timeout:t[E]?t[E].timeout:void 0,value:u,prevent:!1}}else console.warn("Doars: `on` directive must have a key.")},destroy:function(e,t){if(t[E]){var n=t.getKeyRaw();t[E].target.removeEventListener(n,t[E].handler),t[E].cancel&&t[E].target.removeEventListener(Ee[n],t[E].cancel),t[E].timeout&&clearTimeout(t[E].timeout),delete t[E]}}},we=function(e,t){if(e[x]){var n=t.getId();if(e[x][n]){var r=e.getLibrary(),a=e.getId(),i=t.getValue().trim();delete e[x][n],delete e[A],0===Object.keys(e[x]).length&&delete e[x],r.update([{id:a,path:"$references."+i}])}}},Oe={name:"reference",update:function(e,t){var n=t.getValue().trim();if(!/^[_$a-z]{1}[_\-$a-z0-9]{0,}$/i.test(n))return we(e,t),void console.warn("Doars: `reference` directive's value not a valid variable name: \""+n+'".');var r=e.getLibrary(),a=e.getId(),i=t.getElement(),o=t.getId();e[x]||(e[x]={}),e[x][o]={element:i,name:n},delete e[A],r.update([{id:a,path:"$references."+n}])},destroy:we},De={name:"select",update:function(e,t,n){var r=n.processExpression,a=t.getElement(),i=a.getAttribute("type");if("SELECT"===a.tagName||"INPUT"===a.tagName&&("checkbox"===i||"radio"===i)){var o=function(e){if("SELECT"===a.tagName)for(var t=0,n=Array.from(a.options);t<n.length;t++){var r=n[t],o=Array.isArray(e)?e.includes(r.value):e===r.value;r.selected!==o&&(r.selected=o,o?r.setAttribute("selected",""):r.removeAttribute("selected"))}else if("checkbox"===i){var u=e.includes(a.value);a.checked!==u&&(u?a.setAttribute("checked",""):a.removeAttribute("checked"))}else{var s=e===a.value;a.checked!==s&&(s?a.setAttribute("checked",""):a.removeAttribute("checked"))}},u=r(e,t,t.getValue());t.setData(u),oe(u)?Promise.resolve(u).then((function(e){t.getData()===u&&o(e)})):o(u)}else console.warn("Doars: `select` directive must be placed on a `select` tag or `input` of type checkbox or radio.")}},Ne={name:"show",update:function(e,t,n){var r=n.processExpression,a=n.transitionIn,i=n.transitionOut,o=t.getElement(),u=function(){var n,r=t.getData();r.transition&&r.transition(),r.result?(o.style.display=null,n=a(e,o)):n=i(e,o,(function(){o.style.display="none"})),t.setData(Object.assign({},r,{transition:n}))},s=r(e,t,t.getValue()),c=t.getData();oe(s)?(t.setData(Object.assign({},c,{result:s})),Promise.resolve(s).then((function(e){t.getData().result===s&&u()}))):c&&c.result===s||(t.setData(Object.assign({},c,{result:s})),u())}},je={name:"sync",update:function(e,t,n){var r=n.processExpression,a=t.getElement(),i=!t[w];if(!i||"DIV"===a.tagName&&a.hasAttribute("contenteditable")||"INPUT"===a.tagName||"SELECT"===a.tagName||"TEXTAREA"===a.tagName){var o=t.getValue().trim(),u=t.getKey();if(u&&(o="$"+u+"."+o),/^[_$a-z]{1}[._$a-z0-9]{0,}$/i.test(o)){if(i){var s;switch(a.tagName){case"DIV":s=function(){r(e,t.clone(),o+"='"+D(a.innerText)+"'")};break;case"INPUT":s=function(){var n=t.clone(),i=D(a.value);if("checkbox"===a.type){var u=r(e,n,o);if(a.checked)u||r(e,n,o+"=['"+i+"']"),u.includes(a.value)||r(e,n,o+".push('"+i+"')");else if(u){var s=u.indexOf(a.value);s>=0&&r(e,n,o+".splice("+s+",1)")}}else if("radio"===a.type){var c=r(e,n,o);a.checked?c!==a.value&&r(e,n,o+"='"+i+"'"):c===a.value&&r(e,n,o+"=null")}else r(e,n,o+"='"+i+"'")};break;case"TEXTAREA":s=function(){r(e,t.clone(),o+"='"+D(a.value)+"'")};break;case"SELECT":s=function(){var n=t.clone();if(a.multiple){var i,u=[],s=h(a.selectedOptions);try{for(s.s();!(i=s.n()).done;){var c=i.value;u.push(D(c.value))}}catch(e){s.e(e)}finally{s.f()}r(e,n,o+"=['"+u.join("','")+"']")}else r(e,n,o+"='"+D(a.selectedOptions[0].value)+"'")}}a.addEventListener("input",s),t[w]=s}var c=r(e,t,o);switch(a.tagName){case"DIV":case"TEXTAREA":c!==a.innerText&&(a.innerText=c);break;case"INPUT":if("checkbox"===a.type){var l=c.includes(a.value);a.checked!==l&&(a.checked=l,l?a.setAttribute("checked",""):a.removeAttribute("checked"))}else if("radio"===a.type){var f=c===a.value;a.checked!==f&&(a.checked=f,f?a.setAttribute("checked",""):a.removeAttribute("checked"))}else c!==a.value&&a.setAttribute("value",c);break;case"SELECT":for(var d=0,v=Array.from(a.options);d<v.length;d++){var p=v[d],g=Array.isArray(c)?c.includes(p.value):c===p.value;p.selected!==g&&(p.selected=g,g?p.setAttribute("selected",""):p.removeAttribute("selected"))}}}else console.warn("Doars: `sync` directive's value not a valid variable name: \""+o+'".')}else console.warn("Doars: `sync` directive must be placed on an `<input>`, `<select>`, `<textarea>` tag, or a content editable `div`.")},destroy:function(e,t){t[w]&&(t.getElement().removeEventListener("input",t[w]),delete t[w])}},ke={name:"text",update:function(e,t,n){var r=n.processExpression,a=t.getElement(),i=t.getModifiers(),o=function(e){i.content?a.textContent!==e&&(a.textContent=e):a.innerText!==e&&(a.innerText=e)},u=r(e,t,t.getValue());t.setData(u),oe(u)?Promise.resolve(u).then((function(e){t.getData()===u&&o(e)})):o(u)}},Se={name:"watch",update:function(e,t,n){var r=n.processExpression,a=t.getValue();r(e,t,a,{},{return:!1})}},Le=function(t){r(i,t);var a=l(i);function i(t){var n;e(this,i),n=a.call(this);var r=t=Object.assign({prefix:"d",processor:"execute",root:document.body.firstElementChild},t),o=r.prefix,u=r.root;"string"==typeof u&&(t.root=u=document.querySelector(u));var c,l,f,v,p,y,b=Symbol(),E=!1,x=!1,A=[],w={},O=[G,J,Q,Y,te,ne,re,ae,ie,ee],D=[Oe,ue,ve,ge,me,ke,se,be,Ae,De,Ne,je,Se];n.getId=function(){return b},n.getOptions=function(){return Object.assign({},t)},n.getEnabled=function(){return E},n.enable=function(){if(E)return s(n);x=!1,c=[],f={},n.dispatchEvent("enabling",[s(n)]),E=!0,v=D.map((function(e){return e.name})),p={};var e,t=h(D);try{for(t.s();!(e=t.n()).done;){var r=e.value;p[r.name]=r}}catch(e){t.e(e)}finally{t.f()}y=new RegExp("^"+o+"-("+v.join("|")+")(?:[$-_.a-z0-9]{0,})?$","i"),(l=new MutationObserver(k.bind(s(n)))).observe(u,{attributes:!0,childList:!0,subtree:!0});for(var a=o+"-state",i=o+"-ignore",g=d(u.querySelectorAll("["+a+"]")),m=g.length-1;m>=0;m--)g[m].closest("["+i+"]")&&g.splice(m,1);return N.apply(void 0,[u.hasAttribute(a)&&!u.hasAttribute(i)?u:null].concat(d(g))),n.dispatchEvent("enabled",[s(n)]),n.dispatchEvent("updated",[s(n)]),s(n)},n.disable=function(){return E?(l.disconnect(),l=null,x=c=f=null,n.dispatchEvent("disabling",[s(n)],{reverse:!0}),j.apply(void 0,A),v=p=y=null,E=!1,n.dispatchEvent("disabled",[s(n)],{reverse:!0}),s(n)):s(n)};var N=function(){for(var e=[],t=[],r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];for(var o=0,u=a;o<u.length;o++){var c=u[o];if(c&&!c[m]){var l=new Z(s(n),c);A.push(l),e.push(l),t.push(c)}}t.length>0&&n.dispatchEvent("components-added",[s(n),t]);for(var f=0,d=e;f<d.length;f++){var v=d[f];v.initialize()}for(var p=0,h=e;p<h.length;p++){var g=h[p];g.updateAttributes(g.getAttributes())}return e},j=function(){for(var e=[],t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];for(var i=0,o=r;i<o.length;i++){var u=o[i],c=A.indexOf(u);c<0||(e.push(u.getElement()),u.destroy(),A.splice(c,1))}return e.length>0&&n.dispatchEvent("components-removed",[s(n),e]),e};n.getSimpleContexts=function(){return Object.assign({},w)},n.setSimpleContext=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===t?(delete w[e],n.dispatchEvent("simple-context-removed",[s(n),e]),!0):e.match("^([a-zA-Z_$][a-zA-Zd_$]*)$")?(w[e]=t,n.dispatchEvent("simple-context-added",[s(n),e,t]),!0):(console.warn('Doars: name of a bind can not start with a "$".'),!1)},n.getContexts=function(){return[].concat(O)},n.addContexts=function(e){if(!E){e<0?e=O.length+e%O.length:e>O.length&&(e=O.length);for(var t=[],r=0;r<(arguments.length<=1?0:arguments.length-1);r++){var a=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];O.includes(a)||(O.splice(e+r,0,a),t.push(a))}return t.length>0&&n.dispatchEvent("contexts-added",[s(n),t]),t}console.warn("Doars: Unable to add contexts after being enabled!")},n.removeContexts=function(){if(!E){for(var e=[],t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];for(var i=0,o=r;i<o.length;i++){var u=o[i],c=O.indexOf(u);c<0||(O.slice(c,1),e.push(u))}return e.length>0&&n.dispatchEvent("contexts-removed",[s(n),e]),e}console.warn("Doars: Unable to remove contexts after being enabled!")},n.getDirectives=function(){return[].concat(D)},n.getDirectivesNames=function(){return d(v)},n.getDirectivesObject=function(){return Object.assign({},p)},n.isDirectiveName=function(e){return y.test(e)},n.addDirectives=function(e){if(!E){e<0?e=D.length+e%D.length:e>D.length&&(e=D.length);for(var t=[],r=0;r<(arguments.length<=1?0:arguments.length-1);r++){var a=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];D.includes(a)||(D.splice(e+r,0,a),t.push(a))}return t.length>0&&(v=p=y=null,n.dispatchEvent("directives-added",[s(n),t])),t}console.warn("Doars: Unable to add directives after being enabled!")},n.removeDirectives=function(){if(!E){for(var e=[],t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];for(var i=0,o=r;i<o.length;i++){var u=o[i],c=D.indexOf(u);c<0||(D.slice(c,1),e.push(u))}return e.length>0&&(v=p=y=null,n.dispatchEvent("directives-removed",[s(n),e])),e}console.warn("Doars: Unable to remove directives after being enabled!")},n.update=function(e){if(E){if(e){var t,r=h(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=a.id,o=a.path;i in f?f[i].includes(o)||f[i].push(o):f[i]=[o]}}catch(e){r.e(e)}finally{r.f()}}if(!x&&0!==Object.getOwnPropertySymbols(f).length){x=!0,e=f,f={};var u,l=h(A);try{for(l.s();!(u=l.n()).done;)u.value.update(e)}catch(e){l.e(e)}finally{l.f()}if(x=!1,Object.getOwnPropertySymbols(f).length>0)return console.warn("Doars: during an update another update has been triggered. Normally this should not happen unless an expression in one of the directives is modifying a state which could cause a infinite loop!"),void window.requestAnimationFrame((function(){return n.update()}));c.length>0?k():n.dispatchEvent("updated",[s(n)])}}};var k=function e(t){var r;if((r=c).push.apply(r,d(t)),!x&&0!==c.length){x=!0,t=d(c),c=[];var a,i=o+"-state",u=o+"-ignore",s=[],l=[],v=function(e){if(1===e.nodeType)if(e[m]){l.unshift(e[m]);var t,n=h(e.querySelectorAll(i));try{for(n.s();!(t=n.n()).done;){var r=t.value;r[m]&&l.unshift(r)}}catch(e){n.e(e)}finally{n.f()}}else{var a=_(e,(function(e){return!e[m]||(l.unshift(e[m]),!1)}));do{if(e[g]){var o,u=h(e[g]);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.getComponent().removeAttribute(s)}}catch(e){u.e(e)}finally{u.f()}}}while(e=a())}},p=function(e){if(1===e.nodeType&&!e.closest("["+u+"]")){var t,n=h(e.querySelectorAll("["+i+"]"));try{for(n.s();!(t=n.n()).done;){var r=t.value;r.closest("["+u+"]")||s.push(r)}}catch(e){n.e(e)}finally{n.f()}if(e.hasAttribute(i))s.push(e);else{var a=F(e);if(a){var o=a.scanAttributes(e);a.updateAttributes(o)}}}},b=h(t);try{for(b.s();!(a=b.n()).done;){var E=a.value;if("childList"===E.type){var A,w=h(E.removedNodes);try{for(w.s();!(A=w.n()).done;)v(A.value)}catch(e){w.e(e)}finally{w.f()}var O,D=h(E.addedNodes);try{for(D.s();!(O=D.n()).done;)p(O.value)}catch(e){D.e(e)}finally{D.f()}}else if("attributes"===E.type){var k=E.target;if(E.attributeName===i){if(k[m])continue;var S=F(k);if(S){var L=k,C=_(k,(function(e){return e.hasAttribute(i)}));do{var T,P=h(L[g]);try{for(P.s();!(T=P.n()).done;){var $=T.value;S.removeAttribute($)}}catch(e){P.e(e)}finally{P.f()}}while(L=C())}N(k);continue}if(E.attributeName===u){if(k.hasAttribute(u)){v(k);continue}p(k);continue}if(!y.test(E.attributeName))continue;var I=F(k);if(!I)continue;var R,V=null,z=h(k[g]);try{for(z.s();!(R=z.n()).done;){var M=R.value;if(M.getName()===E.attributeName){V=M;break}}}catch(e){z.e(e)}finally{z.f()}var U=k.getAttribute(E.attributeName);if(!V){U&&I.addAttribute(k,E.attributeName,U);continue}V.setValue(U),I.updateAttribute(V)}}}catch(e){b.e(e)}finally{b.f()}l.length>0&&j.apply(void 0,l),s.length>0&&N.apply(void 0,s),x=!1,c.length>0?e():Object.getOwnPropertySymbols(f).length>0&&n.update()}};return n}return n(i)}(O),Ce=function(){return{createContexts:Te,createContextsProxy:Pe,RevocableProxy:C}},Te=function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e.getLibrary(),o=i.getSimpleContexts(),u="",s="",c=[],l=i.getContexts(),f=[],d=h(l);try{for(d.s();!(r=d.n()).done;){var v=r.value;if(v&&v.name){var p=v.create(e,t,n,Ce());p&&p.value&&(p.destroy&&"function"==typeof p.destroy&&f.push(p.destroy),v.deconstruct&&"object"==typeof p.value&&(c.push(v.name),s+="with("+v.name+") { ",u+=" }"),o[v.name]=p.value)}}}catch(e){d.e(e)}finally{d.f()}if("object"==typeof a)for(var g in a)o[g]=a[g];return{contexts:o,destroy:function(){var e,t=h(f);try{for(t.s();!(e=t.n()).done;)(0,e.value)(Ce())}catch(e){t.e(e)}finally{t.f()}},after:u,before:s,deconstructed:c}},Pe=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null,i=C({},{get:function(i,o){return a||(a=Te(e,t,n,r)),o in a.contexts?(t.accessed(e.getId(),o),a.contexts[o]):a.contexts.$state&&o in a.contexts.$state?(t.accessed(e.getId(),"$state"),a.contexts.$state[o]):void 0}});return{contexts:i.proxy,destroy:function(){a&&a.destroy&&a.destroy(e,t),i.revoke()}}};Le.executeExpression=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;a=Object.assign({return:!0},a);var i,o=[],s=function(e,t){o.push({id:e,path:t})},c=Te(e,t,s,r),l=c.after,f=c.before,v=c.contexts,p=c.destroy;a.return&&(f+="return ");try{i=u(Function,d(Object.keys(v)).concat([f+n+l])).apply(void 0,d(Object.values(v)))}catch(e){console.error(e,"Error encountered when executing the following expression: ",n),i=null}return p(),o.length>0&&e.getLibrary().update(o),i};var $e=function(){(new Le).enable()};"complete"===document.readyState||"interactive"===document.readyState?$e():document.addEventListener("DOMContentLoaded",$e,{once:!0,passive:!0}),window.copyToClipboard=function(e){var t=document.createElement("textarea");t.value=e,document.body.append(t),t.select(),t.setSelectionRange(0,999999),document.execCommand("copy"),t.remove()};var Ie=0,Re=document.getElementById("counter-text");window.increment=function(){Ie++,Re.setAttribute("d-text",Ie)}}();
